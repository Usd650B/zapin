/*! For license information please see main.1eddff72.js.LICENSE.txt */
(()=>{"use strict";var e={730(e,t,n){var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),_=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Ki){var r=Ki}Reflect.construct(e,[],t)}else{try{t.call()}catch(Ki){r=Ki}e.call(t.prototype)}else{try{throw Error()}catch(Ki){r=Ki}e()}}catch(Ki){if(Ki&&r&&"string"===typeof Ki.stack){for(var s=Ki.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case k:return"Portal";case E:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(ou){return e.body}}function X(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ie(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ne=null,Se=null;function Ee(e){if(e=bs(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),ke(e.stateNode,e.type,t))}}function Ie(e){Ne?Se?Se.push(e):Se=[e]:Ne=e}function _e(){if(Ne){var e=Ne,t=Se;if(Se=Ne=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ce(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Te(e,t,n)}finally{je=!1,(null!==Ne||null!==Se)&&(Ce(),_e())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Re=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Re=!1}function Oe(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,s,i,a,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(i(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Ke(s),e;if(a===r)return Ke(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=s.unstable_scheduleCallback,Qe=s.unstable_cancelCallback,Xe=s.unstable_shouldYield,Ye=s.unstable_requestPaint,$e=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=ht(o):0!==(i&=a)&&(r=ht(i))}else 0!==(a=n&~s)?r=ht(a):0!==i&&(r=ht(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,Nt,St,Et,It=!1,_t=[],Tt=null,Ct=null,jt=null,At=new Map,Dt=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=vs(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){It=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==jt&&Ft(jt)&&(jt=null),At.forEach(Ut),Dt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<_t.length){zt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Ct&&zt(Ct,e),null!==jt&&zt(jt,e),At.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var qt=x.ReactCurrentBatchConfig,Kt=!0;function Ht(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Gt(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Wt(e,t,n,r){if(Kt){var s=Xt(e,t,n,r);if(null===s)Kr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,s),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,s),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return At.set(i,Lt(At.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dt.set(i,Lt(Dt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==s;){var i=bs(s);if(null!==i&&wt(i),null===(i=Xt(e,t,n,r))&&Kr(e,t,r,Qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Xt(e,t,n,r){if(Qt=null,null!==(e=vs(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,s="value"in $t?$t.value:$t.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=M({},cn,{view:0,detail:0}),dn=sn(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},hn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function En(){return Sn}var In=M({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=sn(In),Tn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),jn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(An),Rn=[9,13,27,32],Pn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Pn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ie(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Wn=null;function Qn(e){Fr(e,0)}function Xn(e){if(W(xs(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Wn=Gn=null)}function nr(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];Hn(t,Wn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function ir(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Nr={},Sr={};function Er(e){if(Nr[e])return Nr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Nr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Ir=Er("animationend"),_r=Er("animationiteration"),Tr=Er("animationstart"),Cr=Er("transitionend"),jr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){jr.set(e,t),l(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Pr=Ar[Rr];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Ir,"onAnimationEnd"),Dr(_r,"onAnimationIteration"),Dr(Tr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var s=Ht;break;case 4:s=Gt;break;default:s=Wt}n=s.bind(null,t,n,e),s=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=vs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=i,s=we(n),a=[];e:{var o=jr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Ir:case _r:case Tr:l=yn;break;case Cr:l=jn;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:xs(l),f=null==c?o:xs(c),(o=new u(m,p+"leave",l,n,s)).target=h,o.relatedTarget=f,m=null,vs(s)===r&&((u=new u(d,p+"enter",c,n,s)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==h&&Qr(a,h,c,u,!0)}if("select"===(l=(o=r?xs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Kn(o))if($n)g=ar;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xs(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,s);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,s)}var v;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in($t=s)?$t.value:$t.textContent,Bn=!0)),0<(y=Gr(r,b)).length&&(b=new xn(b,e,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Zt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(s=new xn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Fr(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=De(e,n))&&r.unshift(Hr(e,i,s)),null!=(i=De(e,t))&&r.push(Hr(e,i,s))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=De(n,i))&&a.unshift(Hr(n,l,o)):s||null!=(l=De(n,i))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),ds="__reactFiber$"+hs,fs="__reactProps$"+hs,ps="__reactContainer$"+hs,ms="__reactEvents$"+hs,gs="__reactListeners$"+hs,ys="__reactHandles$"+hs;function vs(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[ds]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[ds])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[ds]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[fs]||null}var ks=[],Ns=-1;function Ss(e){return{current:e}}function Es(e){0>Ns||(e.current=ks[Ns],ks[Ns]=null,Ns--)}function Is(e,t){Ns++,ks[Ns]=e.current,e.current=t}var _s={},Ts=Ss(_s),Cs=Ss(!1),js=_s;function As(e,t){var n=e.type.contextTypes;if(!n)return _s;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rs(){Es(Cs),Es(Ts)}function Ps(e,t,n){if(Ts.current!==_s)throw Error(i(168));Is(Ts,t),Is(Cs,n)}function Os(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,q(e)||"Unknown",s));return M({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_s,js=Ts.current,Is(Ts,e),Is(Cs,Cs.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Os(e,t,js),r.__reactInternalMemoizedMergedChildContext=e,Es(Cs),Es(Ts),Is(Ts,e)):Es(Cs),Is(Cs,n)}var Fs=null,Us=!1,Vs=!1;function zs(e){null===Fs?Fs=[e]:Fs.push(e)}function Bs(){if(!Vs&&null!==Fs){Vs=!0;var e=0,t=bt;try{var n=Fs;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Us=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),We(Ze,Bs),s}finally{bt=t,Vs=!1}}return null}var qs=[],Ks=0,Hs=null,Gs=0,Ws=[],Qs=0,Xs=null,Ys=1,$s="";function Js(e,t){qs[Ks++]=Gs,qs[Ks++]=Hs,Hs=e,Gs=t}function Zs(e,t,n){Ws[Qs++]=Ys,Ws[Qs++]=$s,Ws[Qs++]=Xs,Xs=e;var r=Ys;e=$s;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ys=1<<32-at(t)+s|n<<s|r,$s=i+e}else Ys=1<<i|n<<s|r,$s=e}function ei(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function ti(e){for(;e===Hs;)Hs=qs[--Ks],qs[Ks]=null,Gs=qs[--Ks],qs[Ks]=null;for(;e===Xs;)Xs=Ws[--Qs],Ws[Qs]=null,$s=Ws[--Qs],Ws[Qs]=null,Ys=Ws[--Qs],Ws[Qs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xs?{id:Ys,overflow:$s}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function hi(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw di(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function di(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=x.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===N?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Fc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Uc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Fc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case k:return(t=Bc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Uc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case k:return n.key===s?u(e,t,n,r):null;case D:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:h(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case D:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,h=i,m=i=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(s,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(s,h),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===o.length)return n(s,h),si&&Js(s,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(s,o[m],l))&&(i=a(h,i,m),null===u?c=h:u.sibling=h,u=h);return si&&Js(s,m),c}for(h=r(s,h);m<o.length;m++)null!==(g=p(h,s,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(s,e)}),si&&Js(s,m),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var h=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(s,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(s,m),o=a(b,o,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(s,m),si&&Js(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(s,v.value,c))&&(o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return si&&Js(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(s,e)}),si&&Js(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===N&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===N){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&vi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===N?((i=Uc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Fc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case k:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Bc(a,r.mode,l)).return=r,r=i}return o(r);case D:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(O(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=zc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var xi=bi(!0),wi=bi(!1),ki=Ss(null),Ni=null,Si=null,Ei=null;function Ii(){Ei=Si=Ni=null}function _i(e){var t=ki.current;Es(ki),e._currentValue=t}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t){Ni=e,Ei=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(No=!0),e.firstContext=null)}function ji(e){var t=e._currentValue;if(Ei!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===Ni)throw Error(i(308));Si=e,Ni.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Ai=null;function Di(e){null===Ai?Ai=[e]:Ai.push(e)}function Ri(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Di(t)):(n.next=s.next,s.next=n),t.interleaved=n,Pi(e,r)}function Pi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oi=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Dl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Pi(e,n)}return null===(s=r.interleaved)?(t.next=t,Di(r)):(t.next=s.next,s.next=t),r.interleaved=t,Pi(e,n)}function zi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qi(e,t,n,r){var s=e.updateQueue;Oi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var h=s.baseState;for(a=0,u=c=l=null,o=i;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:Oi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(d=o).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===u&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Vl|=a,e.lanes=a,e.memoizedState=h}}function Hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Gi={},Wi=Ss(Gi),Qi=Ss(Gi),Xi=Ss(Gi);function Yi(e){if(e===Gi)throw Error(i(174));return e}function $i(e,t){switch(Is(Xi,t),Is(Qi,e),Is(Wi,Gi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Es(Wi),Is(Wi,t)}function Ji(){Es(Wi),Es(Qi),Es(Xi)}function ea(e){Yi(Xi.current);var t=Yi(Wi.current),n=le(t,e.type);t!==n&&(Is(Qi,e),Is(Wi,n))}function ta(e){Qi.current===e&&(Es(Wi),Es(Qi))}var na=Ss(0);function sa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ia=[];function aa(){for(var e=0;e<ia.length;e++)ia[e]._workInProgressVersionPrimary=null;ia.length=0}var oa=x.ReactCurrentDispatcher,la=x.ReactCurrentBatchConfig,ca=0,ua=null,ha=null,da=null,fa=!1,pa=!1,ma=0,ga=0;function ya(){throw Error(i(321))}function va(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ba(e,t,n,r,s,a){if(ca=a,ua=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?no:ro,e=n(r,s),pa){a=0;do{if(pa=!1,ma=0,25<=a)throw Error(i(301));a+=1,da=ha=null,t.updateQueue=null,oa.current=so,e=n(r,s)}while(pa)}if(oa.current=to,t=null!==ha&&null!==ha.next,ca=0,da=ha=ua=null,fa=!1,t)throw Error(i(300));return e}function xa(){var e=0!==ma;return ma=0,e}function wa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===da?ua.memoizedState=da=e:da=da.next=e,da}function ka(){if(null===ha){var e=ua.alternate;e=null!==e?e.memoizedState:null}else e=ha.next;var t=null===da?ua.memoizedState:da.next;if(null!==t)da=t,ha=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ha=e).memoizedState,baseState:ha.baseState,baseQueue:ha.baseQueue,queue:ha.queue,next:null},null===da?ua.memoizedState=da=e:da=da.next=e}return da}function Na(e,t){return"function"===typeof t?t(e):t}function Sa(e){var t=ka(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ha,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((ca&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,ua.lanes|=h,Vl|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(No=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,ua.lanes|=a,Vl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ea(e){var t=ka(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(No=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ia(){}function _a(e,t){var n=ua,r=ka(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,No=!0),r=r.queue,Ua(ja.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==da&&1&da.memoizedState.tag){if(n.flags|=2048,Pa(9,Ca.bind(null,n,r,s,t),void 0,null),null===Rl)throw Error(i(349));0!==(30&ca)||Ta(n,t,s)}return s}function Ta(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ua.updateQueue)?(t={lastEffect:null,stores:null},ua.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,r){t.value=n,t.getSnapshot=r,Aa(t)&&Da(e)}function ja(e,t,n){return n(function(){Aa(t)&&Da(e)})}function Aa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Da(e){var t=Pi(e,1);null!==t&&ac(t,e,1,-1)}function Ra(e){var t=wa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:e},t.queue=e,e=e.dispatch=$a.bind(null,ua,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ua.updateQueue)?(t={lastEffect:null,stores:null},ua.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oa(){return ka().memoizedState}function La(e,t,n,r){var s=wa();ua.flags|=e,s.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Ma(e,t,n,r){var s=ka();r=void 0===r?null:r;var i=void 0;if(null!==ha){var a=ha.memoizedState;if(i=a.destroy,null!==r&&va(r,a.deps))return void(s.memoizedState=Pa(t,n,i,r))}ua.flags|=e,s.memoizedState=Pa(1|t,n,i,r)}function Fa(e,t){return La(8390656,8,e,t)}function Ua(e,t){return Ma(2048,8,e,t)}function Va(e,t){return Ma(4,2,e,t)}function za(e,t){return Ma(4,4,e,t)}function Ba(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,Ba.bind(null,t,e),n)}function Ka(){}function Ha(e,t){var n=ka();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&va(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ga(e,t){var n=ka();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&va(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&ca)?(e.baseState&&(e.baseState=!1,No=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ua.lanes|=n,Vl|=n,e.baseState=!0),t)}function Qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=la.transition;la.transition={};try{e(!1),t()}finally{bt=n,la.transition=r}}function Xa(){return ka().memoizedState}function Ya(e,t,n){var r=ic(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ja(e))Za(t,n);else if(null!==(n=Ri(e,t,n,r))){ac(n,e,r,sc()),eo(n,t,r)}}function $a(e,t,n){var r=ic(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ja(e))Za(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Di(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(Ki){}null!==(n=Ri(e,t,s,r))&&(ac(n,e,r,s=sc()),eo(n,t,r))}}function Ja(e){var t=e.alternate;return e===ua||null!==t&&t===ua}function Za(e,t){pa=fa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var to={readContext:ji,useCallback:ya,useContext:ya,useEffect:ya,useImperativeHandle:ya,useInsertionEffect:ya,useLayoutEffect:ya,useMemo:ya,useReducer:ya,useRef:ya,useState:ya,useDebugValue:ya,useDeferredValue:ya,useTransition:ya,useMutableSource:ya,useSyncExternalStore:ya,useId:ya,unstable_isNewReconciler:!1},no={readContext:ji,useCallback:function(e,t){return wa().memoizedState=[e,void 0===t?null:t],e},useContext:ji,useEffect:Fa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4194308,4,Ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return La(4194308,4,e,t)},useInsertionEffect:function(e,t){return La(4,2,e,t)},useMemo:function(e,t){var n=wa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ya.bind(null,ua,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wa().memoizedState=e},useState:Ra,useDebugValue:Ka,useDeferredValue:function(e){return wa().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=Qa.bind(null,e[1]),wa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ua,s=wa();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Rl)throw Error(i(349));0!==(30&ca)||Ta(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Fa(ja.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,Ca.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=wa(),t=Rl.identifierPrefix;if(si){var n=$s;t=":"+t+"R"+(n=(Ys&~(1<<32-at(Ys)-1)).toString(32)+n),0<(n=ma++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ga++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ro={readContext:ji,useCallback:Ha,useContext:ji,useEffect:Ua,useImperativeHandle:qa,useInsertionEffect:Va,useLayoutEffect:za,useMemo:Ga,useReducer:Sa,useRef:Oa,useState:function(){return Sa(Na)},useDebugValue:Ka,useDeferredValue:function(e){return Wa(ka(),ha.memoizedState,e)},useTransition:function(){return[Sa(Na)[0],ka().memoizedState]},useMutableSource:Ia,useSyncExternalStore:_a,useId:Xa,unstable_isNewReconciler:!1},so={readContext:ji,useCallback:Ha,useContext:ji,useEffect:Ua,useImperativeHandle:qa,useInsertionEffect:Va,useLayoutEffect:za,useMemo:Ga,useReducer:Ea,useRef:Oa,useState:function(){return Ea(Na)},useDebugValue:Ka,useDeferredValue:function(e){var t=ka();return null===ha?t.memoizedState=e:Wa(t,ha.memoizedState,e)},useTransition:function(){return[Ea(Na)[0],ka().memoizedState]},useMutableSource:Ia,useSyncExternalStore:_a,useId:Xa,unstable_isNewReconciler:!1};function io(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ao(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var oo={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sc(),s=ic(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(ac(t,e,s,r),zi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sc(),s=ic(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(ac(t,e,s,r),zi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sc(),r=ic(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ui(e,s,r))&&(ac(t,e,r,n),zi(t,e,r))}};function lo(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function co(e,t,n){var r=!1,s=_s,i=t.contextType;return"object"===typeof i&&null!==i?i=ji(i):(s=Ds(t)?js:Ts.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?As(e,s):_s),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function uo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oo.enqueueReplaceState(t,t.state,null)}function ho(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Li(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=ji(i):(i=Ds(t)?js:Ts.current,s.context=As(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ao(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&oo.enqueueReplaceState(s,s.state,null),qi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function fo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function po(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function mo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var go="function"===typeof WeakMap?WeakMap:Map;function yo(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ql||(Ql=!0,Xl=r),mo(0,t)},n}function vo(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){mo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){mo(0,t),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function bo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new go;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function xo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function wo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var ko=x.ReactCurrentOwner,No=!1;function So(e,t,n,r){t.child=null===e?wi(t,null,n,r):xi(t,e.child,n,r)}function Eo(e,t,n,r,s){n=n.render;var i=t.ref;return Ci(t,s),r=ba(e,t,n,r,i,s),n=xa(),null===e||No?(si&&n&&ei(t),t.flags|=1,So(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qo(e,t,s))}function Io(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Lc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,To(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Qo(e,t,s)}return t.flags|=1,(e=Mc(i,r)).ref=t.ref,e.return=t,t.child=e}function To(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(No=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Qo(e,t,s);0!==(131072&e.flags)&&(No=!0)}}return Ao(e,t,n,r,s)}function Co(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Is(Ml,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Is(Ml,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Is(Ml,Ll),Ll|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Is(Ml,Ll),Ll|=r;return So(e,t,s,n),t.child}function jo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ao(e,t,n,r,s){var i=Ds(n)?js:Ts.current;return i=As(t,i),Ci(t,s),n=ba(e,t,n,r,i,s),r=xa(),null===e||No?(si&&r&&ei(t),t.flags|=1,So(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qo(e,t,s))}function Do(e,t,n,r,s){if(Ds(n)){var i=!0;Ls(t)}else i=!1;if(Ci(t,s),null===t.stateNode)Wo(e,t),co(t,n,r),ho(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ji(c):c=As(t,c=Ds(n)?js:Ts.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&uo(t,a,r,c),Oi=!1;var d=t.memoizedState;a.state=d,qi(t,r,a,s),l=t.memoizedState,o!==r||d!==l||Cs.current||Oi?("function"===typeof u&&(ao(t,n,u,r),l=t.memoizedState),(o=Oi||lo(t,n,o,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Mi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:io(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ji(l):l=As(t,l=Ds(n)?js:Ts.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&uo(t,a,r,l),Oi=!1,d=t.memoizedState,a.state=d,qi(t,r,a,s);var p=t.memoizedState;o!==h||d!==p||Cs.current||Oi?("function"===typeof f&&(ao(t,n,f,r),p=t.memoizedState),(c=Oi||lo(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ro(e,t,n,r,i,s)}function Ro(e,t,n,r,s,i){jo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ms(t,n,!1),Qo(e,t,i);r=t.stateNode,ko.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,o,i)):So(e,t,o,i),t.memoizedState=r.state,s&&Ms(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Ps(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ps(0,t.context,!1),$i(e,t.containerInfo)}function Oo(e,t,n,r,s){return fi(),pi(s),t.flags|=256,So(e,t,n,r),t.child}var Lo,Mo,Fo,Uo={dehydrated:null,treeContext:null,retryLane:0};function Vo(e){return{baseLanes:e,cachePool:null,transitions:null}}function zo(e,t,n){var r,s=t.pendingProps,a=na.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Is(na,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Vc(l,s,0,null),e=Uc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Vo(n),t.memoizedState=Uo,e):Bo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,qo(e,t,o,r=po(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Vc({mode:"visible",children:r.children},s,0,null),(a=Uc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xi(t,e.child,null,o),t.child.memoizedState=Vo(o),t.memoizedState=Uo,a);if(0===(1&t.mode))return qo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,qo(e,t,o,r=po(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),No||l){if(null!==(r=Rl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Pi(e,s),ac(r,e,s,-1))}return bc(),qo(e,t,o,r=po(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Ws[Qs++]=Ys,Ws[Qs++]=$s,Ws[Qs++]=Xs,Ys=e.id,$s=e.overflow,Xs=t),t=Bo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Mc(r,o):(o=Uc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Vo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Uo,s}return e=(o=e.child).sibling,s=Mc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Bo(e,t){return(t=Vc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qo(e,t,n,r){return null!==r&&pi(r),xi(t,e.child,null,n),(e=Bo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ko(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function Ho(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Go(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(So(e,t,r.children,n),0!==(2&(r=na.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ko(e,n,t);else if(19===e.tag)Ko(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Is(na,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===sa(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ho(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===sa(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ho(t,!0,n,null,i);break;case"together":Ho(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xo(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $o(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:case 17:return Ds(t.type)&&Rs(),Yo(t),null;case 3:return r=t.stateNode,Ji(),Es(Cs),Es(Ts),aa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(uc(ii),ii=null))),Yo(t),null;case 5:ta(t);var s=Yi(Xi.current);if(n=t.type,null!==e&&null!=t.stateNode)Mo(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Yo(t),null}if(e=Yi(Wi.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ds]=t,r[fs]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(s=0;s<Or.length;s++)Ur(Or[s],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":se(r,a),Ur("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ds]=t,e[fs]=r,Lo(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),s=r;break;case"iframe":case"object":case"embed":Ur("load",e),s=r;break;case"video":case"audio":for(s=0;s<Or.length;s++)Ur(Or[s],e);s=r;break;case"source":Ur("error",e),s=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),s=r;break;case"details":Ur("toggle",e),s=r;break;case"input":Y(e,r),s=X(e,r),Ur("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Ur("invalid",e)}for(a in ve(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&null!=t.stateNode)Fo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Xi.current),Yi(Wi.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ds]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ds]=t,t.stateNode=r}return Yo(t),null;case 13:if(Es(na),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))di(),fi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ds]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Yo(t),a=!1}else null!==ii&&(uc(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&na.current)?0===Fl&&(Fl=3):bc())),null!==t.updateQueue&&(t.flags|=4),Yo(t),null);case 4:return Ji(),null===e&&Br(t.stateNode.containerInfo),Yo(t),null;case 10:return _i(t.type._context),Yo(t),null;case 19:if(Es(na),null===(a=t.memoizedState))return Yo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Xo(a,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=sa(e))){for(t.flags|=128,Xo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Is(na,1&na.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Gl&&(t.flags|=128,r=!0,Xo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=sa(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Xo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Yo(t),null}else 2*$e()-a.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,Xo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=na.current,Is(na,r?1&n|2:1&n),t):(Yo(t),null);case 22:case 23:return mc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Yo(t),6&t.subtreeFlags&&(t.flags|=8192)):Yo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Jo(e,t){switch(ti(t),t.tag){case 1:return Ds(t.type)&&Rs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ji(),Es(Cs),Es(Ts),aa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ta(t),null;case 13:if(Es(na),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Es(na),null;case 4:return Ji(),null;case 10:return _i(t.type._context),null;case 22:case 23:return mc(),null;default:return null}}Lo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Mo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Yi(Wi.current);var i,a=null;switch(n){case"input":s=X(e,s),r=X(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Fo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Zo=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null;function rl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function sl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var il=!1;function al(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&sl(t,n,i)}s=s.next}while(s!==r)}}function ol(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ll(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function cl(e){var t=e.alternate;null!==t&&(e.alternate=null,cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ds],delete t[fs],delete t[ms],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ul(e){return 5===e.tag||3===e.tag||4===e.tag}function hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ul(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}var pl=null,ml=!1;function gl(e,t,n){for(n=n.child;null!==n;)yl(e,t,n),n=n.sibling}function yl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:el||rl(n,t);case 6:var r=pl,s=ml;pl=null,gl(e,t,n),ml=s,null!==(pl=r)&&(ml?(e=pl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):pl.removeChild(n.stateNode));break;case 18:null!==pl&&(ml?(e=pl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Bt(e)):ls(pl,n.stateNode));break;case 4:r=pl,s=ml,pl=n.stateNode.containerInfo,ml=!0,gl(e,t,n),pl=r,ml=s;break;case 0:case 11:case 14:case 15:if(!el&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&sl(n,t,a),s=s.next}while(s!==r)}gl(e,t,n);break;case 1:if(!el&&(rl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Tc(n,t,o)}gl(e,t,n);break;case 21:gl(e,t,n);break;case 22:1&n.mode?(el=(r=el)||null!==n.memoizedState,gl(e,t,n),el=r):gl(e,t,n);break;default:gl(e,t,n)}}function vl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new tl),t.forEach(function(t){var r=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function bl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:pl=l.stateNode,ml=!1;break e;case 3:case 4:pl=l.stateNode.containerInfo,ml=!0;break e}l=l.return}if(null===pl)throw Error(i(160));yl(a,o,s),pl=null,ml=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(Ki){Tc(s,t,Ki)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bl(t,e),wl(e),4&r){try{al(3,e,e.return),ol(3,e)}catch(g){Tc(e,e.return,g)}try{al(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:bl(t,e),wl(e),512&r&&null!==n&&rl(n,n.return);break;case 5:if(bl(t,e),wl(e),512&r&&null!==n&&rl(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(s,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?ge(s,d):"dangerouslySetInnerHTML"===h?he(s,d):"children"===h?de(s,d):b(s,h,d,u)}switch(l){case"input":J(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(g){Tc(e,e.return,g)}}break;case 6:if(bl(t,e),wl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Tc(e,e.return,g)}}break;case 3:if(bl(t,e),wl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:bl(t,e),wl(e);break;case 13:bl(t,e),wl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Hl=$e())),4&r&&vl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(el=(u=el)||h,bl(t,e),el=u):bl(t,e),wl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(nl=e,h=e.child;null!==h;){for(d=nl=h;null!==nl;){switch(p=(f=nl).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:rl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:rl(f,f.return);break;case 22:if(null!==f.memoizedState){El(d);continue}}null!==p?(p.return=f,nl=p):El(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{s=d.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Tc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bl(t,e),wl(e),4&r&&vl(e);case 21:}}function wl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ul(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),fl(e,hl(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;dl(e,hl(e),a);break;default:throw Error(i(161))}}catch(Vi){Tc(e,e.return,Vi)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function kl(e,t,n){nl=e,Nl(e,t,n)}function Nl(e,t,n){for(var r=0!==(1&e.mode);null!==nl;){var s=nl,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Zo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||el;o=Zo;var c=el;if(Zo=a,(el=l)&&!c)for(nl=s;null!==nl;)l=(a=nl).child,22===a.tag&&null!==a.memoizedState?Il(s):null!==l?(l.return=a,nl=l):Il(s);for(;null!==i;)nl=i,Nl(i,t,n),i=i.sibling;nl=s,Zo=o,el=c}Sl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,nl=i):Sl(e)}}function Sl(e){for(;null!==nl;){var t=nl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:el||ol(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!el)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:io(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(i(163))}el||512&t.flags&&ll(t)}catch(Zi){Tc(t,t.return,Zi)}}if(t===e){nl=null;break}if(null!==(n=t.sibling)){n.return=t.return,nl=n;break}nl=t.return}}function El(e){for(;null!==nl;){var t=nl;if(t===e){nl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,nl=n;break}nl=t.return}}function Il(e){for(;null!==nl;){var t=nl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ol(4,t)}catch(Vi){Tc(t,n,Vi)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(Vi){Tc(t,s,Vi)}}var i=t.return;try{ll(t)}catch(Vi){Tc(t,i,Vi)}break;case 5:var a=t.return;try{ll(t)}catch(Vi){Tc(t,a,Vi)}}}catch(Vi){Tc(t,t.return,Vi)}if(t===e){nl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,nl=o;break}nl=t.return}}var _l,Tl=Math.ceil,Cl=x.ReactCurrentDispatcher,jl=x.ReactCurrentOwner,Al=x.ReactCurrentBatchConfig,Dl=0,Rl=null,Pl=null,Ol=0,Ll=0,Ml=Ss(0),Fl=0,Ul=null,Vl=0,zl=0,Bl=0,ql=null,Kl=null,Hl=0,Gl=1/0,Wl=null,Ql=!1,Xl=null,Yl=null,$l=!1,Jl=null,Zl=0,ec=0,tc=null,nc=-1,rc=0;function sc(){return 0!==(6&Dl)?$e():-1!==nc?nc:nc=$e()}function ic(e){return 0===(1&e.mode)?1:0!==(2&Dl)&&0!==Ol?Ol&-Ol:null!==mi.transition?(0===rc&&(rc=mt()),rc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function ac(e,t,n,r){if(50<ec)throw ec=0,tc=null,Error(i(185));yt(e,n,r),0!==(2&Dl)&&e===Rl||(e===Rl&&(0===(2&Dl)&&(zl|=n),4===Fl&&hc(e,Ol)),oc(e,r),1===n&&0===Dl&&0===(1&t.mode)&&(Gl=$e()+500,Us&&Bs()))}function oc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=dt(e,e===Rl?Ol:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Us=!0,zs(e)}(dc.bind(null,e)):zs(dc.bind(null,e)),as(function(){0===(6&Dl)&&Bs()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,lc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lc(e,t){if(nc=-1,rc=0,0!==(6&Dl))throw Error(i(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=dt(e,e===Rl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=xc(e,r);else{t=r;var s=Dl;Dl|=2;var a=vc();for(Rl===e&&Ol===t||(Wl=null,Gl=$e()+500,gc(e,t));;)try{kc();break}catch(l){yc(e,l)}Ii(),Cl.current=a,Dl=s,null!==Pl?t=0:(Rl=null,Ol=0,t=Fl)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=cc(e,s))),1===t)throw n=Ul,gc(e,0),hc(e,r),oc(e,$e()),n;if(6===t)hc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=xc(e,r))&&(0!==(a=pt(e))&&(r=a,t=cc(e,a))),1===t))throw n=Ul,gc(e,0),hc(e,r),oc(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Ec(e,Kl,Wl);break;case 3:if(hc(e,r),(130023424&r)===r&&10<(t=Hl+500-$e())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){sc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(Ec.bind(null,e,Kl,Wl),t);break}Ec(e,Kl,Wl);break;case 4:if(hc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=rs(Ec.bind(null,e,Kl,Wl),r);break}Ec(e,Kl,Wl);break;default:throw Error(i(329))}}}return oc(e,$e()),e.callbackNode===n?lc.bind(null,e):null}function cc(e,t){var n=ql;return e.current.memoizedState.isDehydrated&&(gc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Kl,Kl=n,null!==t&&uc(t)),e}function uc(e){null===Kl?Kl=e:Kl.push.apply(Kl,e)}function hc(e,t){for(t&=~Bl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function dc(e){if(0!==(6&Dl))throw Error(i(327));Ic();var t=dt(e,0);if(0===(1&t))return oc(e,$e()),null;var n=xc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=cc(e,r))}if(1===n)throw n=Ul,gc(e,0),hc(e,t),oc(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Kl,Wl),oc(e,$e()),null}function fc(e,t){var n=Dl;Dl|=1;try{return e(t)}finally{0===(Dl=n)&&(Gl=$e()+500,Us&&Bs())}}function pc(e){null!==Jl&&0===Jl.tag&&0===(6&Dl)&&Ic();var t=Dl;Dl|=1;var n=Al.transition,r=bt;try{if(Al.transition=null,bt=1,e)return e()}finally{bt=r,Al.transition=n,0===(6&(Dl=t))&&Bs()}}function mc(){Ll=Ml.current,Es(Ml)}function gc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Rs();break;case 3:Ji(),Es(Cs),Es(Ts),aa();break;case 5:ta(r);break;case 4:Ji();break;case 13:case 19:Es(na);break;case 10:_i(r.type._context);break;case 22:case 23:mc()}n=n.return}if(Rl=e,Pl=e=Mc(e.current,null),Ol=Ll=t,Fl=0,Ul=null,Bl=zl=Vl=0,Kl=ql=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ai=null}return e}function yc(e,t){for(;;){var n=Pl;try{if(Ii(),oa.current=to,fa){for(var r=ua.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}fa=!1}if(ca=0,da=ha=ua=null,pa=!1,ma=0,jl.current=null,null===n||null===n.return){Fl=1,Ul=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=xo(o);if(null!==p){p.flags&=-257,wo(p,o,l,0,t),1&p.mode&&bo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){bo(a,u,t),bc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=xo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),wo(y,o,l,0,t),pi(fo(c,l));break e}}a=c=fo(c,l),4!==Fl&&(Fl=2),null===ql?ql=[a]:ql.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,yo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,vo(a,l,t));break e}}a=a.return}while(null!==a)}Sc(n)}catch(ra){t=ra,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function vc(){var e=Cl.current;return Cl.current=to,null===e?to:e}function bc(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Rl||0===(268435455&Vl)&&0===(268435455&zl)||hc(Rl,Ol)}function xc(e,t){var n=Dl;Dl|=2;var r=vc();for(Rl===e&&Ol===t||(Wl=null,gc(e,t));;)try{wc();break}catch(s){yc(e,s)}if(Ii(),Dl=n,Cl.current=r,null!==Pl)throw Error(i(261));return Rl=null,Ol=0,Fl}function wc(){for(;null!==Pl;)Nc(Pl)}function kc(){for(;null!==Pl&&!Xe();)Nc(Pl)}function Nc(e){var t=_l(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?Sc(e):Pl=t,jl.current=null}function Sc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$o(n,t,Ll)))return void(Pl=n)}else{if(null!==(n=Jo(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Fl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Fl&&(Fl=5)}function Ec(e,t,n){var r=bt,s=Al.transition;try{Al.transition=null,bt=1,function(e,t,n,r){do{Ic()}while(null!==Jl);if(0!==(6&Dl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Rl&&(Pl=Rl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||$l||($l=!0,Rc(tt,function(){return Ic(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Al.transition,Al.transition=null;var o=bt;bt=1;var l=Dl;Dl|=4,jl.current=null,function(e,t){if(es=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(_o){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==s&&3!==d.nodeType||(l=o+s),d!==a||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++h===r&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Kt=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){t=nl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:io(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(_o){Tc(t,t.return,_o)}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=il,il=!1}(e,n),xl(n,e),pr(ts),Kt=!!es,ts=es=null,e.current=n,kl(n,e,s),Ye(),Dl=l,bt=o,Al.transition=a}else e.current=n;if($l&&($l=!1,Jl=e,Zl=s),a=e.pendingLanes,0===a&&(Yl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),oc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ql)throw Ql=!1,e=Xl,Xl=null,e;0!==(1&Zl)&&0!==e.tag&&Ic(),a=e.pendingLanes,0!==(1&a)?e===tc?ec++:(ec=0,tc=e):ec=0,Bs()}(e,t,n,r)}finally{Al.transition=s,bt=r}return null}function Ic(){if(null!==Jl){var e=xt(Zl),t=Al.transition,n=bt;try{if(Al.transition=null,bt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,Zl=0,0!==(6&Dl))throw Error(i(331));var s=Dl;for(Dl|=4,nl=e.current;null!==nl;){var a=nl,o=a.child;if(0!==(16&nl.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(nl=u;null!==nl;){var h=nl;switch(h.tag){case 0:case 11:case 15:al(8,h,a)}var d=h.child;if(null!==d)d.return=h,nl=d;else for(;null!==nl;){var f=(h=nl).sibling,p=h.return;if(cl(h),h===u){nl=null;break}if(null!==f){f.return=p,nl=f;break}nl=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}nl=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,nl=o;else e:for(;null!==nl;){if(0!==(2048&(a=nl).flags))switch(a.tag){case 0:case 11:case 15:al(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,nl=v;break e}nl=a.return}}var b=e.current;for(nl=b;null!==nl;){var x=(o=nl).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,nl=x;else e:for(o=b;null!==nl;){if(0!==(2048&(l=nl).flags))try{switch(l.tag){case 0:case 11:case 15:ol(9,l)}}catch(ra){Tc(l,l.return,ra)}if(l===o){nl=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,nl=w;break e}nl=l.return}}if(Dl=s,Bs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(ra){}r=!0}return r}finally{bt=n,Al.transition=t}}return!1}function _c(e,t,n){e=Ui(e,t=yo(0,t=fo(n,t),1),1),t=sc(),null!==e&&(yt(e,1,t),oc(e,t))}function Tc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=Ui(t,e=vo(t,e=fo(n,e),1),1),e=sc(),null!==t&&(yt(t,1,e),oc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=sc(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Ol&n)===n&&(4===Fl||3===Fl&&(130023424&Ol)===Ol&&500>$e()-Hl?gc(e,0):Bl|=n),oc(e,t)}function jc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=sc();null!==(e=Pi(e,t))&&(yt(e,t,n),oc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),jc(e,n)}function Dc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),jc(e,n)}function Rc(e,t){return We(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Pc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Lc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Uc(n.children,s,a,t);case S:o=8,s|=8;break;case E:return(e=Oc(12,n,t,2|s)).elementType=E,e.lanes=a,e;case C:return(e=Oc(13,n,t,s)).elementType=C,e.lanes=a,e;case j:return(e=Oc(19,n,t,s)).elementType=j,e.lanes=a,e;case R:return Vc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:o=10;break e;case _:o=9;break e;case T:o=11;break e;case A:o=14;break e;case D:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Oc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Uc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Vc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kc(e,t,n,r,s,i,a,o,l){return e=new qc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Oc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function Hc(e){if(!e)return _s;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ds(n))return Os(e,n,t)}return t}function Gc(e,t,n,r,s,i,a,o,l){return(e=Kc(n,r,!0,e,0,i,0,o,l)).context=Hc(null),n=e.current,(i=Fi(r=sc(),s=ic(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,s),e.current.lanes=s,yt(e,s,r),oc(e,r),e}function Wc(e,t,n,r){var s=t.current,i=sc(),a=ic(s);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(s,t,a))&&(ac(e,s,a,i),zi(e,s,a)),a}function Qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Cs.current)No=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return No=!1,function(e,t,n){switch(t.tag){case 3:Po(t),fi();break;case 5:ea(t);break;case 1:Ds(t.type)&&Ls(t);break;case 4:$i(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Is(ki,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Is(na,1&na.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zo(e,t,n):(Is(na,1&na.current),null!==(e=Qo(e,t,n))?e.sibling:null);Is(na,1&na.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Go(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Is(na,na.current),r)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,n)}return Qo(e,t,n)}(e,t,n);No=0!==(131072&e.flags)}else No=!1,si&&0!==(1048576&t.flags)&&Zs(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var s=As(t,Ts.current);Ci(t,n),s=ba(null,t,r,e,s,n);var a=xa();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(r)?(a=!0,Ls(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Li(t),s.updater=oo,t.stateNode=s,s._reactInternals=t,ho(t,r,e,n),t=Ro(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),So(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=io(r,e),s){case 0:t=Ao(null,t,r,e,n);break e;case 1:t=Do(null,t,r,e,n);break e;case 11:t=Eo(null,t,r,e,n);break e;case 14:t=Io(null,t,r,io(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Ao(e,t,r,s=t.elementType===r?s:io(r,s),n);case 1:return r=t.type,s=t.pendingProps,Do(e,t,r,s=t.elementType===r?s:io(r,s),n);case 3:e:{if(Po(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Mi(e,t),qi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Oo(e,t,r,n,s=fo(Error(i(423)),t));break e}if(r!==s){t=Oo(e,t,r,n,s=fo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Qo(e,t,n);break e}So(e,t,r,n)}t=t.child}return t;case 5:return ea(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),jo(e,t),So(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return zo(e,t,n);case 4:return $i(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xi(t,null,r,n):So(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,Eo(e,t,r,s=t.elementType===r?s:io(r,s),n);case 7:return So(e,t,t.pendingProps,n),t.child;case 8:case 12:return So(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Is(ki,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Cs.current){t=Qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ti(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ti(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}So(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ci(t,n),r=r(s=ji(s)),t.flags|=1,So(e,t,r,n),t.child;case 14:return s=io(r=t.type,t.pendingProps),Io(e,t,r,s=io(r.type,s),n);case 15:return To(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:io(r,s),Wo(e,t),t.tag=1,Ds(r)?(e=!0,Ls(t)):e=!1,Ci(t,n),co(t,r,s),ho(t,r,s,n),Ro(null,t,r,!0,e,n);case 19:return Go(e,t,n);case 22:return Co(e,t,n)}throw Error(i(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function eu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function tu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nu(){}function ru(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Qc(a);o.call(e)}}Wc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Qc(a);i.call(e)}}var a=Gc(t,r,e,0,null,!1,0,"",nu);return e._reactRootContainer=a,e[ps]=a.current,Br(8===e.nodeType?e.parentNode:e),pc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Qc(l);o.call(e)}}var l=Kc(e,0,!1,null,0,!1,0,"",nu);return e._reactRootContainer=l,e[ps]=l.current,Br(8===e.nodeType?e.parentNode:e),pc(function(){Wc(t,l,n,r)}),l}(n,t,e,s,r);return Qc(a)}Zc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wc(e,t,null,null)},Zc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pc(function(){Wc(null,e,null,null)}),t[ps]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),oc(t,$e()),0===(6&Dl)&&(Gl=$e()+500,Bs()))}break;case 13:pc(function(){var t=Pi(e,1);if(null!==t){var n=sc();ac(t,e,1,n)}}),Yc(e,1)}},kt=function(e){if(13===e.tag){var t=Pi(e,134217728);if(null!==t)ac(t,e,134217728,sc());Yc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=ic(e),n=Pi(e,t);if(null!==n)ac(n,e,t,sc());Yc(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));W(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=fc,Ce=pc;var su={usingClientEntryPoint:!1,Events:[bs,xs,ws,Ie,_e,fc]},iu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},au={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{st=lu.inject(au),it=lu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!eu(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!eu(e))throw Error(i(299));var n=!1,r="",s=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Kc(e,1,!1,null,0,n,0,r,s),e[ps]=t.current,Br(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return pc(e)},t.hydrate=function(e,t,n){if(!tu(t))throw Error(i(200));return ru(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!eu(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=$c;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ps]=t.current,Br(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Zc(t)},t.render=function(e,t,n){if(!tu(t))throw Error(i(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!tu(e))throw Error(i(40));return!!e._reactRootContainer&&(pc(function(){ru(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=fc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!tu(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ru(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391(e,t,n){var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153(e,t,n){var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,N={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,s)&&!S.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:N.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+T(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(_,"$&/")+"/"),C(a,t,s,"",function(e){return e})):null!=a&&(I(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+T(o=e[c],c);l+=C(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,s,u=i+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],s=0;return C(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:N};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=N.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},43(e,t,n){e.exports=n(202)},579(e,t,n){e.exports=n(153)},234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,R(k);else{var t=r(u);null!==t&&P(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(I),I=-1),p=!0;var i=f;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!C());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&s(c),x(n)}else s(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&P(w,h.startTime-n),l=!1}return l}finally{d=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,S=!1,E=null,I=-1,_=5,T=-1;function C(){return!(t.unstable_now()-T<_)}function j(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?N():(S=!1,E=null)}}else S=!1}if("function"===typeof b)N=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=j,N=function(){D.postMessage(null)}}else N=function(){y(j,0)};function R(e){E=e,S||(S=!0,N())}function P(e,n){I=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(I),I=-1):g=!0,P(w,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,R(k))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853(e,t,n){e.exports=n(234)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,s=n(43),i=n.t(s,2),a=n(391),o=n(950),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,l=r.Pop,d=null,g=y();function y(){return(o.state||{idx:null}).idx}function v(){l=r.Pop;let e=y(),t=null==e?null:e-g;g=e,d&&d({action:l,location:x.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let x={get action(){return l},get location(){return e(i,o)},listen(e){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(u,v),d=e,()=>{i.removeEventListener(u,v),d=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let s=p(x.location,e,t);n&&n(s,e),g=y()+1;let c=f(s,g),u=x.createHref(s);try{o.pushState(c,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(u)}a&&d&&d({action:l,location:x.location,delta:1})},replace:function(e,t){l=r.Replace;let s=p(x.location,e,t);n&&n(s,e),g=y();let i=f(s,g),c=x.createHref(s);o.replaceState(i,"",c),a&&d&&d({action:l,location:x.location,delta:0})},go:e=>o.go(e)};return x}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),x(e,t,n,!1)}function x(e,t,n,r){let s=P(("string"===typeof t?g(t):t).pathname||"/",n);if(null==s)return null;let i=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=R(s);a=A(i[o],e,r)}return a}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(h(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=B([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:j(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of k(e.path))s(e,t,r);else s(e,t)}),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=k(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const N=/^:[\w-]+$/,S=3,E=2,I=1,_=10,T=-2,C=e=>"*"===e;function j(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=T),t&&(r+=E),n.filter(e=>!C(e)).reduce((e,t)=>e+(N.test(t)?S:""===t?I:_),r)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:B([i,u.pathname]),pathnameBase:q(B([i,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(i=B([i,u.pathnameBase]))}return a}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const O=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function L(e,t){void 0===t&&(t="/");let n,{pathname:r,search:s="",hash:i=""}="string"===typeof e?g(e):e;if(r)if(a=r,O.test(a))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),d(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?M(r.substring(1),"/"):M(r,t)}else n=t;var a;return{pathname:n,search:K(s),hash:H(i)}}function M(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function F(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function U(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function V(e,t){let n=U(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function z(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=g(e):(s=c({},e),h(!s.pathname||!s.pathname.includes("?"),F("?","pathname","search",s)),h(!s.pathname||!s.pathname.includes("#"),F("#","pathname","hash",s)),h(!s.search||!s.search.includes("#"),F("#","search","hash",s)));let i,a=""===e||""===s.pathname,o=a?"/":s.pathname;if(null==o)i=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=L(s,i),u=o&&"/"!==o&&o.endsWith("/"),d=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}const B=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",H=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function G(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],Q=(new Set(W),["get",...W]);new Set(Q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X.apply(this,arguments)}const Y=s.createContext(null);const $=s.createContext(null);const J=s.createContext(null);const Z=s.createContext(null);const ee=s.createContext({outlet:null,matches:[],isDataRoute:!1});const te=s.createContext(null);function ne(){return null!=s.useContext(Z)}function re(){return ne()||h(!1),s.useContext(Z).location}function se(e){s.useContext(J).static||s.useLayoutEffect(e)}function ie(){let{isDataRoute:e}=s.useContext(ee);return e?function(){let{router:e}=me(fe.UseNavigateStable),t=ye(pe.UseNavigateStable),n=s.useRef(!1);se(()=>{n.current=!0});let r=s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,X({fromRouteId:t},s)))},[e,t]);return r}():function(){ne()||h(!1);let e=s.useContext(Y),{basename:t,future:n,navigator:r}=s.useContext(J),{matches:i}=s.useContext(ee),{pathname:a}=re(),o=JSON.stringify(V(i,n.v7_relativeSplatPath)),l=s.useRef(!1);se(()=>{l.current=!0});let c=s.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=z(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:B([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,o,a,e]);return c}()}function ae(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(J),{matches:i}=s.useContext(ee),{pathname:a}=re(),o=JSON.stringify(V(i,r.v7_relativeSplatPath));return s.useMemo(()=>z(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function oe(e,t,n,i){ne()||h(!1);let{navigator:a}=s.useContext(J),{matches:o}=s.useContext(ee),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=re();if(t){var p;let e="string"===typeof t?g(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||h(!1),d=e}else d=f;let m=d.pathname||"/",y=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=b(e,{pathname:y});let x=de(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:B([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:B([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,i);return t&&x?s.createElement(Z.Provider,{value:{location:X({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:r.Pop}},x):x}function le(){let e=function(){var e;let t=s.useContext(te),n=ge(pe.UseRouteError),r=ye(pe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=G(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const ce=s.createElement(le,null);class ue extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(ee.Provider,{value:this.props.routeContext},s.createElement(te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function he(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(Y);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(ee.Provider,{value:t},r)}function de(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||h(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,r,i)=>{let a,h=!1,d=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||ce,c&&(u<0&&0===i?(p="route-fallback",!1||ve[p]||(ve[p]=!0),h=!0,f=null):u===i&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?d:h?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(he,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(ue,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var fe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(fe||{}),pe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(pe||{});function me(e){let t=s.useContext(Y);return t||h(!1),t}function ge(e){let t=s.useContext($);return t||h(!1),t}function ye(e){let t=function(){let e=s.useContext(ee);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const ve={};function be(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function xe(e){h(!1)}function we(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.Pop,navigator:o,static:l=!1,future:c}=e;ne()&&h(!1);let u=t.replace(/^\/*/,"/"),d=s.useMemo(()=>({basename:u,navigator:o,static:l,future:X({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof i&&(i=g(i));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=i,b=s.useMemo(()=>{let e=P(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:y,key:v},navigationType:a}},[u,f,p,m,y,v,a]);return null==b?null:s.createElement(J.Provider,{value:d},s.createElement(Z.Provider,{children:n,value:b}))}function ke(e){let{children:t,location:n}=e;return oe(Ne(t),n)}new Promise(()=>{});s.Component;function Ne(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,Ne(e.props.children,i));e.type!==xe&&h(!1),e.props.index&&e.props.children&&h(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ne(e.props.children,i)),n.push(a)}),n}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function Ee(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ie=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(vN){}new Map;const _e=i.startTransition;l.flushSync,i.useId;function Te(e){let{basename:t,children:n,future:r,window:i}=e,a=s.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),y(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return p("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:m(t)},null,o)));let l=a.current,[c,u]=s.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},d=s.useCallback(e=>{h&&_e?_e(()=>u(e)):u(e)},[u,h]);return s.useLayoutEffect(()=>l.listen(d),[l,d]),s.useEffect(()=>be(r),[r]),s.createElement(we,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,je=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=s.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,p=Ee(e,Ie),{basename:g}=s.useContext(J),y=!1;if("string"===typeof u&&je.test(u)&&(n=u,Ce))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=P(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:y=!0}catch(vN){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;ne()||h(!1);let{basename:r,navigator:i}=s.useContext(J),{hash:a,pathname:o,search:l}=ae(e,{relative:n}),c=o;return"/"!==r&&(c="/"===o?r:B([r,o])),i.createHref({pathname:c,search:l,hash:a})}(u,{relative:i}),b=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=ie(),u=re(),h=ae(e,{relative:o});return s.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:m(u)===m(h);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,h,r,i,n,e,a,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:f});return s.createElement("a",Se({},p,{href:n||v,onClick:y||a?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var De,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(De||(De={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));const Pe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,i||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Pe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new Le;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Me=function(e){return function(e){const t=Pe(e);return Oe.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Fe=function(e){try{return Oe.decodeString(e,!0)}catch(vN){console.error("base64Decode failed: ",vN)}return null};const Ue=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ve=()=>{try{return Ue()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(vN){return}const t=e&&Fe(e[1]);return t&&JSON.parse(t)})()}catch(vN){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(vN))}},ze=e=>{var t,n;return null===(n=null===(t=Ve())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Be=e=>{const t=ze(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},qe=()=>{var e;return null===(e=Ve())||void 0===e?void 0:e.config},Ke=e=>{var t;return null===(t=Ve())||void 0===t?void 0:t["_".concat(e)]};class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ge(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(i)),""].join(".")}function We(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Qe(){var e;const t=null===(e=Ve())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(vN){return!1}}function Xe(){try{return"object"===typeof indexedDB}catch(vN){return!1}}class Ye extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$e.prototype.create)}}class $e{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(Je,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new Ye(n,i,t)}}const Je=/\{\$([^}]+)}/g;function Ze(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(et(n)&&et(i)){if(!Ze(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function et(e){return null!==e&&"object"===typeof e}function tt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function nt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function rt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class st{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=it),void 0===r.error&&(r.error=it),void 0===r.complete&&(r.complete=it);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(vN){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(vN){"undefined"!==typeof console&&console.error&&console.error(vN)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function it(){}function at(e){return e&&e._delegate?e._delegate:e}class ot{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const lt="[DEFAULT]";class ct{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new He;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(vN){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(vN){if(r)return null;throw vN}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:lt})}catch(vN){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(vN){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===lt?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.component?this.component.multipleInstances?e:lt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ut{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ct(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ht=[];var dt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(dt||(dt={}));const ft={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},pt=dt.INFO,mt={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},gt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=mt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class yt{constructor(e){this.name=e,this._logLevel=pt,this._logHandler=gt,this._userLogHandler=null,ht.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ft[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...t),this._logHandler(this,dt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...t),this._logHandler(this,dt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.INFO,...t),this._logHandler(this,dt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.WARN,...t),this._logHandler(this,dt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...t),this._logHandler(this,dt.ERROR,...t)}}function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function bt(e){var t=function(e,t){if("object"!=vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vt(t)?t:t+""}function xt(e,t,n){return(t=bt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach(function(t){xt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let Nt,St;const Et=new WeakMap,It=new WeakMap,_t=new WeakMap,Tt=new WeakMap,Ct=new WeakMap;let jt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return It.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_t.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function At(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(St||(St=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Pt(this),n),Rt(Et.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Rt(e.apply(Pt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Pt(this),t,...r);return _t.set(i,t.sort?t.sort():[t]),Rt(i)}}function Dt(e){return"function"===typeof e?At(e):(e instanceof IDBTransaction&&function(e){if(It.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});It.set(e,t)}(e),t=e,(Nt||(Nt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,jt):e);var t}function Rt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Rt(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Et.set(t,e)}).catch(()=>{}),Ct.set(t,e),t}(e);if(Tt.has(e))return Tt.get(e);const t=Dt(e);return t!==e&&(Tt.set(e,t),Ct.set(t,e)),t}const Pt=e=>Ct.get(e);const Ot=["get","getKey","getAll","getAllKeys","count"],Lt=["put","add","delete","clear"],Mt=new Map;function Ft(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Mt.get(t))return Mt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Lt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Ot.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return Mt.set(t,i),i}jt=(e=>kt(kt({},e),{},{get:(t,n,r)=>Ft(t,n)||e.get(t,n,r),has:(t,n)=>!!Ft(t,n)||e.has(t,n)}))(jt);class Ut{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Vt="@firebase/app",zt="0.9.13",Bt=new yt("@firebase/app"),qt="@firebase/app-compat",Kt="@firebase/analytics-compat",Ht="@firebase/analytics",Gt="@firebase/app-check-compat",Wt="@firebase/app-check",Qt="@firebase/auth",Xt="@firebase/auth-compat",Yt="@firebase/database",$t="@firebase/database-compat",Jt="@firebase/functions",Zt="@firebase/functions-compat",en="@firebase/installations",tn="@firebase/installations-compat",nn="@firebase/messaging",rn="@firebase/messaging-compat",sn="@firebase/performance",an="@firebase/performance-compat",on="@firebase/remote-config",ln="@firebase/remote-config-compat",cn="@firebase/storage",un="@firebase/storage-compat",hn="@firebase/firestore",dn="@firebase/firestore-compat",fn="firebase",pn="[DEFAULT]",mn={[Vt]:"fire-core",[qt]:"fire-core-compat",[Ht]:"fire-analytics",[Kt]:"fire-analytics-compat",[Wt]:"fire-app-check",[Gt]:"fire-app-check-compat",[Qt]:"fire-auth",[Xt]:"fire-auth-compat",[Yt]:"fire-rtdb",[$t]:"fire-rtdb-compat",[Jt]:"fire-fn",[Zt]:"fire-fn-compat",[en]:"fire-iid",[tn]:"fire-iid-compat",[nn]:"fire-fcm",[rn]:"fire-fcm-compat",[sn]:"fire-perf",[an]:"fire-perf-compat",[on]:"fire-rc",[ln]:"fire-rc-compat",[cn]:"fire-gcs",[un]:"fire-gcs-compat",[hn]:"fire-fst",[dn]:"fire-fst-compat","fire-js":"fire-js",[fn]:"fire-js-all"},gn=new Map,yn=new Map;function vn(e,t){try{e.container.addComponent(t)}catch(vN){Bt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),vN)}}function bn(e){const t=e.name;if(yn.has(t))return Bt.debug("There were multiple attempts to register component ".concat(t,".")),!1;yn.set(t,e);for(const n of gn.values())vn(n,e);return!0}function xn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const wn=new $e("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ot("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}const Nn="9.23.0";function Sn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:pn,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw wn.create("bad-app-name",{appName:String(s)});if(n||(n=qe()),!n)throw wn.create("no-options");const i=gn.get(s);if(i){if(Ze(n,i.options)&&Ze(r,i.config))return i;throw wn.create("duplicate-app",{appName:s})}const a=new ut(s);for(const l of yn.values())a.addComponent(l);const o=new kn(n,r,a);return gn.set(s,o),o}function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn;const t=gn.get(e);if(!t&&e===pn&&qe())return Sn();if(!t)throw wn.create("no-app",{appName:e});return t}function In(e,t,n){var r;let s=null!==(r=mn[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Bt.warn(e.join(" "))}bn(new ot("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const _n="firebase-heartbeat-store";let Tn=null;function Cn(){return Tn||(Tn=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Rt(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Rt(a.result),e.oldVersion,e.newVersion,Rt(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(_n)}}).catch(e=>{throw wn.create("idb-open",{originalErrorMessage:e.message})})),Tn}async function jn(e,t){try{const n=(await Cn()).transaction(_n,"readwrite"),r=n.objectStore(_n);await r.put(t,An(e)),await n.done}catch(vN){if(vN instanceof Ye)Bt.warn(vN.message);else{const t=wn.create("idb-set",{originalErrorMessage:null===vN||void 0===vN?void 0:vN.message});Bt.warn(t.message)}}}function An(e){return"".concat(e.name,"!").concat(e.options.appId)}class Dn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Rn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Rn(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),On(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),On(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Me(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Rn(){return(new Date).toISOString().substring(0,10)}class Pn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Xe()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Cn();return await t.transaction(_n).objectStore(_n).get(An(e))}catch(vN){if(vN instanceof Ye)Bt.warn(vN.message);else{const t=wn.create("idb-get",{originalErrorMessage:null===vN||void 0===vN?void 0:vN.message});Bt.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function On(e){return Me(JSON.stringify({version:2,heartbeats:e})).length}var Ln;Ln="",bn(new ot("platform-logger",e=>new Ut(e),"PRIVATE")),bn(new ot("heartbeat",e=>new Dn(e),"PRIVATE")),In(Vt,zt,Ln),In(Vt,zt,"esm2017"),In("fire-js","");function Mn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Fn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Un=Fn,Vn=new $e("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),zn=new yt("@firebase/auth");function Bn(e){if(zn.logLevel<=dt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zn.error("Auth (".concat(Nn,"): ").concat(e),...n)}}function qn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Gn(e,...n)}function Kn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gn(e,...n)}function Hn(e,t,n){const r=Object.assign(Object.assign({},Un()),{[t]:n});return new $e("auth","Firebase",r).create(t,{appName:e.name})}function Gn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Vn.create(e,...n)}function Wn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Gn(t,...r)}}function Qn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Bn(t),new Error(t)}function Xn(e,t){e||Qn(t)}function Yn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function $n(){return"http:"===Jn()||"https:"===Jn()}function Jn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Zn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&($n()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class er{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Zn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tr(e,t){Xn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class nr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},sr=new er(3e4,6e4);function ir(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ar(e,t,n,r){return or(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=tt(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),nr.fetch()(cr(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},s))})}async function or(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},rr),t);try{const t=new ur(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw hr(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw hr(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw hr(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw hr(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Hn(e,o,a);qn(e,o)}}catch(vN){if(vN instanceof Ye)throw vN;qn(e,"network-request-failed",{message:String(vN)})}}async function lr(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await ar(e,t,n,r,s);return"mfaPendingCredential"in i&&qn(e,"multi-factor-auth-required",{_serverResponse:i}),i}function cr(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?tr(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}class ur{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Kn(this.auth,"network-request-failed")),sr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Kn(e,t,r);return s.customData._tokenResponse=n,s}function dr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(vN){}}function fr(e){return 1e3*Number(e)}function pr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Bn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Fe(n);return e?JSON.parse(e):(Bn("Failed to decode base64 JWT payload"),null)}catch(vN){return Bn("Caught error parsing JWT payload as JSON",null===vN||void 0===vN?void 0:vN.toString()),null}}async function mr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(vN){throw vN instanceof Ye&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(vN)&&e.auth.currentUser===e&&await e.auth.signOut(),vN}}class gr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(vN){return void((null===vN||void 0===vN?void 0:vN.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class yr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dr(this.lastLoginAt),this.creationTime=dr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vr(e){var t;const n=e.auth,r=await e.getIdToken(),s=await mr(e,async function(e,t){return ar(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Wn(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map(e=>{var{providerId:t}=e,n=Mn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),d=!!u&&h,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yr(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class br{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Wn(e.idToken,"internal-error"),Wn("undefined"!==typeof e.idToken,"internal-error"),Wn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=pr(e);return Wn(t,"internal-error"),Wn("undefined"!==typeof t.exp,"internal-error"),Wn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Wn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await or(e,{},async()=>{const n=tt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=cr(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nr.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new br;return n&&(Wn("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Wn("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Wn("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new br,this.toJSON())}_performRefresh(){return Qn("not implemented")}}function xr(e,t){Wn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class wr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=Mn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new yr(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await mr(this,this.stsTokenManager.getToken(this.auth,e));return Wn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=at(e),r=await n.getIdToken(t),s=pr(r);Wn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:dr(fr(s.auth_time)),issuedAtTime:dr(fr(s.iat)),expirationTime:dr(fr(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=at(e);await vr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Wn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Wn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await mr(this,async function(e,t){return ar(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:k}=t;Wn(v&&k,e,"internal-error");const N=br.fromJSON(this.name,k);Wn("string"===typeof v,e,"internal-error"),xr(u,e.name),xr(h,e.name),Wn("boolean"===typeof b,e,"internal-error"),Wn("boolean"===typeof x,e,"internal-error"),xr(d,e.name),xr(f,e.name),xr(p,e.name),xr(m,e.name),xr(g,e.name),xr(y,e.name);const S=new wr({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:N,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(S.providerData=w.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new br;r.updateFromServerResponse(t);const s=new wr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await vr(s),s}}const kr=new Map;function Nr(e){Xn(e instanceof Function,"Expected a class definition");let t=kr.get(e);return t?(Xn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,kr.set(e,t),t)}class Sr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sr.type="NONE";const Er=Sr;function Ir(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class _r{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Ir(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ir("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new _r(Nr(Er),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Nr(Er);const i=Ir(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=wr._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new _r(s,e,n)):new _r(s,e,n)}}function Tr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Dr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Cr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Pr(t))return"Blackberry";if(Or(t))return"Webos";if(jr(t))return"Safari";if((t.includes("chrome/")||Ar(t))&&!t.includes("edge/"))return"Chrome";if(Rr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Cr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/firefox\//i.test(e)}function jr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:We()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/crios\//i.test(e)}function Dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/iemobile/i.test(e)}function Rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/android/i.test(e)}function Pr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/blackberry/i.test(e)}function Or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/webos/i.test(e)}function Lr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Mr(){return function(){const e=We();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Fr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return Lr(e)||Rr(e)||Or(e)||Pr(e)||/windows phone/i.test(e)||Dr(e)}function Ur(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Tr(We());break;case"Worker":t="".concat(Tr(We()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Nn,"/").concat(r)}async function Vr(e,t){return ar(e,"GET","/v2/recaptchaConfig",ir(e,t))}function zr(e){return void 0!==e&&void 0!==e.enterprise}class Br{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function qr(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Kn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function Kr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Hr{constructor(e){this.type="recaptcha-enterprise",this.auth=Xr(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;zr(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Vr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Br(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&zr(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));qr("https://www.google.com/recaptcha/enterprise.js?render="+s).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Gr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new Hr(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class Wr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(vN){r(vN)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(vN){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===vN||void 0===vN?void 0:vN.message})}}}class Qr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yr(this),this.idTokenSubscription=new Yr(this),this.beforeStateQueue=new Wr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nr(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await _r.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(vN){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(vN){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(vN))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Wn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(vN){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vr(e)}catch(vN){if((null===vN||void 0===vN?void 0:vN.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?at(e):null;return t&&Wn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Wn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Nr(e))})}async initializeRecaptchaConfig(){const e=await Vr(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Br(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Hr(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $e("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Nr(e)||this._popupRedirectResolver;Wn(t,this,"argument-error"),this.redirectPersistenceManager=await _r.create(this,[Nr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t),i=this._isInitialized?Promise.resolve():this._initializationPromise;return Wn(i,this,"internal-error"),i.then(()=>s(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Wn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ur(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(zn.logLevel<=dt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zn.warn("Auth (".concat(Nn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Xr(e){return at(e)}class Yr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new st(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Wn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $r(e,t,n){const r=Xr(e);Wn(r._canInitEmulator,r,"emulator-config-failed"),Wn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Jr(t),{host:a,port:o}=function(e){const t=Jr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Zr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Zr(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Jr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Zr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class es{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,t){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}async function ts(e,t){return ar(e,"POST","/v1/accounts:update",t)}async function ns(e,t){return lr(e,"POST","/v1/accounts:signInWithPassword",ir(e,t))}class rs extends es{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new rs(e,t,"password")}static _fromEmailAndCode(e,t){return new rs(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Gr(e,n,"signInWithPassword");return ns(e,t)}return ns(e,n).catch(async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Gr(e,n,"signInWithPassword");return ns(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return lr(e,"POST","/v1/accounts:signInWithEmailLink",ir(e,t))}(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ts(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return lr(e,"POST","/v1/accounts:signInWithEmailLink",ir(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ss(e,t){return lr(e,"POST","/v1/accounts:signInWithIdp",ir(e,t))}class is extends es{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=Mn(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new is(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return ss(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ss(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ss(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tt(t)}return e}}const as={USER_NOT_FOUND:"user-not-found"};class os extends es{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new os({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new os({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return lr(e,"POST","/v1/accounts:signInWithPhoneNumber",ir(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await lr(e,"POST","/v1/accounts:signInWithPhoneNumber",ir(e,t));if(n.temporaryProof)throw hr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return lr(e,"POST","/v1/accounts:signInWithPhoneNumber",ir(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),as)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new os({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class ls{constructor(e){var t,n,r,s,i,a;const o=nt(rt(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Wn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=nt(rt(e)).link,n=t?nt(rt(t)).deep_link_id:null,r=nt(rt(e)).deep_link_id;return(r?nt(rt(r)).link:null)||r||n||t||e}(e);try{return new ls(t)}catch(n){return null}}}class cs{constructor(){this.providerId=cs.PROVIDER_ID}static credential(e,t){return rs._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ls.parseLink(t);return Wn(n,"argument-error"),rs._fromEmailAndCode(e,n.code,n.tenantId)}}cs.PROVIDER_ID="password",cs.EMAIL_PASSWORD_SIGN_IN_METHOD="password",cs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class us{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class hs extends us{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ds extends hs{constructor(){super("facebook.com")}static credential(e){return is._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ds.credential(t.oauthAccessToken)}catch(n){return null}}}ds.FACEBOOK_SIGN_IN_METHOD="facebook.com",ds.PROVIDER_ID="facebook.com";class fs extends hs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return is._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return fs.credential(n,r)}catch(s){return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com",fs.PROVIDER_ID="google.com";class ps extends hs{constructor(){super("github.com")}static credential(e){return is._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ps.credential(t.oauthAccessToken)}catch(n){return null}}}ps.GITHUB_SIGN_IN_METHOD="github.com",ps.PROVIDER_ID="github.com";class ms extends hs{constructor(){super("twitter.com")}static credential(e,t){return is._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ms.credential(n,r)}catch(s){return null}}}async function gs(e,t){return lr(e,"POST","/v1/accounts:signUp",ir(e,t))}ms.TWITTER_SIGN_IN_METHOD="twitter.com",ms.PROVIDER_ID="twitter.com";class ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await wr._fromIdTokenResponse(e,n,r),i=vs(n);return new ys({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=vs(n);return new ys({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function vs(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class bs extends Ye{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,bs.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new bs(e,t,n,r)}}function xs(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw bs._fromErrorAndOperation(e,n,t,r);throw n})}async function ws(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await mr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ys._forOperation(e,"link",r)}async function ks(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,s="reauthenticate";try{const i=await mr(e,xs(r,s,t,e),n);Wn(i.idToken,r,"internal-error");const a=pr(i.idToken);Wn(a,r,"internal-error");const{sub:o}=a;return Wn(e.uid===o,r,"user-mismatch"),ys._forOperation(e,s,i)}catch(vN){throw(null===vN||void 0===vN?void 0:vN.code)==="auth/".concat("user-not-found")&&qn(r,"user-mismatch"),vN}}async function Ns(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",s=await xs(e,r,t),i=await ys._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function Ss(e,t){return Ns(Xr(e),t)}async function Es(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=at(e),i={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await mr(s,async function(e,t){return ar(e,"POST","/v1/accounts:update",t)}(s.auth,i));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const o=s.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}new WeakMap;const Is="__sak";class _s{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Is,"1"),this.storage.removeItem(Is),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ts extends _s{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=We();return jr(e)||Lr(e)}()&&function(){try{return!(!window||window===window.top)}catch(vN){return!1}}(),this.fallbackToPolling=Fr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Mr()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ts.type="LOCAL";const Cs=Ts;class js extends _s{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}js.type="SESSION";const As=js;class Ds{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ds(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Rs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ds.receivers=[];class Ps{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Rs("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Os(){return window}function Ls(){return"undefined"!==typeof Os().WorkerGlobalScope&&"function"===typeof Os().importScripts}const Ms="firebaseLocalStorageDb",Fs="firebaseLocalStorage",Us="fbase_key";class Vs{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zs(e,t){return e.transaction([Fs],t?"readwrite":"readonly").objectStore(Fs)}function Bs(){const e=indexedDB.open(Ms,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Fs,{keyPath:Us})}catch(vN){n(vN)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Fs)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ms);return new Vs(e).toPromise()}(),t(await Bs()))})})}async function qs(e,t,n){const r=zs(e,!0).put({[Us]:t,value:n});return new Vs(r).toPromise()}function Ks(e,t){const n=zs(e,!0).delete(t);return new Vs(n).toPromise()}class Hs{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Bs()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(vN){if(t++>3)throw vN;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ls()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ds._getInstance(Ls()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ps(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bs();return await qs(e,Is,"1"),await Ks(e,Is),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>qs(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=zs(e,!1).get(t),r=await new Vs(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ks(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=zs(e,!1).getAll();return new Vs(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Hs.type="LOCAL";const Gs=Hs;Kr("rcb"),new er(3e4,6e4);const Ws="recaptcha";async function Qs(e,t,n){var r;const s=await n.verify();try{let i;if(Wn("string"===typeof s,e,"argument-error"),Wn(n.type===Ws,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Wn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ar(e,"POST","/v2/accounts/mfaEnrollment:start",ir(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Wn("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Wn(n,e,"missing-multi-factor-info");const a=await function(e,t){return ar(e,"POST","/v2/accounts/mfaSignIn:start",ir(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ar(e,"POST","/v1/accounts:sendVerificationCode",ir(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class Xs{constructor(e){this.providerId=Xs.PROVIDER_ID,this.auth=Xr(e)}verifyPhoneNumber(e,t){return Qs(this.auth,e,at(t))}static credential(e,t){return os._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Xs.credentialFromTaggedObject(t)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?os._fromTokenResponse(n,r):null}}function Ys(e,t){return t?Nr(t):(Wn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Xs.PROVIDER_ID="phone",Xs.PHONE_SIGN_IN_METHOD="phone";class $s extends es{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ss(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ss(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ss(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Js(e){return Ns(e.auth,new $s(e),e.bypassAuthState)}function Zs(e){const{auth:t,user:n}=e;return Wn(n,t,"internal-error"),ks(n,new $s(e),e.bypassAuthState)}async function ei(e){const{auth:t,user:n}=e;return Wn(n,t,"internal-error"),ws(n,new $s(e),e.bypassAuthState)}class ti{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(vN){this.reject(vN)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(vN){this.reject(vN)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Js;case"linkViaPopup":case"linkViaRedirect":return ei;case"reauthViaPopup":case"reauthViaRedirect":return Zs;default:qn(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ni=new er(2e3,1e4);class ri extends ti{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,ri.currentPopupAction&&ri.currentPopupAction.cancel(),ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Wn(e,this.auth,"internal-error"),e}async onExecution(){Xn(1===this.filter.length,"Popup operations only handle one event");const e=Rs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ni.get())};e()}}ri.currentPopupAction=null;const si=new Map;class ii extends ti{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=si.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=li(t),r=oi(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(vN){e=()=>Promise.reject(vN)}si.set(this.auth._key(),e)}return this.bypassAuthState||si.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ai(e,t){si.set(e._key(),t)}function oi(e){return Nr(e._redirectPersistence)}function li(e){return Ir("pendingRedirect",e.config.apiKey,e.name)}async function ci(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Xr(e),s=Ys(r,t),i=new ii(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class ui{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return di(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!di(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Kn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hi(e))}saveEventToCache(e){this.cachedEventUids.add(hi(e)),this.lastProcessedEventTime=Date.now()}}function hi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function di(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const fi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pi=/^https?/;async function mi(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ar(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(gi(r))return}catch(n){}qn(e,"unauthorized-domain")}function gi(e){const t=Yn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!pi.test(n))return!1;if(fi.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const yi=new er(3e4,6e4);function vi(){const e=Os().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let bi=null;function xi(e){return bi=bi||function(e){return new Promise((t,n)=>{var r,s,i;function a(){vi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vi(),n(Kn(e,"network-request-failed"))},timeout:yi.get()})}if(null===(s=null===(r=Os().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Os().gapi)||void 0===i?void 0:i.load)){const t=Kr("iframefcb");return Os()[t]=()=>{gapi.load?a():n(Kn(e,"network-request-failed"))},qr("https://apis.google.com/js/api.js?onload=".concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw bi=null,e})}(e),bi}const wi=new er(5e3,15e3),ki={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ni=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Si(e){const t=e.config;Wn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?tr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Nn},s=Ni.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(tt(r).slice(1))}const Ei={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ii{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(vN){}}}function _i(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Ei),{width:r.toString(),height:s.toString(),top:i,left:a}),c=We().toLowerCase();n&&(o=Ar(c)?"_blank":n),Cr(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Lr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:We())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Ii(null);const h=window.open(t||"",o,u);Wn(h,e,"popup-blocked");try{h.focus()}catch(vN){}return new Ii(h)}const Ti="__/auth/handler",Ci="emulator/auth/handler",ji=encodeURIComponent("fac");async function Ai(e,t,n,r,s,i){Wn(e.config.authDomain,e,"auth-domain-config-required"),Wn(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Nn,eventId:s};if(t instanceof us){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof hs){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ji,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ti);return tr(t,Ci)}(e),"?").concat(tt(o).slice(1)).concat(c)}const Di="webStorageSupport";const Ri=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=As,this._completeRedirectFn=ci,this._overrideRedirectResult=ai}async _openPopup(e,t,n,r){var s;Xn(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return _i(e,await Ai(e,t,n,Yn(),r),Rs())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Os().location.href=e}(await Ai(e,t,n,Yn(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Xn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await xi(e),n=Os().gapi;return Wn(n,e,"internal-error"),t.open({where:document.body,url:Si(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ki,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Kn(e,"network-request-failed"),i=Os().setTimeout(()=>{r(s)},wi.get());function a(){Os().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}(e),n=new ui(e);return t.register("authEvent",t=>{Wn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Di,{type:Di},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Di];void 0!==s&&t(!!s),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mi(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fr()||jr()||Lr()}};var Pi="@firebase/auth",Oi="0.23.2";class Li{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Wn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Mi=Ke("authIdTokenMaxAge")||300;let Fi=null;var Ui;Ui="Browser",bn(new ot("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Wn(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Ui,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ur(Ui)},c=new Qr(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),bn(new ot("auth-internal",e=>(e=>new Li(e))(Xr(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),In(Pi,Oi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ui)),In(Pi,Oi,"esm2017");In("firebase","9.23.0","app");var Vi,zi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Bi={},qi=qi||{},Ki=zi||self;function Hi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Gi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Wi="closure_uid_"+(1e9*Math.random()>>>0),Qi=0;function Xi(e,t,n){return e.call.apply(e.bind,arguments)}function Yi(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $i(e,t,n){return($i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xi:Yi).apply(null,arguments)}function Ji(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Zi(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function ea(){this.s=this.s,this.o=this.o}ea.prototype.s=!1,ea.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Wi)&&e[Wi]||(e[Wi]=++Qi))},ea.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ta=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function na(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ra(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Hi(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function sa(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}sa.prototype.h=function(){this.defaultPrevented=!0};var ia=function(){if(!Ki.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ki.addEventListener("test",()=>{},t),Ki.removeEventListener("test",()=>{},t)}catch(n){}return e}();function aa(e){return/^[\s\xa0]*$/.test(e)}function oa(){var e=Ki.navigator;return e&&(e=e.userAgent)?e:""}function la(e){return-1!=oa().indexOf(e)}function ca(e){return ca[" "](e),e}ca[" "]=function(){};var ua,ha,da=la("Opera"),fa=la("Trident")||la("MSIE"),pa=la("Edge"),ma=pa||fa,ga=la("Gecko")&&!(-1!=oa().toLowerCase().indexOf("webkit")&&!la("Edge"))&&!(la("Trident")||la("MSIE"))&&!la("Edge"),ya=-1!=oa().toLowerCase().indexOf("webkit")&&!la("Edge");function va(){var e=Ki.document;return e?e.documentMode:void 0}e:{var ba="",xa=function(){var e=oa();return ga?/rv:([^\);]+)(\)|;)/.exec(e):pa?/Edge\/([\d\.]+)/.exec(e):fa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ya?/WebKit\/(\S+)/.exec(e):da?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(xa&&(ba=xa?xa[1]:""),fa){var wa=va();if(null!=wa&&wa>parseFloat(ba)){ua=String(wa);break e}}ua=ba}if(Ki.document&&fa){var ka=va();ha=ka||(parseInt(ua,10)||void 0)}else ha=void 0;var Na=ha;function Sa(e,t){if(sa.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ga){e:{try{ca(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ea[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Sa.$.h.call(this)}}Zi(Sa,sa);var Ea={2:"touch",3:"pen",4:"mouse"};Sa.prototype.h=function(){Sa.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ia="closure_listenable_"+(1e6*Math.random()|0),_a=0;function Ta(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++_a,this.fa=this.ia=!1}function Ca(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ja(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Aa(e){const t={};for(const n in e)t[n]=e[n];return t}const Da="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ra(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<Da.length;t++)n=Da[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Pa(e){this.src=e,this.g={},this.h=0}function Oa(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=ta(s,t);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(Ca(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function La(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}Pa.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=La(e,t,r,s);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new Ta(t,this.src,i,!!r,s)).ia=n,e.push(t)),t};var Ma="closure_lm_"+(1e6*Math.random()|0),Fa={};function Ua(e,t,n,r,s){if(r&&r.once)return za(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Ua(e,t[i],n,r,s);return null}return n=Qa(n),e&&e[Ia]?e.O(t,n,Gi(r)?!!r.capture:!!r,s):Va(e,t,n,!1,r,s)}function Va(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var a=Gi(s)?!!s.capture:!!s,o=Ga(e);if(o||(e[Ma]=o=new Pa(e)),(n=o.add(t,n,r,a,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Ha;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ia||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Ka(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function za(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)za(e,t[i],n,r,s);return null}return n=Qa(n),e&&e[Ia]?e.P(t,n,Gi(r)?!!r.capture:!!r,s):Va(e,t,n,!0,r,s)}function Ba(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Ba(e,t[i],n,r,s);else r=Gi(r)?!!r.capture:!!r,n=Qa(n),e&&e[Ia]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=La(i=e.g[t],n,r,s))&&(Ca(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Ga(e))&&(t=e.g[t.toString()],e=-1,t&&(e=La(t,n,r,s)),(n=-1<e?t[e]:null)&&qa(n))}function qa(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ia])Oa(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ka(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ga(t))?(Oa(n,e),0==n.h&&(n.src=null,t[Ma]=null)):Ca(e)}}}function Ka(e){return e in Fa?Fa[e]:Fa[e]="on"+e}function Ha(e,t){if(e.fa)e=!0;else{t=new Sa(t,this);var n=e.listener,r=e.la||e.src;e.ia&&qa(e),e=n.call(r,t)}return e}function Ga(e){return(e=e[Ma])instanceof Pa?e:null}var Wa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qa(e){return"function"===typeof e?e:(e[Wa]||(e[Wa]=function(t){return e.handleEvent(t)}),e[Wa])}function Xa(){ea.call(this),this.i=new Pa(this),this.S=this,this.J=null}function Ya(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new sa(t,e);else if(t instanceof sa)t.target=t.target||e;else{var s=t;Ra(t=new sa(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=$a(a,r,!0,t)&&s}if(s=$a(a=t.g=e,r,!0,t)&&s,s=$a(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=$a(a=t.g=n[i],r,!1,t)&&s}function $a(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.fa&&a.capture==n){var o=a.listener,l=a.la||a.src;a.ia&&Oa(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}Zi(Xa,ea),Xa.prototype[Ia]=!0,Xa.prototype.removeEventListener=function(e,t,n,r){Ba(this,e,t,n,r)},Xa.prototype.N=function(){if(Xa.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ca(n[r]);delete t.g[e],t.h--}}this.J=null},Xa.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Xa.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ja=Ki.JSON.stringify;function Za(){var e=ao;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var eo=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new to,e=>e.reset());class to{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function no(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ro(e){Ki.setTimeout(()=>{throw e},0)}let so,io=!1,ao=new class{constructor(){this.h=this.g=null}add(e,t){const n=eo.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},oo=()=>{const e=Ki.Promise.resolve(void 0);so=()=>{e.then(lo)}};var lo=()=>{for(var e;e=Za();){try{e.h.call(e.g)}catch(n){ro(n)}var t=eo;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}io=!1};function co(e,t){Xa.call(this),this.h=e||1,this.g=t||Ki,this.j=$i(this.qb,this),this.l=Date.now()}function uo(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ho(e,t,n){if("function"===typeof e)n&&(e=$i(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$i(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ki.setTimeout(e,t||0)}function fo(e){e.g=ho(()=>{e.g=null,e.i&&(e.i=!1,fo(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Zi(co,Xa),(Vi=co.prototype).ga=!1,Vi.T=null,Vi.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ya(this,"tick"),this.ga&&(uo(this),this.start()))}},Vi.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vi.N=function(){co.$.N.call(this),uo(this),delete this.g};class po extends ea{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fo(this)}N(){super.N(),this.g&&(Ki.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mo(e){ea.call(this),this.h=e,this.g={}}Zi(mo,ea);var go=[];function yo(e,t,n,r){Array.isArray(n)||(n&&(go[0]=n.toString()),n=go);for(var s=0;s<n.length;s++){var i=Ua(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function vo(e){ja(e.g,function(e,t){this.g.hasOwnProperty(t)&&qa(e)},e),e.g={}}function bo(){this.g=!0}function xo(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return Ja(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}mo.prototype.N=function(){mo.$.N.call(this),vo(this)},mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bo.prototype.Ea=function(){this.g=!1},bo.prototype.info=function(){};var wo={},ko=null;function No(){return ko=ko||new Xa}function So(e){sa.call(this,wo.Ta,e)}function Eo(e){const t=No();Ya(t,new So(t))}function Io(e,t){sa.call(this,wo.STAT_EVENT,e),this.stat=t}function _o(e){const t=No();Ya(t,new Io(t,e))}function To(e,t){sa.call(this,wo.Ua,e),this.size=t}function Co(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ki.setTimeout(function(){e()},t)}wo.Ta="serverreachability",Zi(So,sa),wo.STAT_EVENT="statevent",Zi(Io,sa),wo.Ua="timingevent",Zi(To,sa);var jo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ao={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Do(){}function Ro(e){return e.h||(e.h=e.i())}function Po(){}Do.prototype.h=null;var Oo,Lo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Mo(){sa.call(this,"d")}function Fo(){sa.call(this,"c")}function Uo(){}function Vo(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new mo(this),this.P=Bo,e=ma?125:void 0,this.V=new co(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new zo}function zo(){this.i=null,this.g="",this.h=!1}Zi(Mo,sa),Zi(Fo,sa),Zi(Uo,Do),Uo.prototype.g=function(){return new XMLHttpRequest},Uo.prototype.i=function(){return{}},Oo=new Uo;var Bo=45e3,qo={},Ko={};function Ho(e,t,n){e.L=1,e.v=ul(il(t)),e.s=n,e.S=!0,Go(e,null)}function Go(e,t){e.G=Date.now(),Yo(e),e.A=il(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Nl(n.i,"t",r),e.C=0,n=e.l.J,e.h=new zo,e.g=Sc(e.l,n?t:null,!e.s),0<e.O&&(e.M=new po($i(e.Pa,e,e.g),e.O)),yo(e.U,e.g,"readystatechange",e.nb),t=e.I?Aa(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Eo(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.j,e.u,e.A,e.m,e.W,e.s)}function Wo(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Qo(e,t,n){let r,s=!0;for(;!e.J&&e.C<n.length;){if(r=Xo(e,n),r==Ko){4==t&&(e.o=4,_o(14),s=!1),xo(e.j,e.m,null,"[Incomplete Response]");break}if(r==qo){e.o=4,_o(15),xo(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}xo(e.j,e.m,r,null),tl(e,r)}Wo(e)&&r!=Ko&&r!=qo&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,_o(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),gc(t),t.M=!0,_o(11))):(xo(e.j,e.m,n,"[Invalid Chunked Response]"),el(e),Zo(e))}function Xo(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ko:(n=Number(t.substring(n,r)),isNaN(n)?qo:(r+=1)+n>t.length?Ko:(t=t.slice(r,r+n),e.C=r+n,t))}function Yo(e){e.Y=Date.now()+e.P,$o(e,e.P)}function $o(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Co($i(e.lb,e),t)}function Jo(e){e.B&&(Ki.clearTimeout(e.B),e.B=null)}function Zo(e){0==e.l.H||e.J||bc(e.l,e)}function el(e){Jo(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,uo(e.V),vo(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function tl(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||jl(n.i,e)))if(!e.K&&jl(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;vc(n),lc(n)}mc(n),_o(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&0==n.A&&!n.v&&(n.v=Co($i(n.ib,n),6e3));if(1>=Cl(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else wc(n,11)}else if((e.K||n.g==e)&&vc(n),!aa(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const s=c[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.i;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Al(i,i.h),i.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,cl(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=Nc(r,r.J?r.pa:null,r.Y),a.K){Dl(r.i,a);var o=a,l=r.L;l&&o.setTimeout(l),o.B&&(Jo(o),Yo(o)),r.g=a}else pc(r);0<n.j.length&&uc(n)}else"stop"!=c[0]&&"close"!=c[0]||wc(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?wc(n,7):oc(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Eo()}catch(c){}}function nl(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Hi(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Hi(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Hi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}(Vi=Vo.prototype).setTimeout=function(e){this.P=e},Vi.nb=function(e){e=e.target;const t=this.M;t&&3==tc(e)?t.l():this.Pa(e)},Vi.Pa=function(e){try{if(e==this.g)e:{const u=tc(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||ma||this.g&&(this.h.h||this.g.ja()||nc(this.g)))){this.J||4!=u||7==t||Eo(),Jo(this);var n=this.g.da();this.ca=n;t:if(Wo(this)){var r=nc(this.g);e="";var s=r.length,i=4==tc(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){el(this),Zo(this);var a="";break t}this.h.i=new Ki.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.splice(0,s),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!aa(o)){var c=o;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,_o(12),el(this),Zo(this);break e}xo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tl(this,n)}this.S?(Qo(this,u,a),ma&&this.i&&3==u&&(yo(this.U,this.V,"tick",this.mb),this.V.start())):(xo(this.j,this.m,a,null),tl(this,a)),4==u&&el(this),this.i&&!this.J&&(4==u?bc(this.l,this):(this.i=!1,Yo(this)))}else(function(e){const t={};e=(e.g&&2<=tc(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(aa(e[r]))continue;var n=no(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.o=3,_o(12)):(this.o=0,_o(13)),el(this),Zo(this)}}}catch(u){}},Vi.mb=function(){if(this.g){var e=tc(this.g),t=this.g.ja();this.C<t.length&&(Jo(this),Qo(this,e,t),this.i&&4!=e&&Yo(this))}},Vi.cancel=function(){this.J=!0,el(this)},Vi.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Eo(),_o(17)),el(this),this.o=2,Zo(this)):$o(this,this.Y-e)};var rl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sl(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof sl){this.h=e.h,al(this,e.j),this.s=e.s,this.g=e.g,ol(this,e.m),this.l=e.l;var t=e.i,n=new bl;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ll(this,n),this.o=e.o}else e&&(t=String(e).match(rl))?(this.h=!1,al(this,t[1]||"",!0),this.s=hl(t[2]||""),this.g=hl(t[3]||"",!0),ol(this,t[4]),this.l=hl(t[5]||"",!0),ll(this,t[6]||"",!0),this.o=hl(t[7]||"")):(this.h=!1,this.i=new bl(null,this.h))}function il(e){return new sl(e)}function al(e,t,n){e.j=n?hl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ol(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ll(e,t,n){t instanceof bl?(e.i=t,function(e,t){t&&!e.j&&(xl(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(wl(this,t),Nl(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=dl(t,yl)),e.i=new bl(t,e.h))}function cl(e,t,n){e.i.set(t,n)}function ul(e){return cl(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dl(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,fl),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function fl(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}sl.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dl(t,pl,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(dl(t,pl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(dl(n,"/"==n.charAt(0)?gl:ml,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",dl(n,vl)),e.join("")};var pl=/[#\/\?@]/g,ml=/[#\?:]/g,gl=/[#\?]/g,yl=/[#\?@]/g,vl=/#/g;function bl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xl(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function wl(e,t){xl(e),t=Sl(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kl(e,t){return xl(e),t=Sl(e,t),e.g.has(t)}function Nl(e,t,n){wl(e,t),0<n.length&&(e.i=null,e.g.set(Sl(e,t),na(n)),e.h+=n.length)}function Sl(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Vi=bl.prototype).add=function(e,t){xl(this),this.i=null,e=Sl(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Vi.forEach=function(e,t){xl(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},Vi.ta=function(){xl(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},Vi.Z=function(e){xl(this);let t=[];if("string"===typeof e)kl(this,e)&&(t=t.concat(this.g.get(Sl(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Vi.set=function(e,t){return xl(this),this.i=null,kl(this,e=Sl(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Vi.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Vi.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")};var El=class{constructor(e,t){this.g=e,this.map=t}};function Il(e){this.l=e||_l,Ki.PerformanceNavigationTiming?e=0<(e=Ki.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ki.g&&Ki.g.Ka&&Ki.g.Ka()&&Ki.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _l=10;function Tl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Cl(e){return e.h?1:e.g?e.g.size:0}function jl(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Al(e,t){e.g?e.g.add(t):e.h=t}function Dl(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Rl(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return na(e.i)}Il.prototype.cancel=function(){if(this.i=Rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Pl,Ol=class{stringify(e){return Ki.JSON.stringify(e,void 0)}parse(e){return Ki.JSON.parse(e,void 0)}};function Ll(){this.g=new Ol}function Ml(e,t,n){const r=n||"";try{nl(e,function(e,n){let s=e;Gi(e)&&(s=Ja(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(vN){throw t.push(r+"type="+encodeURIComponent("_badmap")),vN}}function Fl(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch(i){}}function Ul(e){this.l=e.fc||null,this.j=e.ob||!1}function Vl(e,t){Xa.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=zl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zi(Ul,Do),Ul.prototype.g=function(){return new Vl(this.l,this.j)},Ul.prototype.i=(Pl={},function(){return Pl}),Zi(Vl,Xa);var zl=0;function Bl(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ql(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Kl(e)}function Kl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Vi=Vl.prototype).open=function(e,t){if(this.readyState!=zl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Kl(this)},Vi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Ki).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Vi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ql(this)),this.readyState=zl},Vi.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kl(this)),this.g&&(this.readyState=3,Kl(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Ki.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bl(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Vi.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ql(this):Kl(this),3==this.readyState&&Bl(this)}},Vi.Za=function(e){this.g&&(this.response=this.responseText=e,ql(this))},Vi.Ya=function(e){this.g&&(this.response=e,ql(this))},Vi.ka=function(){this.g&&ql(this)},Vi.setRequestHeader=function(e,t){this.v.append(e,t)},Vi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Vi.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Hl=Ki.JSON.parse;function Gl(e){Xa.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Wl,this.L=this.M=!1}Zi(Gl,Xa);var Wl="",Ql=/^https?$/i,Xl=["POST","PUT"];function Yl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$l(e),Zl(e)}function $l(e){e.F||(e.F=!0,Ya(e,"complete"),Ya(e,"error"))}function Jl(e){if(e.h&&"undefined"!=typeof qi&&(!e.C[1]||4!=tc(e)||2!=e.da()))if(e.v&&4==tc(e))ho(e.La,0,e);else if(Ya(e,"readystatechange"),4==tc(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var s=String(e.I).match(rl)[1]||null;!s&&Ki.self&&Ki.self.location&&(s=Ki.self.location.protocol.slice(0,-1)),r=!Ql.test(s?s.toLowerCase():"")}n=r}if(n)Ya(e,"complete"),Ya(e,"success");else{e.m=6;try{var i=2<tc(e)?e.g.statusText:""}catch(a){i=""}e.j=i+" ["+e.da()+"]",$l(e)}}finally{Zl(e)}}}function Zl(e,t){if(e.g){ec(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ya(e,"ready");try{n.onreadystatechange=r}catch(vN){}}}function ec(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Ki.clearTimeout(e.A),e.A=null)}function tc(e){return e.g?e.g.readyState:0}function nc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Wl:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ou){return null}}function rc(e){let t="";return ja(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function sc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=rc(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):cl(e,t,n))}function ic(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ac(e){this.Ga=0,this.j=[],this.l=new bo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ic("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ic("baseRetryDelayMs",5e3,e),this.hb=ic("retryDelaySeedMs",1e4,e),this.eb=ic("forwardChannelMaxRetries",2,e),this.xa=ic("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Il(e&&e.concurrentRequestLimit),this.Ja=new Ll,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function oc(e){if(cc(e),3==e.H){var t=e.W++,n=il(e.I);if(cl(n,"SID",e.K),cl(n,"RID",t),cl(n,"TYPE","terminate"),dc(e,n),(t=new Vo(e,e.l,t)).L=2,t.v=ul(il(n)),n=!1,Ki.navigator&&Ki.navigator.sendBeacon)try{n=Ki.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Ki.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sc(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Yo(t)}kc(e)}function lc(e){e.g&&(gc(e),e.g.cancel(),e.g=null)}function cc(e){lc(e),e.u&&(Ki.clearTimeout(e.u),e.u=null),vc(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ki.clearTimeout(e.m),e.m=null)}function uc(e){if(!Tl(e.i)&&!e.m){e.m=!0;var t=e.Na;so||oo(),io||(so(),io=!0),ao.add(t,e),e.C=0}}function hc(e,t){var n;n=t?t.m:e.W++;const r=il(e.I);cl(r,"SID",e.K),cl(r,"RID",n),cl(r,"AID",e.V),dc(e,r),e.o&&e.s&&sc(r,e.o,e.s),n=new Vo(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=fc(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Al(e.i,n),Ho(n,r,t)}function dc(e,t){e.na&&ja(e.na,function(e,n){cl(t,n,e)}),e.h&&nl({},function(e,n){cl(t,n,e)})}function fc(e,t,n){n=Math.min(e.j.length,n);var r=e.h?$i(e.h.Va,e.h,e):null;e:{var s=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{Ml(o,e,"req"+n+"_")}catch(vu){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function pc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;so||oo(),io||(so(),io=!0),ao.add(t,e),e.A=0}}function mc(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Co($i(e.Ma,e),xc(e,e.A)),e.A++,!0)}function gc(e){null!=e.B&&(Ki.clearTimeout(e.B),e.B=null)}function yc(e){e.g=new Vo(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=il(e.wa);cl(t,"RID","rpc"),cl(t,"SID",e.K),cl(t,"AID",e.V),cl(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&cl(t,"TO",e.qa),cl(t,"TYPE","xmlhttp"),dc(e,t),e.o&&e.s&&sc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=ul(il(t)),n.s=null,n.S=!0,Go(n,e)}function vc(e){null!=e.v&&(Ki.clearTimeout(e.v),e.v=null)}function bc(e,t){var n=null;if(e.g==t){vc(e),gc(e),e.g=null;var r=2}else{if(!jl(e.i,t))return;n=t.F,Dl(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;Ya(r=No(),new To(r,n)),uc(e)}else pc(e);else if(3==(s=t.o)||0==s&&0<t.ca||!(1==r&&function(e,t){return!(Cl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Co($i(e.Na,e,t),xc(e,e.C)),e.C++,!0))}(e,t)||2==r&&mc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:wc(e,5);break;case 4:wc(e,10);break;case 3:wc(e,6);break;default:wc(e,2)}}function xc(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function wc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=$i(e.pb,e);n||(n=new sl("//www.google.com/images/cleardot.gif"),Ki.location&&"http"==Ki.location.protocol||al(n,"https"),ul(n)),function(e,t){const n=new bo;if(Ki.Image){const r=new Image;r.onload=Ji(Fl,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ji(Fl,n,r,"TestLoadImage: error",!1,t),r.onabort=Ji(Fl,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ji(Fl,n,r,"TestLoadImage: timeout",!1,t),Ki.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else _o(2);e.H=0,e.h&&e.h.za(t),kc(e),cc(e)}function kc(e){if(e.H=0,e.ma=[],e.h){const t=Rl(e.i);0==t.length&&0==e.j.length||(ra(e.ma,t),ra(e.ma,e.j),e.i.i.length=0,na(e.j),e.j.length=0),e.h.ya()}}function Nc(e,t,n){var r=n instanceof sl?il(n):new sl(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ol(r,r.m);else{var s=Ki.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new sl(null);r&&al(i,r),t&&(i.g=t),s&&ol(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&cl(r,n,t),cl(r,"VER",e.ra),dc(e,r),r}function Sc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Gl(new Ul({ob:!0})):new Gl(e.va)).Oa(e.J),t}function Ec(){}function Ic(){if(fa&&!(10<=Number(Na)))throw Error("Environmental error: no available transport.")}function _c(e,t){Xa.call(this),this.g=new ac(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!aa(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!aa(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new jc(this)}function Tc(e){Mo.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cc(){Fo.call(this),this.status=1}function jc(e){this.g=e}function Ac(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Dc(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function Rc(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}(Vi=Gl.prototype).Oa=function(e){this.M=e},Vi.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Oo.g(),this.C=this.u?Ro(this.u):Ro(Oo),this.g.onreadystatechange=$i(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){return void Yl(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=Ki.FormData&&e instanceof Ki.FormData,!(0<=ta(Xl,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ec(this),0<this.B&&((this.L=function(e){return fa&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$i(this.ua,this)):this.A=ho(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Yl(this,i)}},Vi.ua=function(){"undefined"!=typeof qi&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ya(this,"timeout"),this.abort(8))},Vi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ya(this,"complete"),Ya(this,"abort"),Zl(this))},Vi.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zl(this,!0)),Gl.$.N.call(this)},Vi.La=function(){this.s||(this.G||this.v||this.l?Jl(this):this.kb())},Vi.kb=function(){Jl(this)},Vi.isActive=function(){return!!this.g},Vi.da=function(){try{return 2<tc(this)?this.g.status:-1}catch(Pl){return-1}},Vi.ja=function(){try{return this.g?this.g.responseText:""}catch(Pl){return""}},Vi.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Hl(t)}},Vi.Ia=function(){return this.m},Vi.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Vi=ac.prototype).ra=8,Vi.H=1,Vi.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Vo(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Aa(i),Ra(i,this.U)):i=this.U),null!==this.o||this.O||(s.I=i,i=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=fc(this,s,t),cl(n=il(this.I),"RID",e),cl(n,"CVER",22),this.F&&cl(n,"X-HTTP-Session-Id",this.F),dc(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(rc(i)))+"&"+t:this.o&&sc(n,this.o,i)),Al(this.i,s),this.bb&&cl(n,"TYPE","init"),this.P?(cl(n,"$req",t),cl(n,"SID","null"),s.aa=!0,Ho(s,n,null)):Ho(s,n,t),this.H=2}}else 3==this.H&&(e?hc(this,e):0==this.j.length||Tl(this.i)||hc(this))},Vi.Ma=function(){if(this.u=null,yc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Co($i(this.jb,this),e)}},Vi.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,_o(10),lc(this),yc(this))},Vi.ib=function(){null!=this.v&&(this.v=null,lc(this),mc(this),_o(19))},Vi.pb=function(e){e?(this.l.info("Successfully pinged google.com"),_o(2)):(this.l.info("Failed to ping google.com"),_o(1))},Vi.isActive=function(){return!!this.h&&this.h.isActive(this)},(Vi=Ec.prototype).Ba=function(){},Vi.Aa=function(){},Vi.za=function(){},Vi.ya=function(){},Vi.isActive=function(){return!0},Vi.Va=function(){},Ic.prototype.g=function(e,t){return new _c(e,t)},Zi(_c,Xa),_c.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;_o(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Nc(e,null,e.Y),uc(e)},_c.prototype.close=function(){oc(this.g)},_c.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ja(e),e=n);t.j.push(new El(t.fb++,e)),3==t.H&&uc(t)},_c.prototype.N=function(){this.g.h=null,delete this.j,oc(this.g),delete this.g,_c.$.N.call(this)},Zi(Tc,Mo),Zi(Cc,Fo),Zi(jc,Ec),jc.prototype.Ba=function(){Ya(this.g,"a")},jc.prototype.Aa=function(e){Ya(this.g,new Tc(e))},jc.prototype.za=function(e){Ya(this.g,new Cc)},jc.prototype.ya=function(){Ya(this.g,"b")},Zi(Ac,function(){this.blockSize=-1}),Ac.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ac.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(0==s)for(;i<=n;)Dc(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){Dc(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){Dc(this,r),s=0;break}}this.h=s,this.i+=t},Ac.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Pc={};function Oc(e){return-128<=e&&128>e?function(e,t){var n=Pc;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new Rc([0|e],0>e?-1:0)}):new Rc([0|e],0>e?-1:0)}function Lc(e){if(isNaN(e)||!isFinite(e))return Fc;if(0>e)return qc(Lc(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Mc;return new Rc(t,0)}var Mc=4294967296,Fc=Oc(0),Uc=Oc(1),Vc=Oc(16777216);function zc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Bc(e){return-1==e.h}function qc(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Rc(n,~e.h).add(Uc)}function Kc(e,t){return e.add(qc(t))}function Hc(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Gc(e,t){this.g=e,this.h=t}function Wc(e,t){if(zc(t))throw Error("division by zero");if(zc(e))return new Gc(Fc,Fc);if(Bc(e))return t=Wc(qc(e),t),new Gc(qc(t.g),qc(t.h));if(Bc(t))return t=Wc(e,qc(t)),new Gc(qc(t.g),t.h);if(30<e.g.length){if(Bc(e)||Bc(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Uc,r=t;0>=r.X(e);)n=Qc(n),r=Qc(r);var s=Xc(n,1),i=Xc(r,1);for(r=Xc(r,2),n=Xc(n,2);!zc(r);){var a=i.add(r);0>=a.X(e)&&(s=s.add(n),i=a),r=Xc(r,1),n=Xc(n,1)}return t=Kc(e,s.R(t)),new Gc(s,t)}for(s=Fc;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(i=Lc(n)).R(t);Bc(a)||0<a.X(e);)a=(i=Lc(n-=r)).R(t);zc(i)&&(i=Uc),s=s.add(i),e=Kc(e,a)}return new Gc(s,e)}function Qc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Rc(n,e.h)}function Xc(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new Rc(s,e.h)}(Vi=Rc.prototype).ea=function(){if(Bc(this))return-qc(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Mc+r)*t,t*=Mc}return e},Vi.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(zc(this))return"0";if(Bc(this))return"-"+qc(this).toString(e);for(var t=Lc(Math.pow(e,6)),n=this,r="";;){var s=Wc(n,t).g,i=((0<(n=Kc(n,s.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(zc(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},Vi.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Vi.X=function(e){return Bc(e=Kc(this,e))?-1:zc(e)?0:1},Vi.abs=function(){return Bc(this)?qc(this):this},Vi.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(65535&this.D(s))+(65535&e.D(s)),a=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=a>>>16,i&=65535,a&=65535,n[s]=a<<16|i}return new Rc(n,-2147483648&n[n.length-1]?-1:0)},Vi.R=function(e){if(zc(this)||zc(e))return Fc;if(Bc(this))return Bc(e)?qc(this).R(qc(e)):qc(qc(this).R(e));if(Bc(e))return qc(this.R(qc(e)));if(0>this.X(Vc)&&0>e.X(Vc))return Lc(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,a=65535&this.D(r),o=e.D(s)>>>16,l=65535&e.D(s);n[2*r+2*s]+=a*l,Hc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Hc(n,2*r+2*s+1),n[2*r+2*s+1]+=a*o,Hc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*o,Hc(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Rc(n,0)},Vi.gb=function(e){return Wc(this,e).h},Vi.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Rc(n,this.h&e.h)},Vi.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Rc(n,this.h|e.h)},Vi.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Rc(n,this.h^e.h)},Ic.prototype.createWebChannel=Ic.prototype.g,_c.prototype.send=_c.prototype.u,_c.prototype.open=_c.prototype.m,_c.prototype.close=_c.prototype.close,jo.NO_ERROR=0,jo.TIMEOUT=8,jo.HTTP_ERROR=6,Ao.COMPLETE="complete",Po.EventType=Lo,Lo.OPEN="a",Lo.CLOSE="b",Lo.ERROR="c",Lo.MESSAGE="d",Xa.prototype.listen=Xa.prototype.O,Gl.prototype.listenOnce=Gl.prototype.P,Gl.prototype.getLastError=Gl.prototype.Sa,Gl.prototype.getLastErrorCode=Gl.prototype.Ia,Gl.prototype.getStatus=Gl.prototype.da,Gl.prototype.getResponseJson=Gl.prototype.Wa,Gl.prototype.getResponseText=Gl.prototype.ja,Gl.prototype.send=Gl.prototype.ha,Gl.prototype.setWithCredentials=Gl.prototype.Oa,Ac.prototype.digest=Ac.prototype.l,Ac.prototype.reset=Ac.prototype.reset,Ac.prototype.update=Ac.prototype.j,Rc.prototype.add=Rc.prototype.add,Rc.prototype.multiply=Rc.prototype.R,Rc.prototype.modulo=Rc.prototype.gb,Rc.prototype.compare=Rc.prototype.X,Rc.prototype.toNumber=Rc.prototype.ea,Rc.prototype.toString=Rc.prototype.toString,Rc.prototype.getBits=Rc.prototype.D,Rc.fromNumber=Lc,Rc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return qc(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Lc(Math.pow(n,8)),s=Fc,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+a),n);8>a?(a=Lc(Math.pow(n,a)),s=s.R(a).add(Lc(o))):s=(s=s.R(r)).add(Lc(o))}return s};var Yc=Bi.createWebChannelTransport=function(){return new Ic},$c=Bi.getStatEventTarget=function(){return No()},Jc=Bi.ErrorCode=jo,Zc=Bi.EventType=Ao,eu=Bi.Event=wo,tu=Bi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},nu=Bi.FetchXmlHttpFactory=Ul,ru=Bi.WebChannel=Po,su=Bi.XhrIo=Gl,iu=Bi.Md5=Ac,au=Bi.Integer=Rc;const ou="@firebase/firestore";class lu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lu.UNAUTHENTICATED=new lu(null),lu.GOOGLE_CREDENTIALS=new lu("google-credentials-uid"),lu.FIRST_PARTY=new lu("first-party-uid"),lu.MOCK_USER=new lu("mock-user");let cu="9.23.0";const uu=new yt("@firebase/firestore");function hu(){return uu.logLevel}function du(e){if(uu.logLevel<=dt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(mu);uu.debug("Firestore (".concat(cu,"): ").concat(e),...s)}}function fu(e){if(uu.logLevel<=dt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(mu);uu.error("Firestore (".concat(cu,"): ").concat(e),...s)}}function pu(e){if(uu.logLevel<=dt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(mu);uu.warn("Firestore (".concat(cu,"): ").concat(e),...s)}}function mu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function gu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(cu,") INTERNAL ASSERTION FAILED: ")+e;throw fu(t),new Error(t)}function yu(e,t){e||gu()}function vu(e,t){return e}const bu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xu extends Ye{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class wu{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ku{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Nu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(lu.UNAUTHENTICATED))}shutdown(){}}class Su{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Eu{constructor(e){this.t=e,this.currentUser=lu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new wu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wu,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{du("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(du("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wu)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(du("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(yu("string"==typeof t.accessToken),new ku(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yu(null===e||"string"==typeof e),new lu(e)}}class Iu{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=lu.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class _u{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Iu(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(lu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&du("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,du("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{du("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):du("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(yu("string"==typeof e.token),this.T=e.token,new Tu(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ju(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Au{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ju(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function Du(e,t){return e<t?-1:e>t?1:0}function Ru(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function Pu(e){return e+"\0"}class Ou{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xu(bu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xu(bu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xu(bu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xu(bu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ou.fromMillis(Date.now())}static fromDate(e){return Ou.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ou(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Du(this.nanoseconds,e.nanoseconds):Du(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lu{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lu(e)}static min(){return new Lu(new Ou(0,0))}static max(){return new Lu(new Ou(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mu{constructor(e,t,n){void 0===t?t=0:t>e.length&&gu(),void 0===n?n=e.length-t:n>e.length-t&&gu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Mu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mu?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Fu extends Mu{construct(e,t,n){return new Fu(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new xu(bu.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new Fu(e)}static emptyPath(){return new Fu([])}}const Uu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vu extends Mu{construct(e,t,n){return new Vu(e,t,n)}static isValidIdentifier(e){return Uu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vu.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vu(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new xu(bu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new xu(bu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new xu(bu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new xu(bu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vu(t)}static emptyPath(){return new Vu([])}}class zu{constructor(e){this.path=e}static fromPath(e){return new zu(Fu.fromString(e))}static fromName(e){return new zu(Fu.fromString(e).popFirst(5))}static empty(){return new zu(Fu.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fu.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Fu.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zu(new Fu(e.slice()))}}class Bu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function qu(e){return e.fields.find(e=>2===e.kind)}function Ku(e){return e.fields.filter(e=>2!==e.kind)}Bu.UNKNOWN_ID=-1;class Hu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gu(0,Xu.min())}}function Wu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Lu.fromTimestamp(1e9===r?new Ou(n+1,0):new Ou(n,r));return new Xu(s,zu.empty(),t)}function Qu(e){return new Xu(e.readTime,e.key,-1)}class Xu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Xu(Lu.min(),zu.empty(),-1)}static max(){return new Xu(Lu.max(),zu.empty(),-1)}}function Yu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=zu.comparator(e.documentKey,t.documentKey),0!==n?n:Du(e.largestBatchId,t.largestBatchId))}const $u="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ju{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Zu(e){if(e.code!==bu.FAILED_PRECONDITION||e.message!==$u)throw e;du("LocalStore","Unexpectedly lost primary lease")}class eh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new eh((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof eh?t:eh.resolve(t)}catch(e){return eh.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):eh.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):eh.reject(t)}static resolve(e){return new eh((t,n)=>{t(e)})}static reject(e){return new eh((t,n)=>{n(e)})}static waitFor(e){return new eh((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=eh.resolve(!1);for(const n of e)t=t.next(e=>e?eh.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new eh((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new eh((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}class th{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new wu,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new sh(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=ch(t.target.error);this.v.reject(new sh(e,n))}}static open(e,t,n,r){try{return new th(t,e.transaction(r,n))}catch(e){throw new sh(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(du("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ah(t)}}class nh{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===nh.S(We())&&fu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return du("SimpleDb","Removing database:",e),oh(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Xe())return!1;if(nh.C())return!0;const e=We(),t=nh.S(e),n=0<t&&t<10,r=nh.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(du("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new sh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new xu(bu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new xu(bu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new sh(e,r))},r.onupgradeneeded=e=>{du("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next(()=>{du("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const s="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.$(e);const t=th.open(this.db,e,s?"readonly":"readwrite",n),i=r(t).next(e=>(t.P(),e)).catch(e=>(t.abort(e),eh.reject(e))).toPromise();return i.catch(()=>{}),await t.R,i}catch(e){const t=e,n="FirebaseError"!==t.name&&i<3;if(du("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class rh{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return oh(this.L.delete())}}class sh extends xu{constructor(e,t){super(bu.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function ih(e){return"IndexedDbTransactionError"===e.name}class ah{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(du("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(du("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),oh(n)}add(e){return du("SimpleDb","ADD",this.store.name,e,e),oh(this.store.add(e))}get(e){return oh(this.store.get(e)).next(t=>(void 0===t&&(t=null),du("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return du("SimpleDb","DELETE",this.store.name,e),oh(this.store.delete(e))}count(){return du("SimpleDb","COUNT",this.store.name),oh(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,(e,n)=>{t.push(n)}).next(()=>t)}{const e=this.store.getAll(n.range);return new eh((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new eh((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}J(e,t){du("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,(e,t,n)=>n.delete())}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new eh((n,r)=>{t.onerror=e=>{const t=ch(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}W(e,t){const n=[];return new eh((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new rh(s),a=t(s.primaryKey,s.value,i);if(a instanceof eh){const e=a.catch(e=>(i.done(),eh.reject(e)));n.push(e)}i.isDone?r():null===i.K?s.continue():s.continue(i.K)}}).next(()=>eh.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oh(e){return new eh((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=ch(e.target.error);n(t)}})}let lh=!1;function ch(e){const t=nh.S(We());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new xu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return lh||(lh=!0,setTimeout(()=>{throw e},0)),e}}return e}class uh{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){du("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{du("IndexBackiller","Documents written: ".concat(await this.tt.nt()))}catch(e){ih(e)?du("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Zu(e)}await this.et(6e4)})}}class hh{constructor(e,t){this.localStore=e,this.persistence=t}async nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.st(t,e))}st(e,t){const n=new Set;let r=t,s=!0;return eh.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return du("IndexBackiller","Processing collection: ".concat(t)),this.it(e,t,r).next(e=>{r-=e,n.add(t)});s=!1})).next(()=>t-r)}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.rt(r,n)).next(n=>(du("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>s.size)}))}rt(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=Qu(t);Yu(r,n)>0&&(n=r)}),new Xu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class dh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function fh(e){return null==e}function ph(e){return 0===e&&1/e==-1/0}function mh(e){return"number"==typeof e&&Number.isInteger(e)&&!ph(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function gh(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=vh(t)),t=yh(e.get(n),t);return vh(t)}function yh(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function vh(e){return e+"\x01\x01"}function bh(e){const t=e.length;if(yu(t>=2),2===t)return yu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Fu.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf("\x01",i);switch((t<0||t>n)&&gu(),e.charAt(t+1)){case"\x01":const n=e.substring(i,t);let a;0===s.length?a=n:(s+=n,a=s,s=""),r.push(a);break;case"\x10":s+=e.substring(i,t),s+="\0";break;case"\x11":s+=e.substring(i,t+1);break;default:gu()}i=t+2}return new Fu(r)}dh.ct=-1;const xh=["userId","batchId"];function wh(e,t){return[e,gh(t)]}function kh(e,t,n){return[e,gh(t),n]}const Nh={},Sh=["prefixPath","collectionGroup","readTime","documentId"],Eh=["prefixPath","collectionGroup","documentId"],Ih=["collectionGroup","readTime","prefixPath","documentId"],_h=["canonicalId","targetId"],Th=["targetId","path"],Ch=["path","targetId"],jh=["collectionId","parent"],Ah=["indexId","uid"],Dh=["uid","sequenceNumber"],Rh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ph=["indexId","uid","orderedDocumentKey"],Oh=["userId","collectionPath","documentId"],Lh=["userId","collectionPath","largestBatchId"],Mh=["userId","collectionGroup","largestBatchId"],Fh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Uh=[...Fh,"documentOverlays"],Vh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zh=Vh,Bh=[...zh,"indexConfiguration","indexState","indexEntries"];class qh extends Ju{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Kh(e,t){const n=vu(e);return nh.M(n.ht,t)}function Hh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Gh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Wh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Qh{constructor(e,t){this.comparator=e,this.root=t||Yh.EMPTY}insert(e,t){return new Qh(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yh.BLACK,null,null))}remove(e){return new Qh(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yh{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Yh.RED,this.left=null!=r?r:Yh.EMPTY,this.right=null!=s?s:Yh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Yh(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Yh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Yh.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gu();if(this.right.isRed())throw gu();const e=this.left.check();if(e!==this.right.check())throw gu();return e+(this.isRed()?0:1)}}Yh.EMPTY=null,Yh.RED=!0,Yh.BLACK=!1,Yh.EMPTY=new class{constructor(){this.size=0}get key(){throw gu()}get value(){throw gu()}get color(){throw gu()}get left(){throw gu()}get right(){throw gu()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Yh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $h{constructor(e){this.comparator=e,this.data=new Qh(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jh(this.data.getIterator())}getIteratorFrom(e){return new Jh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof $h))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $h(this.comparator);return t.data=e,t}}class Jh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zh(e){return e.hasNext()?e.getNext():void 0}class ed{constructor(e){this.fields=e,e.sort(Vu.comparator)}static empty(){return new ed([])}unionWith(e){let t=new $h(Vu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ed(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ru(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class td extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nd{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new td("Invalid base64 string: "+e):e}}(e);return new nd(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new nd(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Du(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nd.EMPTY_BYTE_STRING=new nd("");const rd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sd(e){if(yu(!!e),"string"==typeof e){let t=0;const n=rd.exec(e);if(yu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:id(e.seconds),nanos:id(e.nanos)}}function id(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ad(e){return"string"==typeof e?nd.fromBase64String(e):nd.fromUint8Array(e)}function od(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ld(e){const t=e.mapValue.fields.__previous_value__;return od(t)?ld(t):t}function cd(e){const t=sd(e.mapValue.fields.__local_write_time__.timestampValue);return new Ou(t.seconds,t.nanos)}class ud{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class hd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new hd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof hd&&e.projectId===this.projectId&&e.database===this.database}}const dd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fd={nullValue:"NULL_VALUE"};function pd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?od(e)?4:Td(e)?9007199254740991:10:gu()}function md(e,t){if(e===t)return!0;const n=pd(e);if(n!==pd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return cd(e).isEqual(cd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=sd(e.timestampValue),r=sd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ad(e.bytesValue).isEqual(ad(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return id(e.geoPointValue.latitude)===id(t.geoPointValue.latitude)&&id(e.geoPointValue.longitude)===id(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return id(e.integerValue)===id(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=id(e.doubleValue),r=id(t.doubleValue);return n===r?ph(n)===ph(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ru(e.arrayValue.values||[],t.arrayValue.values||[],md);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Hh(n)!==Hh(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!md(n[s],r[s])))return!1;return!0}(e,t);default:return gu()}}function gd(e,t){return void 0!==(e.values||[]).find(e=>md(e,t))}function yd(e,t){if(e===t)return 0;const n=pd(e),r=pd(t);if(n!==r)return Du(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Du(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=id(e.integerValue||e.doubleValue),r=id(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return vd(e.timestampValue,t.timestampValue);case 4:return vd(cd(e),cd(t));case 5:return Du(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ad(e),r=ad(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Du(n[s],r[s]);if(0!==e)return e}return Du(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Du(id(e.latitude),id(t.latitude));return 0!==n?n:Du(id(e.longitude),id(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=yd(n[s],r[s]);if(e)return e}return Du(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===dd.mapValue&&t===dd.mapValue)return 0;if(e===dd.mapValue)return 1;if(t===dd.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Du(r[a],i[a]);if(0!==e)return e;const t=yd(n[r[a]],s[i[a]]);if(0!==t)return t}return Du(r.length,i.length)}(e.mapValue,t.mapValue);default:throw gu()}}function vd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Du(e,t);const n=sd(e),r=sd(t),s=Du(n.seconds,r.seconds);return 0!==s?s:Du(n.nanos,r.nanos)}function bd(e){return xd(e)}function xd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=sd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ad(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,zu.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=xd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(xd(e.fields[s]));return n+"}"}(e.mapValue):gu();var t,n}function wd(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function kd(e){return!!e&&"integerValue"in e}function Nd(e){return!!e&&"arrayValue"in e}function Sd(e){return!!e&&"nullValue"in e}function Ed(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Id(e){return!!e&&"mapValue"in e}function _d(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Gh(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=_d(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=_d(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Td(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Cd(e){return"nullValue"in e?fd:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?wd(hd.empty(),zu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:gu()}function jd(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?wd(hd.empty(),zu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?dd:gu()}function Ad(e,t){const n=yd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Dd(e,t){const n=yd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Rd{constructor(e){this.value=e}static empty(){return new Rd({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Id(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_d(t)}setAll(e){let t=Vu.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=_d(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Id(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return md(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Id(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Gh(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Rd(_d(this.value))}}function Pd(e){const t=[];return Gh(e.fields,(e,n)=>{const r=new Vu([e]);if(Id(n)){const e=Pd(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ed(t)}class Od{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Od(e,0,Lu.min(),Lu.min(),Lu.min(),Rd.empty(),0)}static newFoundDocument(e,t,n,r){return new Od(e,1,t,Lu.min(),n,r,0)}static newNoDocument(e,t){return new Od(e,2,t,Lu.min(),Lu.min(),Rd.empty(),0)}static newUnknownDocument(e,t){return new Od(e,3,t,Lu.min(),Lu.min(),Rd.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Lu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lu.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Od&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Od(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ld{constructor(e,t){this.position=e,this.inclusive=t}}function Md(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?zu.comparator(zu.fromName(a.referenceValue),n.key):yd(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Fd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!md(e.position[n],t.position[n]))return!1;return!0}class Ud{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Vd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class zd{}class Bd extends zd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Jd(e,t,n):"array-contains"===t?new nf(e,n):"in"===t?new rf(e,n):"not-in"===t?new sf(e,n):"array-contains-any"===t?new af(e,n):new Bd(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Zd(e,n):new ef(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yd(t,this.value)):null!==t&&pd(this.value)===pd(t)&&this.matchesComparison(yd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gu()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class qd extends zd{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new qd(e,t)}matches(e){return Kd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Kd(e){return"and"===e.op}function Hd(e){return"or"===e.op}function Gd(e){return Wd(e)&&Kd(e)}function Wd(e){for(const t of e.filters)if(t instanceof qd)return!1;return!0}function Qd(e){if(e instanceof Bd)return e.field.canonicalString()+e.op.toString()+bd(e.value);if(Gd(e))return e.filters.map(e=>Qd(e)).join(",");{const t=e.filters.map(e=>Qd(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Xd(e,t){return e instanceof Bd?function(e,t){return t instanceof Bd&&e.op===t.op&&e.field.isEqual(t.field)&&md(e.value,t.value)}(e,t):e instanceof qd?function(e,t){return t instanceof qd&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Xd(n,t.filters[r]),!0)}(e,t):void gu()}function Yd(e,t){const n=e.filters.concat(t);return qd.create(n,e.op)}function $d(e){return e instanceof Bd?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(bd(e.value))}(e):e instanceof qd?function(e){return e.op.toString()+" {"+e.getFilters().map($d).join(" ,")+"}"}(e):"Filter"}class Jd extends Bd{constructor(e,t,n){super(e,t,n),this.key=zu.fromName(n.referenceValue)}matches(e){const t=zu.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zd extends Bd{constructor(e,t){super(e,"in",t),this.keys=tf("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ef extends Bd{constructor(e,t){super(e,"not-in",t),this.keys=tf("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tf(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>zu.fromName(e.referenceValue))}class nf extends Bd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nd(t)&&gd(t.arrayValue,this.value)}}class rf extends Bd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gd(this.value.arrayValue,t)}}class sf extends Bd{constructor(e,t){super(e,"not-in",t)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gd(this.value.arrayValue,t)}}class af extends Bd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>gd(this.value.arrayValue,e))}}class of{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.dt=null}}function lf(e){return new of(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function cf(e){const t=vu(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Qd(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),fh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>bd(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>bd(e)).join(",")),t.dt=e}return t.dt}function uf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Vd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Xd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Fd(e.startAt,t.startAt)&&Fd(e.endAt,t.endAt)}function hf(e){return zu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function df(e,t){return e.filters.filter(e=>e instanceof Bd&&e.field.isEqual(t))}function ff(e,t,n){let r=fd,s=!0;for(const i of df(e,t)){let e=fd,t=!0;switch(i.op){case"<":case"<=":e=Cd(i.value);break;case"==":case"in":case">=":e=i.value;break;case">":e=i.value,t=!1;break;case"!=":case"not-in":e=fd}Ad({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];Ad({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function pf(e,t,n){let r=dd,s=!0;for(const i of df(e,t)){let e=dd,t=!0;switch(i.op){case">=":case">":e=jd(i.value),t=!1;break;case"==":case"in":case"<=":e=i.value;break;case"<":e=i.value,t=!1;break;case"!=":case"not-in":e=dd}Dd({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];Dd({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}class mf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.wt=null,this._t=null,this.startAt,this.endAt}}function gf(e,t,n,r,s,i,a,o){return new mf(e,t,n,r,s,i,a,o)}function yf(e){return new mf(e)}function vf(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function bf(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function xf(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function wf(e){return null!==e.collectionGroup}function kf(e){const t=vu(e);if(null===t.wt){t.wt=[];const e=xf(t),n=bf(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Ud(e)),t.wt.push(new Ud(Vu.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Ud(Vu.keyField(),e))}}}return t.wt}function Nf(e){const t=vu(e);if(!t._t)if("F"===t.limitType)t._t=lf(t.path,t.collectionGroup,kf(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of kf(t)){const t="desc"===s.dir?"asc":"desc";e.push(new Ud(s.field,t))}const n=t.endAt?new Ld(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ld(t.startAt.position,t.startAt.inclusive):null;t._t=lf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Sf(e,t,n){return new mf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ef(e,t){return uf(Nf(e),Nf(t))&&e.limitType===t.limitType}function If(e){return"".concat(cf(Nf(e)),"|lt:").concat(e.limitType)}function _f(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>$d(e)).join(", "),"]")),fh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>bd(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>bd(e)).join(",")),"Target(".concat(t,")")}(Nf(e)),"; limitType=").concat(e.limitType,")")}function Tf(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of kf(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Md(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,kf(e),t))&&!(e.endAt&&!function(e,t,n){const r=Md(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,kf(e),t))}(e,t)}function Cf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function jf(e){return(t,n)=>{let r=!1;for(const s of kf(e)){const e=Af(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Af(e,t,n){const r=e.field.isKeyField()?zu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?yd(r,s):gu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return gu()}}class Df{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gh(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Wh(this.inner)}size(){return this.innerSize}}const Rf=new Qh(zu.comparator);function Pf(){return Rf}const Of=new Qh(zu.comparator);function Lf(){let e=Of;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Mf(e){let t=Of;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Ff(){return Vf()}function Uf(){return Vf()}function Vf(){return new Df(e=>e.toString(),(e,t)=>e.isEqual(t))}const zf=new Qh(zu.comparator),Bf=new $h(zu.comparator);function qf(){let e=Bf;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Kf=new $h(Du);function Hf(){return Kf}function Gf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(t)?"-0":t}}function Wf(e){return{integerValue:""+e}}function Qf(e,t){return mh(t)?Wf(t):Gf(e,t)}class Xf{constructor(){this._=void 0}}function Yf(e,t,n){return e instanceof Zf?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&od(t)&&(t=ld(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ep?tp(e,t):e instanceof np?rp(e,t):function(e,t){const n=Jf(e,t),r=ip(n)+ip(e.gt);return kd(n)&&kd(e.gt)?Wf(r):Gf(e.serializer,r)}(e,t)}function $f(e,t,n){return e instanceof ep?tp(e,t):e instanceof np?rp(e,t):n}function Jf(e,t){return e instanceof sp?kd(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Zf extends Xf{}class ep extends Xf{constructor(e){super(),this.elements=e}}function tp(e,t){const n=ap(t);for(const r of e.elements)n.some(e=>md(e,r))||n.push(r);return{arrayValue:{values:n}}}class np extends Xf{constructor(e){super(),this.elements=e}}function rp(e,t){let n=ap(t);for(const r of e.elements)n=n.filter(e=>!md(e,r));return{arrayValue:{values:n}}}class sp extends Xf{constructor(e,t){super(),this.serializer=e,this.gt=t}}function ip(e){return id(e.integerValue||e.doubleValue)}function ap(e){return Nd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class op{constructor(e,t){this.field=e,this.transform=t}}class lp{constructor(e,t){this.version=e,this.transformResults=t}}class cp{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cp}static exists(e){return new cp(void 0,e)}static updateTime(e){return new cp(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function up(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class hp{}function dp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new kp(e.key,cp.none()):new yp(e.key,e.data,cp.none());{const n=e.data,r=Rd.empty();let s=new $h(Vu.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new vp(e.key,r,new ed(s.toArray()),cp.none())}}function fp(e,t,n){e instanceof yp?function(e,t,n){const r=e.value.clone(),s=xp(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof vp?function(e,t,n){if(!up(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=xp(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(bp(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function pp(e,t,n,r){return e instanceof yp?function(e,t,n,r){if(!up(e.precondition,t))return n;const s=e.value.clone(),i=wp(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof vp?function(e,t,n,r){if(!up(e.precondition,t))return n;const s=wp(e.fieldTransforms,r,t),i=t.data;return i.setAll(bp(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return up(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function mp(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Jf(r.transform,e||null);null!=s&&(null===n&&(n=Rd.empty()),n.set(r.field,s))}return n||null}function gp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ru(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ep&&t instanceof ep||e instanceof np&&t instanceof np?Ru(e.elements,t.elements,md):e instanceof sp&&t instanceof sp?md(e.gt,t.gt):e instanceof Zf&&t instanceof Zf}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class yp extends hp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class vp extends hp{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function bp(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function xp(e,t,n){const r=new Map;yu(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,$f(a,o,n[s]))}return r}function wp(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Yf(e,i,t))}return r}class kp extends hp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Np extends hp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Sp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&fp(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=pp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=pp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Uf();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=dp(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Lu.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qf())}isEqual(e){return this.batchId===e.batchId&&Ru(this.mutations,e.mutations,(e,t)=>gp(e,t))&&Ru(this.baseMutations,e.baseMutations,(e,t)=>gp(e,t))}}class Ep{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){yu(e.mutations.length===n.length);let r=zf;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Ep(e,t,n,r)}}class Ip{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class _p{constructor(e,t){this.count=e,this.unchangedNames=t}}var Tp,Cp;function jp(e){switch(e){default:return gu();case bu.CANCELLED:case bu.UNKNOWN:case bu.DEADLINE_EXCEEDED:case bu.RESOURCE_EXHAUSTED:case bu.INTERNAL:case bu.UNAVAILABLE:case bu.UNAUTHENTICATED:return!1;case bu.INVALID_ARGUMENT:case bu.NOT_FOUND:case bu.ALREADY_EXISTS:case bu.PERMISSION_DENIED:case bu.FAILED_PRECONDITION:case bu.ABORTED:case bu.OUT_OF_RANGE:case bu.UNIMPLEMENTED:case bu.DATA_LOSS:return!0}}function Ap(e){if(void 0===e)return fu("GRPC error has no .code"),bu.UNKNOWN;switch(e){case Tp.OK:return bu.OK;case Tp.CANCELLED:return bu.CANCELLED;case Tp.UNKNOWN:return bu.UNKNOWN;case Tp.DEADLINE_EXCEEDED:return bu.DEADLINE_EXCEEDED;case Tp.RESOURCE_EXHAUSTED:return bu.RESOURCE_EXHAUSTED;case Tp.INTERNAL:return bu.INTERNAL;case Tp.UNAVAILABLE:return bu.UNAVAILABLE;case Tp.UNAUTHENTICATED:return bu.UNAUTHENTICATED;case Tp.INVALID_ARGUMENT:return bu.INVALID_ARGUMENT;case Tp.NOT_FOUND:return bu.NOT_FOUND;case Tp.ALREADY_EXISTS:return bu.ALREADY_EXISTS;case Tp.PERMISSION_DENIED:return bu.PERMISSION_DENIED;case Tp.FAILED_PRECONDITION:return bu.FAILED_PRECONDITION;case Tp.ABORTED:return bu.ABORTED;case Tp.OUT_OF_RANGE:return bu.OUT_OF_RANGE;case Tp.UNIMPLEMENTED:return bu.UNIMPLEMENTED;case Tp.DATA_LOSS:return bu.DATA_LOSS;default:return gu()}}(Cp=Tp||(Tp={}))[Cp.OK=0]="OK",Cp[Cp.CANCELLED=1]="CANCELLED",Cp[Cp.UNKNOWN=2]="UNKNOWN",Cp[Cp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cp[Cp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cp[Cp.NOT_FOUND=5]="NOT_FOUND",Cp[Cp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cp[Cp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cp[Cp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cp[Cp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cp[Cp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cp[Cp.ABORTED=10]="ABORTED",Cp[Cp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cp[Cp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cp[Cp.INTERNAL=13]="INTERNAL",Cp[Cp.UNAVAILABLE=14]="UNAVAILABLE",Cp[Cp.DATA_LOSS=15]="DATA_LOSS";class Dp{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Rp}static getOrCreateInstance(){return null===Rp&&(Rp=new Dp),Rp}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Rp=null;function Pp(){return new TextEncoder}const Op=new au([4294967295,4294967295],0);function Lp(e){const t=Pp().encode(e),n=new iu;return n.update(t),new Uint8Array(n.digest())}function Mp(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new au([n,r],0),new au([s,i],0)]}class Fp{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Up("Invalid padding: ".concat(t));if(n<0)throw new Up("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Up("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Up("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=au.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(au.fromNumber(n)));return 1===r.compare(Op)&&(r=new au([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Lp(e),[n,r]=Mp(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Fp(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.It)return;const t=Lp(e),[n,r]=Mp(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Up extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vp{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,zp.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Vp(Lu.min(),r,new Qh(Du),Pf(),qf())}}class zp{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new zp(n,t,qf(),qf(),qf())}}class Bp{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class qp{constructor(e,t){this.targetId=e,this.Vt=t}}class Kp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nd.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Hp{constructor(){this.St=0,this.Dt=Qp(),this.Ct=nd.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=qf(),t=qf(),n=qf();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:gu()}}),new zp(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Qp()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Gp{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Pf(),this.zt=Wp(),this.Wt=new Qh(Du)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:gu()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,s=this.se(n);if(s){const i=s.target;if(hf(i))if(0===r){const e=new zu(i.path);this.Yt(n,e,Od.newNoDocument(e,Lu.min()))}else yu(1===r);else{const s=this.ie(n);if(s!==r){const r=this.re(e,s);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Dp.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,s,i,a,o,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(a=null===(i=null===(s=null==u?void 0:u.bits)||void 0===s?void 0:s.bitmap)||void 0===i?void 0:i.length)&&void 0!==a?a:0,padding:null!==(l=null===(o=null==u?void 0:u.bits)||void 0===o?void 0:o.padding)&&void 0!==l?l:0}),c}(r,s,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:s="",padding:i=0},hashCount:a=0}=n;let o,l;try{o=ad(s).toUint8Array()}catch(e){if(e instanceof td)return pu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new Fp(o,i,a)}catch(e){return pu(e instanceof Up?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const s=this.Gt.ue(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());t.vt(i)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const s=this.se(r);if(s){if(n.current&&hf(s.target)){const t=new zu(s.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Od.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=qf();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new Vp(e,t,this.Wt,this.jt,n);return this.jt=Pf(),this.zt=Wp(),this.Wt=new Qh(Du),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Hp,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new $h(Du),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||du("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Hp),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Wp(){return new Qh(zu.comparator)}function Qp(){return new Qh(zu.comparator)}const Xp={asc:"ASCENDING",desc:"DESCENDING"},Yp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$p={and:"AND",or:"OR"};class Jp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zp(e,t){return e.useProto3Json||fh(t)?t:{value:t}}function em(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function tm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nm(e,t){return em(e,t.toTimestamp())}function rm(e){return yu(!!e),Lu.fromTimestamp(function(e){const t=sd(e);return new Ou(t.seconds,t.nanos)}(e))}function sm(e,t){return function(e){return new Fu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function im(e){const t=Fu.fromString(e);return yu(_m(t)),t}function am(e,t){return sm(e.databaseId,t.path)}function om(e,t){const n=im(t);if(n.get(1)!==e.databaseId.projectId)throw new xu(bu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new xu(bu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zu(hm(n))}function lm(e,t){return sm(e.databaseId,t)}function cm(e){const t=im(e);return 4===t.length?Fu.emptyPath():hm(t)}function um(e){return new Fu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function hm(e){return yu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function dm(e,t,n){return{name:am(e,t),fields:n.value.mapValue.fields}}function fm(e,t,n){const r=om(e,t.name),s=rm(t.updateTime),i=t.createTime?rm(t.createTime):Lu.min(),a=new Rd({mapValue:{fields:t.fields}}),o=Od.newFoundDocument(r,s,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function pm(e,t){let n;if(t instanceof yp)n={update:dm(e,t.key,t.value)};else if(t instanceof kp)n={delete:am(e,t.key)};else if(t instanceof vp)n={update:dm(e,t.key,t.data),updateMask:Im(t.fieldMask)};else{if(!(t instanceof Np))return gu();n={verify:am(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Zf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ep)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof np)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sp)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw gu()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:nm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gu()}(e,t.precondition)),n}function mm(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?cp.updateTime(rm(e.updateTime)):void 0!==e.exists?cp.exists(e.exists):cp.none()}(t.currentDocument):cp.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)yu("REQUEST_TIME"===t.setToServerValue),n=new Zf;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new ep(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new np(e)}else"increment"in t?n=new sp(e,t.increment):gu();const r=Vu.fromServerFormat(t.fieldPath);return new op(r,n)}(e,t)):[];if(t.update){t.update.name;const s=om(e,t.update.name),i=new Rd({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ed(t.map(e=>Vu.fromServerFormat(e)))}(t.updateMask);return new vp(s,i,e,n,r)}return new yp(s,i,n,r)}if(t.delete){const r=om(e,t.delete);return new kp(r,n)}if(t.verify){const r=om(e,t.verify);return new Np(r,n)}return gu()}function gm(e,t){return{documents:[lm(e,t.path)]}}function ym(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=lm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=lm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(e){if(0!==e.length)return Em(qd.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Nm(e.field),direction:xm(e.dir)}}(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const a=Zp(e,t.limit);var o;return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function vm(e){let t=cm(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){yu(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=bm(e);return t instanceof qd&&Gd(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>function(e){return new Ud(Sm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,fh(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ld(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ld(n,t)}(n.endAt)),gf(t,s,a,i,o,"F",l,c)}function bm(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Sm(e.unaryFilter.field);return Bd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Sm(e.unaryFilter.field);return Bd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Sm(e.unaryFilter.field);return Bd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Sm(e.unaryFilter.field);return Bd.create(s,"!=",{nullValue:"NULL_VALUE"});default:return gu()}}(e):void 0!==e.fieldFilter?function(e){return Bd.create(Sm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return qd.create(e.compositeFilter.filters.map(e=>bm(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return gu()}}(e.compositeFilter.op))}(e):gu()}function xm(e){return Xp[e]}function wm(e){return Yp[e]}function km(e){return $p[e]}function Nm(e){return{fieldPath:e.canonicalString()}}function Sm(e){return Vu.fromServerFormat(e.fieldPath)}function Em(e){return e instanceof Bd?function(e){if("=="===e.op){if(Ed(e.value))return{unaryFilter:{field:Nm(e.field),op:"IS_NAN"}};if(Sd(e.value))return{unaryFilter:{field:Nm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ed(e.value))return{unaryFilter:{field:Nm(e.field),op:"IS_NOT_NAN"}};if(Sd(e.value))return{unaryFilter:{field:Nm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nm(e.field),op:wm(e.op),value:e.value}}}(e):e instanceof qd?function(e){const t=e.getFilters().map(e=>Em(e));return 1===t.length?t[0]:{compositeFilter:{op:km(e.op),filters:t}}}(e):gu()}function Im(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function _m(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Tm{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Lu.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Lu.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nd.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Tm(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tm(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Cm{constructor(e){this.fe=e}}function jm(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Am(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:am(e,t.key),fields:t.data.value.mapValue.fields,updateTime:em(e,t.version.toTimestamp()),createTime:em(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Dm(t.version)};else{if(!t.isUnknownDocument())return gu();r.unknownDocument={path:n.path.toArray(),version:Dm(t.version)}}return r}function Am(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Dm(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Rm(e){const t=new Ou(e.seconds,e.nanoseconds);return Lu.fromTimestamp(t)}function Pm(e,t){const n=(t.baseMutations||[]).map(t=>mm(e.fe,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){const n=t.mutations[i+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map(t=>mm(e.fe,t)),s=Ou.fromMillis(t.localWriteTimeMs);return new Sp(t.batchId,s,n,r)}function Om(e){const t=Rm(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Rm(e.lastLimboFreeSnapshotVersion):Lu.min();let r;var s;return void 0!==e.query.documents?(yu(1===(s=e.query).documents.length),r=Nf(yf(cm(s.documents[0])))):r=function(e){return Nf(vm(e))}(e.query),new Tm(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,nd.fromBase64String(e.resumeToken))}function Lm(e,t){const n=Dm(t.snapshotVersion),r=Dm(t.lastLimboFreeSnapshotVersion);let s;s=hf(t.target)?gm(e.fe,t.target):ym(e.fe,t.target);const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:cf(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Mm(e){const t=vm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Sf(t,t.limit,"L"):t}function Fm(e,t){return new Ip(t.largestBatchId,mm(e.fe,t.overlayMutation))}function Um(e,t){const n=t.path.lastSegment();return[e,gh(t.path.popLast()),n]}function Vm(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Dm(r.readTime),documentKey:gh(r.documentKey.path),largestBatchId:r.largestBatchId}}class zm{getBundleMetadata(e,t){return Bm(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:Rm(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return Bm(e).put({bundleId:(n=t).id,createTime:Dm(rm(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return qm(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:Mm(t.bundledQuery),readTime:Rm(t.readTime)};var t})}saveNamedQuery(e,t){return qm(e).put(function(e){return{name:e.name,readTime:Dm(rm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Bm(e){return Kh(e,"bundles")}function qm(e){return Kh(e,"namedQueries")}class Km{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new Km(e,n)}getOverlay(e,t){return Hm(e).get(Um(this.userId,t)).next(e=>e?Fm(this.serializer,e):null)}getOverlays(e,t){const n=Ff();return eh.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,s)=>{const i=new Ip(t,s);r.push(this.we(e,i))}),eh.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(gh(e.getCollectionPath())));const s=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(Hm(e).J("collectionPathOverlayIndex",r))}),eh.waitFor(s)}getOverlaysForCollection(e,t,n){const r=Ff(),s=gh(t),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Hm(e).j("collectionPathOverlayIndex",i).next(e=>{for(const t of e){const e=Fm(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const s=Ff();let i;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Hm(e).X({index:"collectionGroupOverlayIndex",range:a},(e,t,n)=>{const a=Fm(this.serializer,t);s.size()<r||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):n.done()}).next(()=>s)}we(e,t){return Hm(e).put(function(e,t,n){const[r,s,i]=Um(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:pm(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function Hm(e){return Kh(e,"documentOverlays")}class Gm{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(id(e.integerValue));else if("doubleValue"in e){const n=id(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),ph(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ad(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Td(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):gu()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),zu.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Wm(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Qm(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Wm(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Gm.Ve=new Gm;class Xm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=Qm(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),n=Qm(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Ym{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class $m{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Jm{constructor(){this.je=new Xm,this.ze=new Ym(this.je),this.We=new $m(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Zm{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Zm(this.indexId,this.documentKey,this.arrayValue,n)}}function eg(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=tg(e.arrayValue,t.arrayValue),0!==n?n:(n=tg(e.directionalValue,t.directionalValue),0!==n?n:zu.comparator(e.documentKey,t.documentKey)))}function tg(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class ng{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){yu(e.collectionGroup===this.collectionId);const t=qu(e);if(void 0!==t&&!this.en(t))return!1;const n=Ku(e);let r=new Set,s=0,i=0;for(;s<n.length&&this.en(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[s];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[i++],e))return!1}++s}for(;s<n.length;++s){const e=n[s];if(i>=this.Ye.length||!this.sn(this.Ye[i++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function rg(e){var t,n;if(yu(e instanceof Bd||e instanceof qd),e instanceof Bd){if(e instanceof rf){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>Bd.create(e.field,"==",t)))||[];return qd.create(r,"or")}return e}const r=e.filters.map(e=>rg(e));return qd.create(r,e.op)}function sg(e){if(0===e.getFilters().length)return[];const t=lg(rg(e));return yu(og(t)),ig(t)||ag(t)?[t]:t.getFilters()}function ig(e){return e instanceof Bd}function ag(e){return e instanceof qd&&Gd(e)}function og(e){return ig(e)||ag(e)||function(e){if(e instanceof qd&&Hd(e)){for(const t of e.getFilters())if(!ig(t)&&!ag(t))return!1;return!0}return!1}(e)}function lg(e){if(yu(e instanceof Bd||e instanceof qd),e instanceof Bd)return e;if(1===e.filters.length)return lg(e.filters[0]);const t=e.filters.map(e=>lg(e));let n=qd.create(t,e.op);return n=hg(n),og(n)?n:(yu(n instanceof qd),yu(Kd(n)),yu(n.filters.length>1),n.filters.reduce((e,t)=>cg(e,t)))}function cg(e,t){let n;return yu(e instanceof Bd||e instanceof qd),yu(t instanceof Bd||t instanceof qd),n=e instanceof Bd?t instanceof Bd?function(e,t){return qd.create([e,t],"and")}(e,t):ug(e,t):t instanceof Bd?ug(t,e):function(e,t){if(yu(e.filters.length>0&&t.filters.length>0),Kd(e)&&Kd(t))return Yd(e,t.getFilters());const n=Hd(e)?e:t,r=Hd(e)?t:e,s=n.filters.map(e=>cg(e,r));return qd.create(s,"or")}(e,t),hg(n)}function ug(e,t){if(Kd(t))return Yd(t,e.getFilters());{const n=t.filters.map(t=>cg(e,t));return qd.create(n,"or")}}function hg(e){if(yu(e instanceof Bd||e instanceof qd),e instanceof Bd)return e;const t=e.getFilters();if(1===t.length)return hg(t[0]);if(Wd(e))return e;const n=t.map(e=>hg(e)),r=[];return n.forEach(t=>{t instanceof Bd?r.push(t):t instanceof qd&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:qd.create(r,e.op)}class dg{constructor(){this.rn=new fg}addToCollectionParentIndex(e,t){return this.rn.add(t),eh.resolve()}getCollectionParents(e,t){return eh.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return eh.resolve()}deleteFieldIndex(e,t){return eh.resolve()}getDocumentsMatchingTarget(e,t){return eh.resolve(null)}getIndexType(e,t){return eh.resolve(0)}getFieldIndexes(e,t){return eh.resolve([])}getNextCollectionGroupToUpdate(e){return eh.resolve(null)}getMinOffset(e,t){return eh.resolve(Xu.min())}getMinOffsetFromCollectionGroup(e,t){return eh.resolve(Xu.min())}updateCollectionGroup(e,t,n){return eh.resolve()}updateIndexEntries(e,t){return eh.resolve()}}class fg{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new $h(Fu.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new $h(Fu.comparator)).toArray()}}const pg=new Uint8Array(0);class mg{constructor(e,t){this.user=e,this.databaseId=t,this.on=new fg,this.un=new Df(e=>cf(e),(e,t)=>uf(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:n,parent:gh(r)};return gg(e).put(s)}return eh.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Pu(t),""],!1,!0);return gg(e).j(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(bh(r.parent))}return n})}addFieldIndex(e,t){const n=vg(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const s=n.add(r);if(t.indexState){const n=bg(e);return s.next(e=>{n.put(Vm(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const n=vg(e),r=bg(e),s=yg(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=yg(e);let r=!0;const s=new Map;return eh.forEach(this.cn(t),t=>this.an(e,t).next(e=>{r&&(r=!!e),s.set(t,e)})).next(()=>{if(r){let e=qf();const r=[];return eh.forEach(s,(s,i)=>{var a;du("IndexedDbIndexManager","Using index ".concat((a=s,"id=".concat(a.indexId,"|cg=").concat(a.collectionGroup,"|f=").concat(a.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(",")))," to execute ").concat(cf(t)));const o=function(e,t){const n=qu(t);if(void 0===n)return null;for(const r of df(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(i,s),l=function(e,t){const n=new Map;for(const r of Ku(t))for(const t of df(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,s),c=function(e,t){const n=[];let r=!0;for(const s of Ku(t)){const t=0===s.kind?ff(e,s.fieldPath,e.startAt):pf(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Ld(n,r)}(i,s),u=function(e,t){const n=[];let r=!0;for(const s of Ku(t)){const t=0===s.kind?pf(e,s.fieldPath,e.endAt):ff(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Ld(n,r)}(i,s),h=this.hn(s,i,c),d=this.hn(s,i,u),f=this.ln(s,i,l),p=this.fn(s.indexId,o,h,c.inclusive,d,u.inclusive,f);return eh.forEach(p,s=>n.H(s,t.limit).next(t=>{t.forEach(t=>{const n=zu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return eh.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:sg(qd.create(e.filters,"and")).map(t=>lf(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,n,r,s,i,a){const o=(null!=t?t.length:1)*Math.max(n.length,s.length),l=o/(null!=t?t.length:1),c=[];for(let u=0;u<o;++u){const o=t?this.dn(t[u/l]):pg,h=this.wn(e,o,n[u%l],r),d=this._n(e,o,s[u%l],i),f=a.map(t=>this.wn(e,o,t,!0));c.push(...this.createRange(h,d,f))}return c}wn(e,t,n,r){const s=new Zm(e,zu.empty(),t,n);return r?s:s.Je()}_n(e,t,n,r){const s=new Zm(e,zu.empty(),t,n);return r?s.Je():s}an(e,t){const n=new ng(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.cn(t);return eh.forEach(r,t=>this.an(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new $h(Vu.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}mn(e,t){const n=new Jm;for(const r of Ku(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.He(r.kind);Gm.Ve._e(e,s)}return n.Qe()}dn(e){const t=new Jm;return Gm.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new Jm;return Gm.Ve._e(wd(this.databaseId,t),n.He(function(e){const t=Ku(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new Jm);let s=0;for(const i of Ku(e)){const e=n[s++];for(const n of r)if(this.yn(t,i.fieldPath)&&Nd(e))r=this.pn(r,i,e);else{const t=n.He(i.kind);Gm.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],s=[];for(const i of n.arrayValue.values||[])for(const e of r){const n=new Jm;n.seed(e.Qe()),Gm.Ve._e(i,n.He(t.kind)),s.push(n)}return s}yn(e,t){return!!e.filters.find(e=>e instanceof Bd&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=vg(e),r=bg(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next(e=>{const t=[];return eh.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new Gu(t.sequenceNumber,new Xu(Rm(t.readTime),new zu(bh(t.documentKey)),t.largestBatchId)):Gu.empty(),r=e.fields.map(e=>{let[t,n]=e;return new Hu(Vu.fromServerFormat(t),n)});return new Bu(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Du(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=vg(e),s=bg(e);return this.Tn(e).next(e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>eh.forEach(t,t=>s.put(Vm(t.indexId,this.user,e,n)))))}updateIndexEntries(e,t){const n=new Map;return eh.forEach(t,(t,r)=>{const s=n.get(t.collectionGroup);return(s?eh.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next(s=>(n.set(t.collectionGroup,s),eh.forEach(s,n=>this.En(e,t,n).next(t=>{const s=this.An(r,n);return t.isEqual(s)?eh.resolve():this.vn(e,r,n,t,s)}))))})}Rn(e,t,n,r){return yg(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return yg(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=yg(e);let s=new $h(eg);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(e,r)=>{s=s.add(new Zm(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>s)}An(e,t){let n=new $h(eg);const r=this.mn(t,e);if(null==r)return n;const s=qu(t);if(null!=s){const i=e.data.field(s.fieldPath);if(Nd(i))for(const s of i.arrayValue.values||[])n=n.add(new Zm(t.indexId,e.key,this.dn(s),r))}else n=n.add(new Zm(t.indexId,e.key,pg,r));return n}vn(e,t,n,r,s){du("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,s){const i=e.getIterator(),a=t.getIterator();let o=Zh(i),l=Zh(a);for(;o||l;){let e=!1,t=!1;if(o&&l){const r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=Zh(a)):t?(s(o),o=Zh(i)):(o=Zh(i),l=Zh(a))}}(r,s,eg,r=>{i.push(this.Rn(e,t,n,r))},r=>{i.push(this.Pn(e,t,n,r))}),eh.waitFor(i)}Tn(e){let t=1;return bg(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>eg(e,t)).filter((e,t,n)=>!t||0!==eg(e,n[t-1]));const r=[];r.push(e);for(const i of n){const n=eg(i,e),s=eg(i,t);if(0===n)r[0]=e.Je();else if(n>0&&s<0)r.push(i),r.push(i.Je());else if(s>0)break}r.push(t);const s=[];for(let i=0;i<r.length;i+=2){if(this.bn(r[i],r[i+1]))return[];const e=[r[i].indexId,this.uid,r[i].arrayValue,r[i].directionalValue,pg,[]],t=[r[i+1].indexId,this.uid,r[i+1].arrayValue,r[i+1].directionalValue,pg,[]];s.push(IDBKeyRange.bound(e,t))}return s}bn(e,t){return eg(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xg)}getMinOffset(e,t){return eh.mapArray(this.cn(t),t=>this.an(e,t).next(e=>e||gu())).next(xg)}}function gg(e){return Kh(e,"collectionParents")}function yg(e){return Kh(e,"indexEntries")}function vg(e){return Kh(e,"indexConfiguration")}function bg(e){return Kh(e,"indexState")}function xg(e){yu(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;Yu(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Xu(t.readTime,t.documentKey,n)}const wg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class kg{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new kg(e,kg.DEFAULT_COLLECTION_PERCENTILE,kg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ng(e,t,n){const r=e.store("mutations"),s=e.store("documentMutations"),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.X({range:a},(e,t,n)=>(o++,n.delete()));i.push(l.next(()=>{yu(1===o)}));const c=[];for(const u of n.mutations){const e=kh(t,u.key.path,n.batchId);i.push(s.delete(e)),c.push(u.key)}return eh.waitFor(i).next(()=>c)}function Sg(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw gu();t=e.noDocument}return JSON.stringify(t).length}kg.DEFAULT_COLLECTION_PERCENTILE=10,kg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kg.DEFAULT=new kg(41943040,kg.DEFAULT_COLLECTION_PERCENTILE,kg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kg.DISABLED=new kg(-1,0,0);class Eg{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){yu(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Eg(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _g(e).X({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=Tg(e),i=_g(e);return i.add({}).next(a=>{yu("number"==typeof a);const o=new Sp(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>pm(e.fe,t)),s=n.mutations.map(t=>pm(e.fe,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,o),c=[];let u=new $h((e,t)=>Du(e.canonicalString(),t.canonicalString()));for(const e of r){const t=kh(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(i.put(l)),c.push(s.put(t,Nh))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Vn[a]=o.keys()}),eh.waitFor(c).next(()=>o)})}lookupMutationBatch(e,t){return _g(e).get(t).next(e=>e?(yu(e.userId===this.userId),Pm(this.serializer,e)):null)}Sn(e,t){return this.Vn[t]?eh.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return _g(e).X({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(yu(t.batchId>=n),s=Pm(this.serializer,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return _g(e).X({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _g(e).j("userMutationsIndex",t).next(e=>e.map(e=>Pm(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=wh(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return Tg(e).X({range:r},(n,r,i)=>{const[a,o,l]=n,c=bh(o);if(a===this.userId&&t.path.isEqual(c))return _g(e).get(l).next(e=>{if(!e)throw gu();yu(e.userId===this.userId),s.push(Pm(this.serializer,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $h(Du);const r=[];return t.forEach(t=>{const s=wh(this.userId,t.path),i=IDBKeyRange.lowerBound(s),a=Tg(e).X({range:i},(e,r,s)=>{const[i,a,o]=e,l=bh(a);i===this.userId&&t.path.isEqual(l)?n=n.add(o):s.done()});r.push(a)}),eh.waitFor(r).next(()=>this.Dn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=wh(this.userId,n),i=IDBKeyRange.lowerBound(s);let a=new $h(Du);return Tg(e).X({range:i},(e,t,s)=>{const[i,o,l]=e,c=bh(o);i===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):s.done()}).next(()=>this.Dn(e,a))}Dn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(_g(e).get(t).next(e=>{if(null===e)throw gu();yu(e.userId===this.userId),n.push(Pm(this.serializer,e))}))}),eh.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return Ng(e.ht,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),eh.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return eh.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return Tg(e).X({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=bh(e[1]);r.push(t)}else n.done()}).next(()=>{yu(0===r.length)})})}containsKey(e,t){return Ig(e,this.userId,t)}xn(e){return Cg(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ig(e,t,n){const r=wh(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return Tg(e).X({range:i,Y:!0},(e,n,r)=>{const[i,o,l]=e;i===t&&o===s&&(a=!0),r.done()}).next(()=>a)}function _g(e){return Kh(e,"mutations")}function Tg(e){return Kh(e,"documentMutations")}function Cg(e){return Kh(e,"mutationQueues")}class jg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new jg(0)}static Mn(){return new jg(-1)}}class Ag{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const n=new jg(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(e=>Lu.fromTimestamp(new Ou(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.$n(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Dg(e).delete(t.targetId)).next(()=>this.$n(e)).next(t=>(yu(t.targetCount>0),t.targetCount-=1,this.On(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return Dg(e).X((i,a)=>{const o=Om(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,s.push(this.removeTargetData(e,o)))}).next(()=>eh.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Dg(e).X((e,n)=>{const r=Om(n);t(r)})}$n(e){return Rg(e).get("targetGlobalKey").next(e=>(yu(null!==e),e))}On(e,t){return Rg(e).put("targetGlobalKey",t)}Fn(e,t){return Dg(e).put(Lm(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next(e=>e.targetCount)}getTargetData(e,t){const n=cf(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Dg(e).X({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const i=Om(n);uf(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=Pg(e);return t.forEach(t=>{const i=gh(t.path);r.push(s.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))}),eh.waitFor(r)}removeMatchingKeys(e,t,n){const r=Pg(e);return eh.forEach(t,t=>{const s=gh(t.path);return eh.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Pg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Pg(e);let s=qf();return r.X({range:n,Y:!0},(e,t,n)=>{const r=bh(e[1]),i=new zu(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=gh(t.path),r=IDBKeyRange.bound([n],[Pu(n)],!1,!0);let s=0;return Pg(e).X({index:"documentTargetsIndex",Y:!0,range:r},(e,t,n)=>{let[r,i]=e;0!==r&&(s++,n.done())}).next(()=>s>0)}le(e,t){return Dg(e).get(t).next(e=>e?Om(e):null)}}function Dg(e){return Kh(e,"targets")}function Rg(e){return Kh(e,"targetGlobal")}function Pg(e){return Kh(e,"targetDocuments")}function Og(e,t){let[n,r]=e,[s,i]=t;const a=Du(n,s);return 0===a?Du(r,i):a}class Lg{constructor(e){this.Ln=e,this.buffer=new $h(Og),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Og(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Mg{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){du("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ih(e)?du("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Zu(e)}await this.Qn(3e5)})}}class Fg{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return eh.resolve(dh.ct);const n=new Lg(t);return this.jn.forEachTarget(e,e=>n.Kn(e.sequenceNumber)).next(()=>this.jn.Wn(e,e=>n.Kn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(du("LruGarbageCollector","Garbage collection skipped; disabled"),eh.resolve(wg)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(du("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),wg):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(du("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),hu()<=dt.DEBUG&&du("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),eh.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function Ug(e,t){return new Fg(e,t)}class Vg{constructor(e,t){this.db=e,this.garbageCollector=Ug(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Jn(e){let t=0;return this.Wn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(e,n)=>t(n))}addReference(e,t,n){return zg(e,n)}removeReference(e,t,n){return zg(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return zg(e,t)}Xn(e,t){return function(e,t){let n=!1;return Cg(e).Z(r=>Ig(e,r,t).next(e=>(e&&(n=!0),eh.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,(i,a)=>{if(a<=t){const t=this.Xn(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Lu.min()),Pg(e).delete([0,gh(i.path)])))});r.push(t)}}).next(()=>eh.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return zg(e,t)}Yn(e,t){const n=Pg(e);let r,s=dh.ct;return n.X({index:"documentTargetsIndex"},(e,n)=>{let[i,a]=e,{path:o,sequenceNumber:l}=n;0===i?(s!==dh.ct&&t(new zu(bh(r)),s),s=l,r=o):s=dh.ct}).next(()=>{s!==dh.ct&&t(new zu(bh(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zg(e,t){return Pg(e).put(function(e,t){return{targetId:0,path:gh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Bg{constructor(){this.changes=new Df(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Od.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?eh.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qg{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Wg(e).put(n)}removeEntry(e,t,n){return Wg(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Am(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Zn(e,n)))}getEntry(e,t){let n=Od.newInvalidDocument(t);return Wg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Qg(t))},(e,r)=>{n=this.ts(t,r)}).next(()=>n)}es(e,t){let n={size:0,document:Od.newInvalidDocument(t)};return Wg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Qg(t))},(e,r)=>{n={document:this.ts(t,r),size:Sg(r)}}).next(()=>n)}getEntries(e,t){let n=Pf();return this.ns(e,t,(e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)}).next(()=>n)}ss(e,t){let n=Pf(),r=new Qh(zu.comparator);return this.ns(e,t,(e,t)=>{const s=this.ts(e,t);n=n.insert(e,s),r=r.insert(e,Sg(t))}).next(()=>({documents:n,rs:r}))}ns(e,t,n){if(t.isEmpty())return eh.resolve();let r=new $h(Yg);t.forEach(e=>r=r.add(e));const s=IDBKeyRange.bound(Qg(r.first()),Qg(r.last())),i=r.getIterator();let a=i.getNext();return Wg(e).X({index:"documentKeyIndex",range:s},(e,t,r)=>{const s=zu.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Yg(a,s)<0;)n(a,null),a=i.getNext();a&&a.isEqual(s)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.G(Qg(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n,r){const s=t.path,i=[s.popLast().toArray(),s.lastSegment(),Am(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wg(e).j(IDBKeyRange.bound(i,a,!0)).next(e=>{let n=Pf();for(const s of e){const e=this.ts(zu.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(Tf(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let s=Pf();const i=Xg(t,n),a=Xg(t,Xu.max());return Wg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(e,t,n)=>{const i=this.ts(zu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(i.key,i),s.size===r&&n.done()}).next(()=>s)}newChangeBuffer(e){return new Hg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Gg(e).get("remoteDocumentGlobalKey").next(e=>(yu(!!e),e))}Zn(e,t){return Gg(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=fm(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=zu.fromSegments(t.noDocument.path),r=Rm(t.noDocument.readTime);n=Od.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return gu();{const e=zu.fromSegments(t.unknownDocument.path),r=Rm(t.unknownDocument.version);n=Od.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Ou(e[0],e[1]);return Lu.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Lu.min()))return e}return Od.newInvalidDocument(e)}}function Kg(e){return new qg(e)}class Hg extends Bg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Df(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new $h((e,t)=>Du(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const a=this.us.get(s);if(t.push(this.os.removeEntry(e,s,a.readTime)),i.isValidDocument()){const o=jm(this.os.serializer,i);r=r.add(s.path.popLast());const l=Sg(o);n+=l-a.size,t.push(this.os.addEntry(e,s,o))}else if(n-=a.size,this.trackRemovals){const n=jm(this.os.serializer,i.convertToNoDocument(Lu.min()));t.push(this.os.addEntry(e,s,n))}}),r.forEach(n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.os.updateMetadata(e,n)),eh.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(e=>{let{documents:t,rs:n}=e;return n.forEach((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function Gg(e){return Kh(e,"remoteDocumentGlobal")}function Wg(e){return Kh(e,"remoteDocumentsV14")}function Qg(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Xg(e,t){const n=t.documentKey.path.toArray();return[e,Am(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Yg(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Du(n[i],r[i]),s)return s;return s=Du(n.length,r.length),s||(s=Du(n[n.length-2],r[r.length-2]),s||Du(n[n.length-1],r[r.length-1]))}class $g{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Jg{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&pp(n.mutation,e,ed.empty(),Ou.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,qf()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qf();const r=Ff();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Lf();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Ff();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,qf()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Pf();const i=Vf(),a=Vf();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof vp)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),pp(a.mutation,t,a.mutation.getFieldMask(),Ou.now())):i.set(t.key,ed.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new $g(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Vf();let r=new Qh((e,t)=>e-t),s=qf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||ed.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||qf()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Uf();l.forEach(e=>{if(!s.has(e)){const r=dp(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return eh.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return zu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):eh.resolve(Ff());let a=-1,o=s;return i.next(t=>eh.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?eh.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,qf())).next(e=>({batchId:a,changes:Mf(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zu(t)).next(e=>{let t=Lf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let s=Lf();return this.indexManager.getCollectionParents(e,r).next(i=>eh.forEach(i,i=>{const a=function(e,t){return new mf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Od.newInvalidDocument(r)))});let n=Lf();return e.forEach((e,s)=>{const i=r.get(e);void 0!==i&&pp(i.mutation,s,ed.empty(),Ou.now()),Tf(t,s)&&(n=n.insert(e,s))}),n})}}class Zg{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return eh.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:rm(n.createTime)}),eh.resolve()}getNamedQuery(e,t){return eh.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Mm(e.bundledQuery),readTime:rm(e.readTime)}}(t)),eh.resolve()}}class ey{constructor(){this.overlays=new Qh(zu.comparator),this.ls=new Map}getOverlay(e,t){return eh.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ff();return eh.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),eh.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),eh.resolve()}getOverlaysForCollection(e,t,n){const r=Ff(),s=t.length+1,i=new zu(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return eh.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Qh((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Ff(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Ff(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return eh.resolve(a)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ip(t,n));let s=this.ls.get(t);void 0===s&&(s=qf(),this.ls.set(t,s)),this.ls.set(t,s.add(n.key))}}class ty{constructor(){this.fs=new $h(ny.ds),this.ws=new $h(ny._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new ny(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new ny(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new zu(new Fu([])),n=new ny(t,e),r=new ny(t,e+1),s=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),s.push(e.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new zu(new Fu([])),n=new ny(t,e),r=new ny(t,e+1);let s=qf();return this.ws.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new ny(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ny{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return zu.comparator(e.key,t.key)||Du(e.As,t.As)}static _s(e,t){return Du(e.As,t.As)||zu.comparator(e.key,t.key)}}class ry{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new $h(ny.ds)}checkEmpty(e){return eh.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Sp(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Rs=this.Rs.add(new ny(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return eh.resolve(i)}lookupMutationBatch(e,t){return eh.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),s=r<0?0:r;return eh.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return eh.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return eh.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ny(t,0),r=new ny(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);s.push(t)}),eh.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $h(Du);return t.forEach(e=>{const t=new ny(e,0),r=new ny(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),eh.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;zu.isDocumentKey(s)||(s=s.child(""));const i=new ny(new zu(s),0);let a=new $h(Du);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.As)),!0)},i),eh.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){yu(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return eh.forEach(t.mutations,r=>{const s=new ny(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new ny(t,0),r=this.Rs.firstAfterOrEqual(n);return eh.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,eh.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sy{constructor(e){this.Ds=e,this.docs=new Qh(zu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return eh.resolve(n?n.document.mutableCopy():Od.newInvalidDocument(t))}getEntries(e,t){let n=Pf();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Od.newInvalidDocument(e))}),eh.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Pf();const i=t.path,a=new zu(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Yu(Qu(a),n)<=0||(r.has(a.key)||Tf(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return eh.resolve(s)}getAllFromCollectionGroup(e,t,n,r){gu()}Cs(e,t){return eh.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new iy(this)}getSize(e){return eh.resolve(this.size)}}class iy extends Bg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),eh.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class ay{constructor(e){this.persistence=e,this.xs=new Df(e=>cf(e),uf),this.lastRemoteSnapshotVersion=Lu.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ty,this.targetCount=0,this.Ms=jg.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),eh.resolve()}getLastRemoteSnapshotVersion(e){return eh.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return eh.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),eh.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),eh.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new jg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,eh.resolve()}updateTargetData(e,t){return this.Fn(t),eh.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,eh.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.xs.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.xs.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),eh.waitFor(s).next(()=>r)}getTargetCount(e){return eh.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return eh.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),eh.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),eh.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),eh.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return eh.resolve(n)}containsKey(e,t){return eh.resolve(this.ks.containsKey(t))}}class oy{constructor(e,t){this.$s={},this.overlays={},this.Os=new dh(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ay(this),this.indexManager=new dg,this.remoteDocumentCache=function(e){return new sy(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new Cm(t),this.qs=new Zg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ey,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new ry(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){du("MemoryPersistence","Starting transaction:",e);const r=new ly(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return eh.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class ly extends Ju{constructor(e){super(),this.currentSequenceNumber=e}}class cy{constructor(e){this.persistence=e,this.Qs=new ty,this.js=null}static zs(e){return new cy(e)}get Ws(){if(this.js)return this.js;throw gu()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),eh.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),eh.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),eh.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return eh.forEach(this.Ws,n=>{const r=zu.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,Lu.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return eh.or([()=>eh.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class uy{constructor(e){this.serializer=e}O(e,t,n,r){const s=new th("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xh,{unique:!0}),e.createObjectStore("documentMutations")}(e),hy(e),function(e){e.createObjectStore("remoteDocuments")}(e));let i=eh.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),hy(e)),i=i.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lu.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store("mutations").j().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xh,{unique:!0});const r=t.store("mutations"),s=n.map(e=>r.put(e));return eh.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.Ys(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),n<7&&r>=7&&(i=i.next(()=>this.Zs(s))),n<8&&r>=8&&(i=i.next(()=>this.ti(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(i=i.next(()=>this.ei(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Oh});t.createIndex("collectionPathOverlayIndex",Lh,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Mh,{unique:!1})}(e)})),n<13&&r>=13&&(i=i.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Sh});t.createIndex("documentKeyIndex",Eh),t.createIndex("collectionGroupIndex",Ih)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(i=i.next(()=>this.si(e,s))),n<15&&r>=15&&(i=i.next(()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Ah}).createIndex("sequenceNumberIndex",Dh,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Rh}).createIndex("documentKeyIndex",Ph,{unique:!1})}(e))),i}Xs(e){let t=0;return e.store("remoteDocuments").X((e,n)=>{t+=Sg(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next(t=>eh.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next(n=>eh.forEach(n,n=>{yu(n.userId===t.userId);const r=Pm(this.serializer,n);return Ng(e,t.userId,r).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.X((n,s)=>{const i=new Fu(n),a=function(e){return[0,gh(e)]}(i);r.push(t.get(a).next(n=>n?eh.resolve():(n=>t.put({targetId:0,path:gh(n),sequenceNumber:e.highestListenSequenceNumber}))(i)))}).next(()=>eh.waitFor(r))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:jh});const n=t.store("collectionParents"),r=new fg,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:gh(r)})}};return t.store("remoteDocuments").X({Y:!0},(e,t)=>{const n=new Fu(e);return s(n.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},(e,t)=>{let[n,r,i]=e;const a=bh(r);return s(a.popLast())}))}ei(e){const t=e.store("targets");return t.X((e,n)=>{const r=Om(n),s=Lm(this.serializer,r);return t.put(s)})}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X((e,n)=>{const s=t.store("remoteDocumentsV14"),i=(a=n,a.document?new zu(Fu.fromString(a.document.name).popFirst(5)):a.noDocument?zu.fromSegments(a.noDocument.path):a.unknownDocument?zu.fromSegments(a.unknownDocument.path):gu()).path.toArray();var a;const o={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(s.put(o))}).next(()=>eh.waitFor(r))}si(e,t){const n=t.store("mutations"),r=Kg(this.serializer),s=new oy(cy.zs,this.serializer.fe);return n.j().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:qf();Pm(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),eh.forEach(n,(e,n)=>{const i=new lu(n),a=Km.de(this.serializer,i),o=s.getIndexManager(i),l=Eg.de(i,this.serializer,o,s.referenceDelegate);return new Jg(r,l,a,o).recalculateAndSaveOverlaysForDocumentKeys(new qh(t,dh.ct),e).next()})})}}function hy(e){e.createObjectStore("targetDocuments",{keyPath:Th}).createIndex("documentTargetsIndex",Ch,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_h,{unique:!0}),e.createObjectStore("targetGlobal")}const dy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fy{constructor(e,t,n,r,s,i,a,o,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=s,this.window=i,this.document=a,this.ri=l,this.oi=c,this.ui=u,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!fy.D())throw new xu(bu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vg(this,r),this.di=t+"main",this.serializer=new Cm(o),this.wi=new nh(this.di,this.ui,new uy(this.serializer)),this.Bs=new Ag(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Kg(this.serializer),this.qs=new zm,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===c&&fu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xu(bu.FAILED_PRECONDITION,dy);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new dh(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>my(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(ih(e))return du("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return du("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return py(e).get("owner").next(e=>eh.resolve(this.Ri(e)))}Pi(e){return my(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Kh(e,"clientMetadata");return t.j().next(e=>{const n=this.Si(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return eh.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?eh.resolve(!0):py(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new xu(bu.FAILED_PRECONDITION,dy);return!1}}return!(!this.networkEnabled||!this.inForeground)||my(e).j().next(e=>void 0===this.Si(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&du("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new qh(e,dh.ct);return this.Ai(t).next(()=>this.Pi(t))}),this.wi.close(),this.Mi()}Si(e,t){return e.filter(e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>my(e).j().next(e=>this.Si(e,18e5).map(e=>e.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Eg.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mg(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Km.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){du("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(i=this.ui)?Bh:14===i?zh:13===i?Vh:12===i?Uh:11===i?Fh:void gu();var i;let a;return this.wi.runTransaction(e,r,s,r=>(a=new qh(r,this.Os?this.Os.next():dh.ct),"readwrite-primary"===t?this.Ti(a).next(e=>!!e||this.Ei(a)).next(t=>{if(!t)throw fu("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new xu(bu.FAILED_PRECONDITION,$u);return n(a)}).next(e=>this.vi(a).next(()=>e)):this.Oi(a).next(()=>n(a)))).then(e=>(a.raiseOnCommittedEvent(),e))}Oi(e){return py(e).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new xu(bu.FAILED_PRECONDITION,dy)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return py(e).put("owner",t)}static D(){return nh.D()}Ai(e){const t=py(e);return t.get("owner").next(e=>this.Ri(e)?(du("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):eh.resolve())}Vi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(fu("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;!Qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return du("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return fu("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){fu("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function py(e){return Kh(e,"owner")}function my(e){return Kh(e,"clientMetadata")}function gy(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class yy{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=qf(),r=qf();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new yy(e,t.fromCache,n,r)}}class vy{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(vf(t))return eh.resolve(null);let n=Nf(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Sf(t,null,"F"),n=Nf(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=qf(...r);return this.Ui.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ji(t,r);return this.zi(t,i,s,n.readTime)?this.Ki(e,Sf(t,null,"F")):this.Wi(e,i,t,n)}))})))}Gi(e,t,n,r){return vf(t)||r.isEqual(Lu.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(s=>{const i=this.ji(t,s);return this.zi(t,i,n,r)?this.Qi(e,t):(hu()<=dt.DEBUG&&du("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_f(t)),this.Wi(e,i,t,Wu(r,-1)))})}ji(e,t){let n=new $h(jf(e));return t.forEach((t,r)=>{Tf(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return hu()<=dt.DEBUG&&du("QueryEngine","Using full collection scan to execute query:",_f(t)),this.Ui.getDocumentsMatchingQuery(e,t,Xu.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class by{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Qh(Du),this.Yi=new Df(e=>cf(e),uf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jg(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function xy(e,t,n,r){return new by(e,t,n,r)}async function wy(e,t){const n=vu(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=qf();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({er:e,removedBatchIds:s,addedBatchIds:i}))})})}function ky(e){const t=vu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Ny(e,t,n){let r=qf(),s=qf();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Pf();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Lu.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):du("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{nr:r,sr:s}})}function Sy(e,t){const n=vu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ey(e,t){const n=vu(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(s=>s?(r=s,eh.resolve(r)):n.Bs.allocateTargetId(e).next(s=>(r=new Tm(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function Iy(e,t,n){const r=vu(e),s=r.Ji.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!ih(e))throw e;du("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(s.target)}function _y(e,t,n){const r=vu(e);let s=Lu.min(),i=qf();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=vu(e),s=r.Yi.get(n);return void 0!==s?eh.resolve(r.Ji.get(s)):r.Bs.getTargetData(t,n)}(r,e,Nf(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?s:Lu.min(),n?i:qf())).next(e=>(Ty(r,Cf(t),e),{documents:e,ir:i})))}function Ty(e,t,n){let r=e.Xi.get(t)||Lu.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class Cy{constructor(){this.activeTargetIds=Hf()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jy{constructor(){this.Hr=new Cy,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Cy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ay{Yr(e){}shutdown(){}}class Dy{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){du("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){du("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ry=null;function Py(){return null===Ry?Ry=268435456+Math.round(2147483648*Math.random()):Ry++,"0x"+Ry.toString(16)}const Oy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ly{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const My="WebChannelConnection";class Fy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,s){const i=Py(),a=this.To(e,t);du("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={};return this.Eo(o,r,s),this.Ao(e,a,o,n).then(t=>(du("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw pu("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}vo(e,t,n,r,s,i){return this.Io(e,t,n,r,s)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+cu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=Oy[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const s=Py();return new Promise((i,a)=>{const o=new su;o.setWithCredentials(!0),o.listenOnce(Zc.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Jc.NO_ERROR:const t=o.getResponseJson();du(My,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case Jc.TIMEOUT:du(My,"RPC '".concat(e,"' ").concat(s," timed out")),a(new xu(bu.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:const n=o.getStatus();if(du(My,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(bu).indexOf(t)>=0?t:bu.UNKNOWN}(t.status);a(new xu(e,t.message))}else a(new xu(bu.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new xu(bu.UNAVAILABLE,"Connection failed."));break;default:gu()}}finally{du(My,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);du(My,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=Py(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Yc(),a=$c(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new nu({})),this.Eo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");du(My,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);let h=!1,d=!1;const f=new Ly({ro:t=>{d?du(My,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(du(My,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),du(My,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,ru.EventType.OPEN,()=>{d||du(My,"RPC '".concat(e,"' stream ").concat(r," transport opened."))}),p(u,ru.EventType.CLOSE,()=>{d||(d=!0,du(My,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())}),p(u,ru.EventType.ERROR,t=>{d||(d=!0,pu(My,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new xu(bu.UNAVAILABLE,"The operation could not be completed")))}),p(u,ru.EventType.MESSAGE,t=>{var n;if(!d){const s=t.data[0];yu(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){du(My,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Tp[e];if(void 0!==t)return Ap(t)}(t),s=a.message;void 0===n&&(n=bu.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),d=!0,f.wo(new xu(n,s)),u.close()}else du(My,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f._o(s)}}),p(a,eu.STAT_EVENT,t=>{t.stat===tu.PROXY?du(My,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===tu.NOPROXY&&du(My,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.fo()},0),f}}function Uy(){return"undefined"!=typeof window?window:null}function Vy(){return"undefined"!=typeof document?document:null}function zy(e){return new Jp(e,!0)}class By{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&du("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class qy{constructor(e,t,n,r,s,i,a,o){this.ii=e,this.$o=n,this.Oo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new By(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===bu.RESOURCE_EXHAUSTED?(fu(t.toString()),fu("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===bu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new xu(bu.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return du("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(du("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ky extends qy{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:gu()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(yu(void 0===t||"string"==typeof t),nd.fromBase64String(t||"")):(yu(void 0===t||t instanceof Uint8Array),nd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?bu.UNKNOWN:Ap(e.code);return new xu(t,e.message||"")}(a);n=new Kp(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=om(e,r.document.name),i=rm(r.document.updateTime),a=r.document.createTime?rm(r.document.createTime):Lu.min(),o=new Rd({mapValue:{fields:r.document.fields}}),l=Od.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Bp(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=om(e,r.document),i=r.readTime?rm(r.readTime):Lu.min(),a=Od.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Bp([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=om(e,r.document),i=r.removedTargetIds||[];n=new Bp([],i,s,null)}else{if(!("filter"in t))return gu();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new _p(r,s),a=e.targetId;n=new qp(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Lu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Lu.min():t.readTime?rm(t.readTime):Lu.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=um(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=hf(r)?{documents:gm(e,r)}:{query:ym(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=tm(e,t.resumeToken);const r=Zp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Lu.min())>0){n.readTime=em(e,t.snapshotVersion.toTimestamp());const r=Zp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=um(this.serializer),t.removeTarget=e,this.Wo(t)}}class Hy extends qy{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(yu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(yu(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?rm(e.updateTime):rm(t);return n.isEqual(Lu.min())&&(n=rm(t)),new lp(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=rm(e.commitTime);return this.listener.cu(n,t)}return yu(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=um(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>pm(this.serializer,e))};this.Wo(t)}}class Gy extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new xu(bu.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,i]=r;return this.connection.Io(e,t,n,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===bu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xu(bu.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.vo(e,t,n,i,a,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===bu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xu(bu.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class Wy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(fu(t),this.mu=!1):du("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Qy{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{rv(this)&&(du("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=vu(e);t.vu.add(4),await Yy(t),t.bu.set("Unknown"),t.vu.delete(4),await Xy(t)}(this))})}),this.bu=new Wy(n,r)}}async function Xy(e){if(rv(e))for(const t of e.Ru)await t(!0)}async function Yy(e){for(const t of e.Ru)await t(!1)}function $y(e,t){const n=vu(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),nv(n)?tv(n):wv(n).Ko()&&Zy(n,t))}function Jy(e,t){const n=vu(e),r=wv(n);n.Au.delete(t),r.Ko()&&ev(n,t),0===n.Au.size&&(r.Ko()?r.jo():rv(n)&&n.bu.set("Unknown"))}function Zy(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Lu.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wv(e).su(t)}function ev(e,t){e.Vu.qt(t),wv(e).iu(t)}function tv(e){e.Vu=new Gp({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),wv(e).start(),e.bu.gu()}function nv(e){return rv(e)&&!wv(e).Uo()&&e.Au.size>0}function rv(e){return 0===vu(e).vu.size}function sv(e){e.Vu=void 0}async function iv(e){e.Au.forEach((t,n)=>{Zy(e,t)})}async function av(e,t){sv(e),nv(e)?(e.bu.Iu(t),tv(e)):e.bu.set("Unknown")}async function ov(e,t,n){if(e.bu.set("Online"),t instanceof Kp&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){du("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await lv(e,n)}else if(t instanceof Bp?e.Vu.Ht(t):t instanceof qp?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Lu.min()))try{const t=await ky(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Au.get(r);s&&e.Au.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(nd.EMPTY_BYTE_STRING,r.snapshotVersion)),ev(e,t);const s=new Tm(r.target,t,n,r.sequenceNumber);Zy(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){du("RemoteStore","Failed to raise snapshot:",t),await lv(e,t)}}async function lv(e,t,n){if(!ih(t))throw t;e.vu.add(1),await Yy(e),e.bu.set("Offline"),n||(n=()=>ky(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{du("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Xy(e)})}function cv(e,t){return t().catch(n=>lv(e,n,t))}async function uv(e){const t=vu(e),n=kv(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;hv(t);)try{const e=await Sy(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,dv(t,e)}catch(e){await lv(t,e)}fv(t)&&pv(t)}function hv(e){return rv(e)&&e.Eu.length<10}function dv(e,t){e.Eu.push(t);const n=kv(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function fv(e){return rv(e)&&!kv(e).Uo()&&e.Eu.length>0}function pv(e){kv(e).start()}async function mv(e){kv(e).hu()}async function gv(e){const t=kv(e);for(const n of e.Eu)t.uu(n.mutations)}async function yv(e,t,n){const r=e.Eu.shift(),s=Ep.from(r,t,n);await cv(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await uv(e)}async function vv(e,t){t&&kv(e).ou&&await async function(e,t){if(jp(n=t.code)&&n!==bu.ABORTED){const n=e.Eu.shift();kv(e).Qo(),await cv(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await uv(e)}var n}(e,t),fv(e)&&pv(e)}async function bv(e,t){const n=vu(e);n.asyncQueue.verifyOperationInProgress(),du("RemoteStore","RemoteStore received new credentials");const r=rv(n);n.vu.add(3),await Yy(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Xy(n)}async function xv(e,t){const n=vu(e);t?(n.vu.delete(2),await Xy(n)):t||(n.vu.add(2),await Yy(n),n.bu.set("Unknown"))}function wv(e){return e.Su||(e.Su=function(e,t,n){const r=vu(e);return r.fu(),new Ky(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:iv.bind(null,e),ao:av.bind(null,e),nu:ov.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),nv(e)?tv(e):e.bu.set("Unknown")):(await e.Su.stop(),sv(e))})),e.Su}function kv(e){return e.Du||(e.Du=function(e,t,n){const r=vu(e);return r.fu(),new Hy(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:mv.bind(null,e),ao:vv.bind(null,e),au:gv.bind(null,e),cu:yv.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await uv(e)):(await e.Du.stop(),e.Eu.length>0&&(du("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))})),e.Du}class Nv{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new wu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new Nv(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xu(bu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sv(e,t){if(fu("AsyncQueue","".concat(t,": ").concat(e)),ih(e))return new xu(bu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ev{constructor(e){this.comparator=e?(t,n)=>e(t,n)||zu.comparator(t.key,n.key):(e,t)=>zu.comparator(e.key,t.key),this.keyedMap=Lf(),this.sortedSet=new Qh(this.comparator)}static emptySet(e){return new Ev(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ev))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ev;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Iv{constructor(){this.Cu=new Qh(zu.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):gu():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class _v{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new _v(e,t,Ev.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Tv{constructor(){this.Nu=void 0,this.listeners=[]}}class Cv{constructor(){this.queries=new Df(e=>If(e),Ef),this.onlineState="Unknown",this.ku=new Set}}async function jv(e,t){const n=vu(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new Tv),s)try{i.Nu=await n.onListen(r)}catch(e){const n=Sv(e,"Initialization of query '".concat(_f(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,i),i.listeners.push(t),t.Mu(n.onlineState),i.Nu&&t.$u(i.Nu)&&Pv(n)}async function Av(e,t){const n=vu(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),s=0===i.listeners.length)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function Dv(e,t){const n=vu(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(s)&&(r=!0);t.Nu=s}}r&&Pv(n)}function Rv(e,t,n){const r=vu(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function Pv(e){e.ku.forEach(e=>{e.next()})}class Ov{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new _v(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=_v.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Lv{constructor(e){this.key=e}}class Mv{constructor(e){this.key=e}}class Fv{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=qf(),this.mutatedKeys=qf(),this.tc=jf(e),this.ec=new Ev(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Iv,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Tf(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.tc(u,o)>0||l&&this.tc(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{ec:i,ic:n,zi:a,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gu()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const i=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,o=a!==this.Xu;return this.Xu=a,0!==s.length||o?{snapshot:new _v(this.query,e.ec,r,s,e.mutatedKeys,0===a,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:i}:{cc:i}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Iv,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=qf(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new Mv(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new Lv(n))}),t}hc(e){this.Yu=e.ir,this.Zu=qf();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return _v.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Uv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Vv{constructor(e){this.key=e,this.fc=!1}}class zv{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.dc={},this.wc=new Df(e=>If(e),Ef),this._c=new Map,this.mc=new Set,this.gc=new Qh(zu.comparator),this.yc=new Map,this.Ic=new ty,this.Tc={},this.Ec=new Map,this.Ac=jg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Bv(e,t){const n=ab(e);let r,s;const i=n.wc.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.lc();else{const e=await Ey(n.localStore,Nf(t)),i=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,s=await qv(n,t,r,"current"===i,e.resumeToken),n.isPrimaryClient&&$y(n.remoteStore,e)}return s}async function qv(e,t,n,r,s){e.Rc=(t,n,r)=>async function(e,t,n,r){let s=t.view.sc(n);s.zi&&(s=await _y(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i);return eb(e,t.targetId,a.cc),a.snapshot}(e,t,n,r);const i=await _y(e.localStore,t,!0),a=new Fv(t,i.ir),o=a.sc(i.documents),l=zp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);eb(e,n,c.cc);const u=new Uv(t,n,a);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function Kv(e,t){const n=vu(e),r=n.wc.get(t),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter(e=>!Ef(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Iy(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Jy(n.remoteStore,r.targetId),Jv(n,r.targetId)}).catch(Zu)):(Jv(n,r.targetId),await Iy(n.localStore,r.targetId,!0))}async function Hv(e,t){const n=vu(e);try{const e=await function(e,t){const n=vu(e),r=t.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Bs.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Bs.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(nd.EMPTY_BYTE_STRING,Lu.min()).withLastLimboFreeSnapshotVersion(Lu.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Bs.updateTargetData(e,c))});let o=Pf(),l=qf();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Ny(e,i,t.documentUpdates).next(e=>{o=e.nr,l=e.sr})),!r.isEqual(Lu.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return eh.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ji=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(yu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?yu(r.fc):e.removedDocuments.size>0&&(yu(r.fc),r.fc=!1))}),await rb(n,e,t)}catch(e){await Zu(e)}}function Gv(e,t,n){const r=vu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const s=r.view.Mu(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=vu(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.listeners)s.Mu(t)&&(r=!0)}),r&&Pv(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Wv(e,t,n){const r=vu(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.yc.get(t),i=s&&s.key;if(i){let e=new Qh(zu.comparator);e=e.insert(i,Od.newNoDocument(i,Lu.min()));const n=qf().add(i),s=new Vp(Lu.min(),new Map,new Qh(Du),e,n);await Hv(r,s),r.gc=r.gc.remove(i),r.yc.delete(t),nb(r)}else await Iy(r.localStore,t,!1).then(()=>Jv(r,t,n)).catch(Zu)}async function Qv(e,t){const n=vu(e),r=t.batch.batchId;try{const e=await function(e,t){const n=vu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=eh.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);yu(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=qf();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);$v(n,r,null),Yv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rb(n,e)}catch(e){await Zu(e)}}async function Xv(e,t,n){const r=vu(e);try{const e=await function(e,t){const n=vu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(yu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);$v(r,t,n),Yv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await rb(r,e)}catch(n){await Zu(n)}}function Yv(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function $v(e,t,n){const r=vu(e);let s=r.Tc[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Tc[r.currentUser.toKey()]=s}}function Jv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||Zv(e,t)})}function Zv(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Jy(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),nb(e))}function eb(e,t,n){for(const r of n)r instanceof Lv?(e.Ic.addReference(r.key,t),tb(e,r)):r instanceof Mv?(du("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Zv(e,r.key)):gu()}function tb(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(du("SyncEngine","New document in limbo: "+n),e.mc.add(r),nb(e))}function nb(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new zu(Fu.fromString(t)),r=e.Ac.next();e.yc.set(r,new Vv(n)),e.gc=e.gc.insert(n,r),$y(e.remoteStore,new Tm(Nf(yf(n.path)),r,"TargetPurposeLimboResolution",dh.ct))}}async function rb(e,t,n){const r=vu(e),s=[],i=[],a=[];r.wc.isEmpty()||(r.wc.forEach((e,o)=>{a.push(r.Rc(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){s.push(e);const t=yy.Li(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.dc.nu(s),await async function(e,t){const n=vu(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>eh.forEach(t,t=>eh.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>eh.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ih(e))throw e;du("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,s)}}}(r.localStore,i))}async function sb(e,t){const n=vu(e);if(!n.currentUser.isEqual(t)){du("SyncEngine","User change. New user:",t.toKey());const e=await wy(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new xu(bu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await rb(n,e.er)}}function ib(e,t){const n=vu(e),r=n.yc.get(t);if(r&&r.fc)return qf().add(r.key);{let e=qf();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function ab(e){const t=vu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ib.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Wv.bind(null,t),t.dc.nu=Dv.bind(null,t.eventManager),t.dc.Pc=Rv.bind(null,t.eventManager),t}function ob(e){const t=vu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xv.bind(null,t),t}class lb{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=zy(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return xy(this.persistence,new vy,e.initialUser,this.serializer)}createPersistence(e){return new oy(cy.zs,this.serializer)}createSharedClientState(e){return new jy}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cb extends lb{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await ob(this.Vc.syncEngine),await uv(this.Vc.remoteStore),await this.persistence.Ii(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return xy(this.persistence,new vy,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Mg(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new hh(t,this.persistence);return new uh(e.asyncQueue,n)}createPersistence(e){const t=gy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?kg.withCacheSize(this.cacheSizeBytes):kg.DEFAULT;return new fy(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Uy(),Vy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new jy}}class ub{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Gv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=sb.bind(null,this.syncEngine),await xv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Cv}createDatastore(e){const t=zy(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Fy(r));var r;return function(e,t,n,r){return new Gy(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>Gv(this.syncEngine,e,0),i=Dy.D()?new Dy:new Ay,new Qy(t,n,r,s,i);var t,n,r,s,i}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new zv(e,t,n,r,s,i);return a&&(o.vc=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=vu(e);du("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Yy(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class hb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):fu("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class db{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=lu.UNAUTHENTICATED,this.clientId=Au.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{du("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(du("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xu(bu.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(vN){const n=Sv(vN,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function fb(e,t){e.asyncQueue.verifyOperationInProgress(),du("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await wy(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function pb(e,t){e.asyncQueue.verifyOperationInProgress();const n=await gb(e);du("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>bv(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>bv(t.remoteStore,n)),e._onlineComponents=t}function mb(e){return"FirebaseError"===e.name?e.code===bu.FAILED_PRECONDITION||e.code===bu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function gb(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){du("FirestoreClient","Using user provided OfflineComponentProvider");try{await fb(e,e._uninitializedComponentsProvider._offline)}catch(vN){const n=vN;if(!mb(n))throw n;pu("Error using user provided cache. Falling back to memory cache: "+n),await fb(e,new lb)}}else du("FirestoreClient","Using default OfflineComponentProvider"),await fb(e,new lb);return e._offlineComponents}async function yb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(du("FirestoreClient","Using user provided OnlineComponentProvider"),await pb(e,e._uninitializedComponentsProvider._online)):(du("FirestoreClient","Using default OnlineComponentProvider"),await pb(e,new ub))),e._onlineComponents}function vb(e){return yb(e).then(e=>e.syncEngine)}async function bb(e){const t=await yb(e),n=t.eventManager;return n.onListen=Bv.bind(null,t.syncEngine),n.onUnlisten=Kv.bind(null,t.syncEngine),n}function xb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new wu;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new hb({next:i=>{t.enqueueAndForget(()=>Av(e,a));const o=i.docs.has(n);!o&&i.fromCache?s.reject(new xu(bu.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&i.fromCache&&r&&"server"===r.source?s.reject(new xu(bu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(i)},error:e=>s.reject(e)}),a=new Ov(yf(n.path),i,{includeMetadataChanges:!0,Ku:!0});return jv(e,a)}(await bb(e),e.asyncQueue,t,n,r)),r.promise}function wb(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const kb=new Map;function Nb(e,t,n){if(!n)throw new xu(bu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Sb(e){if(!zu.isDocumentKey(e))throw new xu(bu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Eb(e){if(zu.isDocumentKey(e))throw new xu(bu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ib(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":gu()}function _b(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xu(bu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ib(e);throw new xu(bu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Tb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new xu(bu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xu(bu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new xu(bu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wb(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new xu(bu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new xu(bu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new xu(bu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Cb{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xu(bu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xu(bu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tb(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Nu;switch(e.type){case"firstParty":return new _u(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xu(bu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kb.get(e);t&&(du("ComponentProvider","Removing Datastore"),kb.delete(e),t.terminate())}(this),Promise.resolve()}}class jb{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Db(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jb(this.firestore,e,this._key)}}class Ab{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ab(this.firestore,e,this._query)}}class Db extends Ab{constructor(e,t,n){super(e,t,yf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jb(this.firestore,null,new zu(e))}withConverter(e){return new Db(this.firestore,e,this._path)}}function Rb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=at(e),Nb("collection","path",t),e instanceof Cb){const n=Fu.fromString(t,...r);return Eb(n),new Db(e,null,n)}{if(!(e instanceof jb||e instanceof Db))throw new xu(bu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fu.fromString(t,...r));return Eb(n),new Db(e.firestore,null,n)}}function Pb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=at(e),1===arguments.length&&(t=Au.A()),Nb("doc","path",t),e instanceof Cb){const n=Fu.fromString(t,...r);return Sb(n),new jb(e,null,new zu(n))}{if(!(e instanceof jb||e instanceof Db))throw new xu(bu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fu.fromString(t,...r));return Sb(n),new jb(e.firestore,e instanceof Db?e.converter:null,new zu(n))}}class Ob{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new By(this,"async_queue_retry"),this.Xc=()=>{const e=Vy();e&&du("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Vy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Vy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new wu;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!ih(e))throw e;du("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw fu("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Nv.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&gu()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Lb(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class Mb extends Cb{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ob,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ub(this),this._firestoreClient.terminate()}}function Fb(e){return e._firestoreClient||Ub(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ub(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new ud(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,wb(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new db(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(n=s.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function Vb(e,t,n){const r=new wu;return e.asyncQueue.enqueue(async()=>{try{await fb(e,n),await pb(e,t),r.resolve()}catch(e){const n=e;if(!mb(n))throw n;pu("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}}).then(()=>r.promise)}function zb(e){if(e._initialized||e._terminated)throw new xu(bu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bb{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bb(nd.fromBase64String(e))}catch(e){throw new xu(bu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Bb(nd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qb{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new xu(bu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kb{constructor(e){this._methodName=e}}class Hb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xu(bu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xu(bu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Du(this._lat,e._lat)||Du(this._long,e._long)}}const Gb=/^__.*__$/;class Wb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new vp(e,this.data,this.fieldMask,t,this.fieldTransforms):new yp(e,this.data,t,this.fieldTransforms)}}class Qb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new vp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Xb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gu()}}class Yb{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Yb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return hx(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Xb(this.ca)&&Gb.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class $b{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||zy(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Yb({ca:e,methodName:t,ga:n,path:Vu.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jb(e){const t=e._freezeSettings(),n=zy(e._databaseId);return new $b(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Zb(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.ya(i.merge||i.mergeFields?2:0,t,n,s);ox("Data must be an object, but it was:",a,r);const o=ix(r,a);let l,c;if(i.merge)l=new ed(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=lx(t,r,n);if(!a.contains(s))throw new xu(bu.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));dx(e,s)||e.push(s)}l=new ed(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Wb(new Rd(o),l,c)}class ex extends Kb{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ex}}class tx extends Kb{_toFieldTransform(e){return new op(e.path,new Zf)}isEqual(e){return e instanceof tx}}function nx(e,t,n,r){const s=e.ya(1,t,n);ox("Data must be an object, but it was:",s,r);const i=[],a=Rd.empty();Gh(r,(e,r)=>{const o=ux(t,e,n);r=at(r);const l=s.da(o);if(r instanceof ex)i.push(o);else{const e=sx(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new ed(i);return new Qb(a,o,s.fieldTransforms)}function rx(e,t,n,r,s,i){const a=e.ya(1,t,n),o=[lx(t,r,n)],l=[s];if(i.length%2!=0)throw new xu(bu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<i.length;d+=2)o.push(lx(t,i[d])),l.push(i[d+1]);const c=[],u=Rd.empty();for(let d=o.length-1;d>=0;--d)if(!dx(c,o[d])){const e=o[d];let t=l[d];t=at(t);const n=a.da(e);if(t instanceof ex)c.push(e);else{const r=sx(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new ed(c);return new Qb(u,h,a.fieldTransforms)}function sx(e,t){if(ax(e=at(e)))return ox("Unsupported field value:",t,e),ix(e,t);if(e instanceof Kb)return function(e,t){if(!Xb(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=sx(s,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=at(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Qf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ou.fromDate(e);return{timestampValue:em(t.serializer,n)}}if(e instanceof Ou){const n=new Ou(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:em(t.serializer,n)}}if(e instanceof Hb)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Bb)return{bytesValue:tm(t.serializer,e._byteString)};if(e instanceof jb){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:sm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Ib(e)))}(e,t)}function ix(e,t){const n={};return Wh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gh(e,(e,r)=>{const s=sx(r,t.ha(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function ax(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ou||e instanceof Hb||e instanceof Bb||e instanceof jb||e instanceof Kb)}function ox(e,t,n){if(!ax(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ib(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function lx(e,t,n){if((t=at(t))instanceof qb)return t._internalPath;if("string"==typeof t)return ux(e,t);throw hx("Field path arguments must be of type string or ",e,!1,void 0,n)}const cx=new RegExp("[~\\*/\\[\\]]");function ux(e,t,n){if(t.search(cx)>=0)throw hx("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new qb(...t.split("."))._internalPath}catch(r){throw hx("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function hx(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new xu(bu.INVALID_ARGUMENT,o+e+l)}function dx(e,t){return e.some(e=>e.isEqual(t))}class fx{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jb(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new px(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class px extends fx{data(){return super.data()}}function mx(e,t){return"string"==typeof t?ux(e,t):t instanceof qb?t._internalPath:t._delegate._internalPath}function gx(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new xu(bu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yx{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(pd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return id(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ad(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gu()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Gh(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Hb(id(e.latitude),id(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ld(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(cd(e));default:return null}}convertTimestamp(e){const t=sd(e);return new Ou(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Fu.fromString(e);yu(_m(n));const r=new hd(n.get(1),n.get(3)),s=new zu(n.popFirst(5));return r.isEqual(t)||fu("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function vx(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class bx{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xx extends fx{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new wx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(mx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class wx extends xx{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class kx{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new bx(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new wx(this._firestore,this._userDataWriter,n.key,n,new bx(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xu(bu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new wx(e._firestore,e._userDataWriter,n.doc.key,n.doc,new bx(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new wx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Nx(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Nx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gu()}}function Sx(e){e=_b(e,jb);const t=_b(e.firestore,Mb);return xb(Fb(t),e._key).then(n=>Dx(t,e,n))}class Ex extends yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jb(this.firestore,null,t)}}function Ix(e,t,n){e=_b(e,jb);const r=_b(e.firestore,Mb),s=vx(e.converter,t,n);return Ax(r,[Zb(Jb(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,cp.none())])}function _x(e,t,n){e=_b(e,jb);const r=_b(e.firestore,Mb),s=Jb(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=at(t))||t instanceof qb?rx(s,"updateDoc",e._key,t,n,o):nx(s,"updateDoc",e._key,t),Ax(r,[i.toMutation(e._key,cp.exists(!0))])}function Tx(e){return Ax(_b(e.firestore,Mb),[new kp(e._key,cp.none())])}function Cx(e,t){const n=_b(e.firestore,Mb),r=Pb(e),s=vx(e.converter,t);return Ax(n,[Zb(Jb(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,cp.exists(!1))]).then(()=>r)}function jx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=at(e);let o={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Lb(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges};if(Lb(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,h,d;if(e instanceof jb)h=_b(e.firestore,Mb),d=yf(e._key.path),u={next:t=>{n[l]&&n[l](Dx(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=_b(e,Ab);h=_b(t.firestore,Mb),d=t._query;const r=new Ex(h);u={next:e=>{n[l]&&n[l](new kx(h,r,t,e))},error:n[l+1],complete:n[l+2]},gx(e._query)}return function(e,t,n,r){const s=new hb(r),i=new Ov(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>jv(await bb(e),i)),()=>{s.Dc(),e.asyncQueue.enqueueAndForget(async()=>Av(await bb(e),i))}}(Fb(h),d,c,u)}function Ax(e,t){return function(e,t){const n=new wu;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=ob(e);try{const e=await function(e,t){const n=vu(e),r=Ou.now(),s=t.reduce((e,t)=>e.add(t.key),qf());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Pf(),l=qf();return n.Zi.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=mp(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new vp(e.key,t,Pd(t.value.mapValue),cp.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Mf(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Qh(Du)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await rb(r,e.changes),await uv(r.remoteStore)}catch(e){const t=Sv(e,"Failed to persist write");n.reject(t)}}(await vb(e),t,n)),n.promise}(Fb(e),t)}function Dx(e,t,n){const r=n.docs.get(t._key),s=new Ex(e);return new xx(e,s,t._key,r,new bx(n.hasPendingWrites,n.fromCache),t.converter)}function Rx(){return new tx("serverTimestamp")}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){cu=e}(Nn),bn(new ot("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Mb(new Eu(e.getProvider("auth-internal")),new Cu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xu(bu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hd(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),In(ou,"3.13.0",e),In(ou,"3.13.0","esm2017")}();const Px="firebasestorage.googleapis.com",Ox="storageBucket";class Lx extends Ye{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Ux(e),"Firebase Storage: ".concat(t," (").concat(Ux(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Lx.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ux(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Mx,Fx;function Ux(e){return"storage/"+e}function Vx(){return new Lx(Mx.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function zx(){return new Lx(Mx.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Bx(){return new Lx(Mx.CANCELED,"User canceled the upload/download.")}function qx(){return new Lx(Mx.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Kx(e){return new Lx(Mx.INVALID_ARGUMENT,e)}function Hx(){return new Lx(Mx.APP_DELETED,"The Firebase app was deleted.")}function Gx(e,t){return new Lx(Mx.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Wx(e){throw new Lx(Mx.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Mx||(Mx={}));class Qx{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Qx.makeFromUrl(e,t)}catch(vN){return new Qx(e,"")}if(""===n.path)return n;throw r=e,new Lx(Mx.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===Px?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new Qx(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new Lx(Mx.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Xx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Yx(e){return"string"===typeof e||e instanceof String}function $x(e){return Jx()&&e instanceof Blob}function Jx(){return"undefined"!==typeof Blob&&!Qe()}function Zx(e,t,n,r){if(r<t)throw Kx("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Kx("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function ew(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function tw(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function nw(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Fx||(Fx={}));class rw{constructor(e,t,n,r,s,i,a,o,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new sw(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Fx.NO_ERROR,s=n.getStatus();if(!t||nw(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Fx.ABORT;return void e(!1,new sw(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new sw(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(vN){r(vN)}else if(null!==s){const e=Vx();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?Hx():Bx())}else{r(zx())}};this.canceled_?t(0,new sw(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){s=setTimeout(()=>{s=null,e(f,l())},t)}function d(){i&&clearTimeout(i)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return d(),void u.call(null,e,...n);if(l()||a)return d(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),h(i)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==s?(e||(o=2),clearTimeout(s),h(0)):e||(o=1)))}return h(0),i=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class sw{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function iw(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function aw(){const e=iw();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Jx())return new Blob(n);throw new Lx(Mx.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function ow(e){if("undefined"===typeof atob)throw t="base-64",new Lx(Mx.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const lw="raw",cw="base64",uw="base64url",hw="data_url";class dw{constructor(e,t){this.data=e,this.contentType=t||null}}function fw(e,t){switch(e){case lw:return new dw(pw(t));case cw:case uw:return new dw(mw(e,t));case hw:return new dw(function(e){const t=new gw(e);return t.base64?mw(cw,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(vN){throw Gx(hw,"Malformed data URL.")}return pw(t)}(t.rest)}(t),new gw(t).contentType)}throw Vx()}function pw(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function mw(e,t){switch(e){case cw:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Gx(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case uw:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Gx(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ow(t)}catch(vN){if(vN.message.includes("polyfill"))throw vN;throw Gx(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class gw{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Gx(hw,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class yw{constructor(e,t){let n=0,r="";$x(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if($x(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new yw(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new yw(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Jx()){const e=t.map(e=>e instanceof yw?e.data_:e);return new yw(aw.apply(null,e))}{const e=t.map(e=>Yx(e)?fw(lw,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new yw(r,!0)}}uploadData(){return this.data_}}function vw(e){let t;try{t=JSON.parse(e)}catch(vN){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function bw(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function xw(e,t){return t}class ww{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||xw}}let kw=null;function Nw(){if(kw)return kw;const e=[];e.push(new ww("bucket")),e.push(new ww("generation")),e.push(new ww("metageneration")),e.push(new ww("name","fullPath",!0));const t=new ww("name");t.xform=function(e,t){return function(e){return!Yx(e)||e.length<2?e:bw(e)}(t)},e.push(t);const n=new ww("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ww("timeCreated")),e.push(new ww("updated")),e.push(new ww("md5Hash",null,!0)),e.push(new ww("cacheControl",null,!0)),e.push(new ww("contentDisposition",null,!0)),e.push(new ww("contentEncoding",null,!0)),e.push(new ww("contentLanguage",null,!0)),e.push(new ww("contentType",null,!0)),e.push(new ww("metadata","customMetadata",!0)),kw=e,kw}function Sw(e,t,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new Qx(n,r);return t._makeStorageReference(s)}})}(r,e),r}function Ew(e,t,n){const r=vw(t);if(null===r)return null;return Sw(e,r,n)}function Iw(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class _w{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Tw(e){if(!e)throw Vx()}function Cw(e,t){return function(n,r){const s=Ew(e,r,t);return Tw(null!==s),s}}function jw(e,t){return function(n,r){const s=Ew(e,r,t);return Tw(null!==s),function(e,t,n,r){const s=vw(t);if(null===s)return null;if(!Yx(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const a=encodeURIComponent;return i.split(",").map(t=>{const s=e.bucket,i=e.fullPath;return ew("/b/"+a(s)+"/o/"+a(i),n,r)+tw({alt:"media",token:t})})[0]}(s,r,e.host,e._protocol)}}function Aw(e){return function(t,n){let r;var s,i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Lx(Mx.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Lx(Mx.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new Lx(Mx.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new Lx(Mx.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Dw(e){const t=Aw(e);return function(n,r){let s=t(n,r);var i;return 404===n.getStatus()&&(i=e.path,s=new Lx(Mx.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function Rw(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Pw(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=Rw(t,r,s),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Iw(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",h=yw.getBlob(c,r,u);if(null===h)throw qx();const d={name:l.fullPath},f=ew(i,e.host,e._protocol),p=e.maxUploadRetryTime,m=new _w(f,"POST",Cw(e,n),p);return m.urlParams=d,m.headers=a,m.body=h.uploadData(),m.errorHandler=Aw(t),m}class Ow{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fx.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fx.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fx.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw Wx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Wx("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Wx("cannot .getStatus() before sending");try{return this.xhr_.status}catch(vN){return-1}}getResponse(){if(!this.sent_)throw Wx("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Wx("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Lw extends Ow{initXhr(){this.xhr_.responseType="text"}}function Mw(){return new Lw}class Fw{constructor(e,t){this._service=e,this._location=t instanceof Qx?t:Qx.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fw(e,t)}get root(){const e=new Qx(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bw(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Qx(this._location.bucket,e);return new Fw(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Lx(Mx.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Uw(e,t,n){e._throwIfRoot("uploadBytes");const r=Pw(e.storage,e._location,Nw(),new yw(t,!0),n);return e.storage.makeRequestWithTokens(r,Mw).then(t=>({metadata:t,ref:e}))}function Vw(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=ew(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new _w(r,"GET",jw(e,n),s);return i.errorHandler=Dw(t),i}(e.storage,e._location,Nw());return e.storage.makeRequestWithTokens(t,Mw).then(e=>{if(null===e)throw new Lx(Mx.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function zw(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Qx(e._location.bucket,n);return new Fw(e.storage,r)}function Bw(e,t){if(e instanceof Hw){const n=e;if(null==n._bucket)throw new Lx(Mx.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ox+"' property when initializing the app?");const r=new Fw(n,n._bucket);return null!=t?Bw(r,t):r}return void 0!==t?zw(e,t):e}function qw(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Hw)return new Fw(e,t);throw Kx("To use ref(service, url), the first argument must be a Storage instance.")}return Bw(e,t)}function Kw(e,t){const n=null===t||void 0===t?void 0:t[Ox];return null==n?null:Qx.makeFromBucketSpec(n,e)}class Hw{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=Px,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Qx.makeFromBucketSpec(r,this._host):Kw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Qx.makeFromBucketSpec(this._url,e):this._bucket=Kw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Zx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Zx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fw(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Xx(Hx());{const i=function(e,t,n,r,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=tw(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new rw(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a)}(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Gw="@firebase/storage",Ww="0.11.2",Qw="storage";function Xw(e,t,n,r){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lw,r=arguments.length>3?arguments[3]:void 0;e._throwIfRoot("uploadString");const s=fw(n,t),i=Object.assign({},r);return null==i.contentType&&null!=s.contentType&&(i.contentType=s.contentType),Uw(e,s.data,i)}(e=at(e),t,n,r)}function Yw(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Hw(r,s,i,n,Nn)}bn(new ot(Qw,Yw,"PUBLIC").setMultipleInstances(!0)),In(Gw,Ww,""),In(Gw,Ww,"esm2017");const $w=Sn({apiKey:"AIzaSyAgFCSMENNOROoT8j4NfZxCruuDf2zkZow",authDomain:"studio-5454762906-4abc1.firebaseapp.com",projectId:"studio-5454762906-4abc1",storageBucket:"studio-5454762906-4abc1.firebasestorage.app",messagingSenderId:"640442010957",appId:"1:640442010957:web:5c9d160df6c82dd4167b04"}),Jw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();const t=xn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=xn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Ze(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;qn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ri,persistence:[Gs,Cs,As]}),r=Ke("authTokenSyncURL");if(r){const e=(s=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Mi)return;const r=null===t||void 0===t?void 0:t.token;Fi!==r&&(Fi=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){at(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){at(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var s;const i=ze("auth");return i&&$r(n,"http://".concat(i)),n}($w),Zw=function(e,t){const n="string"==typeof e?e:t||"(default)",r=xn("object"==typeof e?e:En(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Be("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=_b(e,Cb))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&pu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=lu.MOCK_USER;else{t=Ge(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new xu(bu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new lu(i)}e._authCredentials=new Su(new ku(t,n))}}(r,...e)}return r}($w),ek=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En(),t=arguments.length>1?arguments[1]:void 0;e=at(e);const n=xn(e,Qw).getImmediate({identifier:t}),r=Be("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:Ge(s,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}($w);(function(e,t){zb(e=_b(e,Mb));const n=Fb(e);if(n._uninitializedComponentsProvider)throw new xu(bu.FAILED_PRECONDITION,"SDK cache is already specified.");pu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),s=new ub;return Vb(n,s,new cb(s,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))})(Zw).catch(e=>{"failed-precondition"===e.code?console.warn("Firestore persistence failed: Multiple tabs open"):"unimplemented"===e.code&&console.warn("Firestore persistence failed: Browser not supported")}),function(e,t){at(e).setPersistence(t)}(Jw,Cs);var tk=n(579);const nk=(0,s.createContext)();function rk(){return(0,s.useContext)(nk)}function sk(e){let{children:t}=e;const[n,r]=(0,s.useState)(null),[i,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{const e=function(e,t,n,r){return at(e).onAuthStateChanged(t,n,r)}(Jw,async e=>{if(r(e),e){const t=await Sx(Pb(Zw,"users",e.uid));t.exists()&&a(t.data().type)}l(!1)});return e},[]);const c={currentUser:n,userType:i,signup:async function(e,t,n){console.log("Attempting signup for:",e);try{const r=await async function(e,t,n){var r;const s=Xr(e),i={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(null===(r=s._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Gr(s,i,"signUpPassword");a=gs(s,e)}else a=gs(s,i).catch(async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Gr(s,i,"signUpPassword");return gs(s,e)}return Promise.reject(e)});const o=await a.catch(e=>Promise.reject(e)),l=await ys._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}(Jw,e,t);console.log("Firebase Auth user created:",r.user.uid);const s=r.user;return console.log("Updating profile..."),await Es(s,{displayName:e.split("@")[0]}),console.log("Saving to Firestore users collection..."),await Ix(Pb(Zw,"users",s.uid),{email:e,type:n,createdAt:(new Date).toISOString()}),console.log("Firestore user doc created"),a(n),r}catch(r){throw console.error("Signup error details:",r),r}},login:async function(e,t,n){const r=await function(e,t,n){return Ss(at(e),cs.credential(t,n))}(Jw,e,t),s=r.user,i=await Sx(Pb(Zw,"users",s.uid));if(i.exists()){const e=i.data();a(e.type)}else a(n);return r},logout:function(){return a(null),function(e){return at(e).signOut()}(Jw)},updateUserType:function(e){a(e),n&&Ix(Pb(Zw,"users",n.uid),{type:e},{merge:!0})}};return(0,tk.jsx)(nk.Provider,{value:c,children:!o&&t})}const ik=(0,s.createContext)();function ak(){return(0,s.useContext)(ik)}function ok(e){let{children:t}=e;const[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[h,d]=(0,s.useState)(!0),{currentUser:f}=rk();(0,s.useEffect)(()=>jx(Rb(Zw,"stores"),e=>{const t=e.docs.map(e=>kt({id:e.id},e.data()));r(t),d(!1)}),[]),(0,s.useEffect)(()=>jx(Rb(Zw,"products"),e=>{const t=e.docs.map(e=>kt({id:e.id},e.data()));a(t)}),[]),(0,s.useEffect)(()=>{if(!f)return void l([]);return jx(Rb(Zw,"orders"),e=>{const t=e.docs.map(e=>kt({id:e.id},e.data()));l(t)})},[f]);const p=async(e,t)=>{if(!e||!e.startsWith("data:"))return e;const n="".concat(Date.now(),"_").concat(Math.random().toString(36).substring(7)),r=(s=ek,i="".concat(t,"/").concat(n),qw(s=at(s),i));var s,i;return await Xw(r,e,"data_url"),await function(e){return Vw(e=at(e))}(r)},m={stores:n,products:i,orders:o,cart:c,loading:h,addStore:async e=>{if(!f)return;const t=await p(e.logo,"logos"),n=kt(kt({},e),{},{ownerId:f.uid,logo:t||null,primaryColor:e.primaryColor||"#3b82f6",secondaryColor:e.secondaryColor||"#10b981",layout:e.layout||"grid",createdAt:Rx()});await Cx(Rb(Zw,"stores"),n)},updateStore:async(e,t)=>{t.logo&&t.logo.startsWith("data:")&&(t.logo=await p(t.logo,"logos")),await _x(Pb(Zw,"stores",e),t)},deleteStore:async e=>{const t=i.filter(t=>t.storeId===e);await Promise.all(t.map(e=>Tx(Pb(Zw,"products",e.id)))),await Tx(Pb(Zw,"stores",e))},addProduct:async e=>{const t=await Promise.all((e.images||[]).map(e=>p(e,"products"))),n=await p(e.video,"videos"),r=kt(kt({},e),{},{images:t,video:n||null,createdAt:Rx()});await Cx(Rb(Zw,"products"),r)},updateProduct:async(e,t)=>{t.images&&(t.images=await Promise.all(t.images.map(e=>p(e,"products")))),t.video&&t.video.startsWith("data:")&&(t.video=await p(t.video,"videos")),await _x(Pb(Zw,"products",e),t)},deleteProduct:async e=>{await Tx(Pb(Zw,"products",e))},addToCart:e=>{u(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?kt(kt({},t),{},{quantity:t.quantity+1}):t):[...t,kt(kt({},e),{},{quantity:1})])},removeFromCart:e=>{u(t=>t.filter(t=>t.id!==e))},placeOrder:async e=>{const t=kt(kt({},e),{},{status:"pending",createdAt:Rx()}),n=await Cx(Rb(Zw,"orders"),t);return u([]),kt({id:n.id},t)},updateOrder:async(e,t)=>{await _x(Pb(Zw,"orders",e),t)},deleteOrder:async e=>{await Tx(Pb(Zw,"orders",e))},formatPrice:e=>new Intl.NumberFormat("en-TZ",{style:"currency",currency:"TZS",minimumFractionDigits:0}).format(e)};return(0,tk.jsx)(ik.Provider,{value:m,children:t})}var lk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ck=["color","size","strokeWidth","absoluteStrokeWidth","children"];var uk=(e,t)=>{const n=(0,s.forwardRef)((n,r)=>{let{color:i="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c}=n,u=function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(n,ck);return(0,s.createElement)("svg",kt(kt({ref:r},lk),{},{width:a,height:a,stroke:i,strokeWidth:l?24*Number(o)/Number(a):o,className:"lucide lucide-".concat((h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},u),[...t.map(e=>{let[t,n]=e;return(0,s.createElement)(t,n)}),...(Array.isArray(c)?c:[c])||[]]);var h});return n.displayName="".concat(e),n};const hk=uk("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),dk=uk("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),fk=uk("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),pk=uk("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),mk=uk("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);function gk(){const{currentUser:e,userType:t,logout:n}=rk(),{cart:r}=ak(),s=re(),i=r.reduce((e,t)=>e+t.quantity,0);return["/login","/register"].includes(s.pathname)?null:(0,tk.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md border-t border-gray-100 pb-safe shadow-lg",children:(0,tk.jsxs)("div",{className:"flex justify-around items-center h-16 max-w-lg mx-auto px-2",children:[(0,tk.jsxs)(Ae,{to:"/",className:"flex flex-col items-center justify-center w-full transition-all ".concat("/"===s.pathname?"text-primary":"text-gray-400"),children:[(0,tk.jsx)(hk,{className:"w-5 h-5 ".concat("/"===s.pathname?"fill-current":"")}),(0,tk.jsx)("span",{className:"text-[10px] font-bold mt-1",children:"Home"})]}),(0,tk.jsxs)(Ae,{to:"seller"===t?"/manage-products":"/explore",className:"flex flex-col items-center justify-center w-full transition-all ".concat("/explore"===s.pathname||"/manage-products"===s.pathname?"text-primary":"text-gray-400"),children:["seller"===t?(0,tk.jsx)(dk,{className:"w-5 h-5"}):(0,tk.jsx)(fk,{className:"w-5 h-5"}),(0,tk.jsx)("span",{className:"text-[10px] font-bold mt-1 uppercase",children:"seller"===t?"Add":"Shop"})]}),(0,tk.jsxs)(Ae,{to:"seller"===t?"/orders":"/checkout",className:"flex flex-col items-center justify-center w-full transition-all ".concat("/orders"===s.pathname||"/checkout"===s.pathname?"text-primary":"text-gray-400"),children:["seller"===t?(0,tk.jsx)("div",{className:"relative",children:(0,tk.jsx)(Package,{className:"w-5 h-5"})}):(0,tk.jsxs)("div",{className:"relative",children:[(0,tk.jsx)(pk,{className:"w-5 h-5"}),i>0&&(0,tk.jsx)("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full border border-white"})]}),(0,tk.jsx)("span",{className:"text-[10px] font-bold mt-1 uppercase",children:"seller"===t?"Orders":"Cart"})]}),(0,tk.jsxs)(Ae,{to:e?"seller"===t?"/seller-dashboard":"/buyer-dashboard":"/login",className:"flex flex-col items-center justify-center w-full transition-all ".concat(s.pathname.includes("dashboard")||"/login"===s.pathname?"text-primary":"text-gray-400"),children:[(0,tk.jsx)(mk,{className:"w-5 h-5"}),(0,tk.jsx)("span",{className:"text-[10px] font-bold mt-1 uppercase",children:e?"Admin":"Login"})]})]})})}function yk(e){let{onComplete:t}=e;const[n,r]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{const e=setTimeout(()=>{r(!1),setTimeout(t,400)},1200);return()=>clearTimeout(e)},[t]),n?(0,tk.jsxs)("div",{className:"fixed inset-0 bg-white z-[9999] flex flex-col items-center justify-center transition-opacity duration-500",children:[(0,tk.jsxs)("div",{className:"relative",children:[(0,tk.jsx)("div",{className:"absolute inset-0 scale-[2.5] bg-purple-50 rounded-full animate-ping opacity-20"}),(0,tk.jsx)("div",{className:"absolute inset-0 scale-[1.5] bg-purple-100 rounded-full animate-pulse opacity-20"}),(0,tk.jsx)("div",{className:"relative w-28 h-28 bg-gradient-to-tr from-purple-700 to-primary rounded-[2.5rem] flex items-center justify-center shadow-2xl animate-bounce",children:(0,tk.jsx)(hk,{className:"w-14 h-14 text-white fill-current"})})]}),(0,tk.jsxs)("div",{className:"mt-12 text-center animate-in fade-in slide-in-from-bottom-4 duration-1000",children:[(0,tk.jsxs)("h1",{className:"text-5xl font-extrabold tracking-tighter text-gray-900",style:{fontFamily:"Outfit"},children:["Zap",(0,tk.jsx)("span",{className:"text-primary italic",children:"in"})]}),(0,tk.jsx)("p",{className:"mt-2 text-gray-400 text-xs font-bold uppercase tracking-[0.3em]",children:"Premium Commerce"})]}),(0,tk.jsx)("div",{className:"absolute bottom-12 w-48 h-1 bg-gray-100 rounded-full overflow-hidden",children:(0,tk.jsx)("div",{className:"h-full bg-gradient-to-r from-purple-700 to-primary w-0 animate-[loading_2s_ease-in-out_forwards]"})})]}):(0,tk.jsx)("div",{className:"fixed inset-0 bg-white z-[9999] transition-opacity duration-500 opacity-0 pointer-events-none flex items-center justify-center",children:(0,tk.jsx)("div",{className:"w-24 h-24 bg-gradient-to-tr from-purple-700 to-primary rounded-[2.5rem] flex items-center justify-center shadow-2xl",children:(0,tk.jsx)(hk,{className:"w-12 h-12 text-white fill-current"})})})}const vk=uk("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),bk=uk("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),xk=uk("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),wk=uk("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),kk=uk("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Nk=uk("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);function Sk(){const{currentUser:e,userType:t,logout:n}=rk(),r=e=>{const t="Check out this amazing mobile store app! Create your own store or shop from local sellers.",n=window.location.href.split("/store/")[0];let r="";switch(e){case"whatsapp":r="https://wa.me/?text=".concat(encodeURIComponent(t+" "+n));break;case"facebook":r="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(n));break;case"instagram":return navigator.clipboard.writeText(t+" "+n),void alert("Link copied! Share it on Instagram");default:return}window.open(r,"_blank")};return(0,tk.jsx)("div",{className:"min-h-screen bg-white text-black p-4 pb-24",children:(0,tk.jsxs)("div",{className:"text-center py-12",children:[(0,tk.jsxs)("div",{className:"mb-6 animate-in fade-in zoom-in duration-700",children:[(0,tk.jsxs)("div",{className:"w-24 h-24 bg-gradient-to-tr from-purple-700 via-purple-500 to-indigo-600 rounded-[2.5rem] mx-auto mb-6 flex items-center justify-center shadow-2xl shadow-purple-200 relative overflow-hidden group",children:[(0,tk.jsx)("div",{className:"absolute inset-0 bg-white/10 group-hover:bg-transparent transition-colors"}),(0,tk.jsx)(hk,{className:"w-12 h-12 text-white relative z-10"}),(0,tk.jsx)("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 bg-white/20 blur-xl rounded-full"})]}),(0,tk.jsxs)("h1",{className:"text-5xl font-extrabold mb-3 tracking-tight text-gray-900",style:{fontFamily:"Outfit"},children:["Zap",(0,tk.jsx)("span",{className:"text-primary italic",children:"in"})]}),(0,tk.jsx)("p",{className:"text-gray-400 text-[10px] font-bold tracking-[0.2em] uppercase",children:"Premium Tanzanian Commerce"})]}),(0,tk.jsx)("div",{className:"mb-8 flex flex-col items-center",children:e?(0,tk.jsxs)("div",{className:"flex flex-col items-center",children:[(0,tk.jsxs)("div",{className:"bg-purple-50 border border-purple-100 px-4 py-2 rounded-2xl flex items-center space-x-2 mb-2",children:[(0,tk.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,tk.jsx)("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"seller"===t?"Seller Account":"Buyer Account"})]}),(0,tk.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to log out?")&&n()},className:"flex items-center space-x-1.5 bg-gray-100 text-gray-600 px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-widest hover:bg-red-50 hover:text-red-500 transition-all",children:[(0,tk.jsx)(vk,{className:"w-3 h-3"}),(0,tk.jsx)("span",{children:"Logout"})]})]}):(0,tk.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,tk.jsx)(Ae,{to:"/login",className:"bg-primary text-white px-6 py-2 rounded-full text-xs font-bold uppercase tracking-widest shadow-md shadow-primary/20",children:"Login"}),(0,tk.jsx)(Ae,{to:"/register",className:"bg-gray-900 text-white px-6 py-2 rounded-full text-xs font-bold uppercase tracking-widest shadow-md",children:"Join Now"})]})}),(0,tk.jsx)("div",{className:"space-y-3 mb-12",children:e&&(0,tk.jsxs)("div",{className:"grid grid-cols-1 gap-3 px-4",children:[(0,tk.jsxs)(Ae,{to:"seller"===t?"/seller-dashboard":"/buyer-dashboard",className:"btn-primary py-4 text-center block shadow-lg shadow-primary/25",children:["seller"===t?(0,tk.jsx)(mk,{className:"w-5 h-5 inline mr-2"}):(0,tk.jsx)(bk,{className:"w-5 h-5 inline mr-2"}),"My ","seller"===t?"Seller":"Buyer"," Dashboard"]}),"seller"===t?(0,tk.jsxs)(Ae,{to:"/manage-products",className:"block w-full bg-white border border-gray-200 text-gray-900 py-3.5 px-4 rounded-2xl font-bold text-sm tracking-tight hover:bg-gray-50 transition-all flex items-center justify-center shadow-sm",children:[(0,tk.jsx)(bk,{className:"w-4 h-4 mr-2 text-primary"}),"Manage Inventory"]}):(0,tk.jsxs)(Ae,{to:"/explore",className:"block w-full bg-white border border-gray-200 text-gray-900 py-3.5 px-4 rounded-2xl font-bold text-sm tracking-tight hover:bg-gray-50 transition-all flex items-center justify-center shadow-sm",children:[(0,tk.jsx)(xk,{className:"w-4 h-4 mr-2 text-primary"}),"Browse Shops"]})]})}),(0,tk.jsxs)("div",{className:"grid ".concat("seller"===t?"grid-cols-1":"grid-cols-2"," gap-4 mb-12 px-2"),children:[(0,tk.jsxs)(Ae,{to:e?"buyer"===t?"/register":"/create-store":"/register",className:"card hover:border-primary/50 transition-all text-left bg-white/50 backdrop-blur-sm border-gray-100 group",children:[(0,tk.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-[1.25rem] flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:(0,tk.jsx)(dk,{className:"w-6 h-6 text-primary"})}),(0,tk.jsx)("h3",{className:"font-extrabold text-gray-900 mb-1 text-sm tracking-tight",children:"Create Store"}),(0,tk.jsx)("p",{className:"text-gray-400 text-[10px] leading-relaxed font-medium",children:"Build your professional mobile store in minutes"})]}),"seller"!==t&&(0,tk.jsxs)(Ae,{to:"/explore",className:"card hover:border-primary/50 transition-all text-left bg-white/50 backdrop-blur-sm border-gray-100 group",children:[(0,tk.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-[1.25rem] flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:(0,tk.jsx)(pk,{className:"w-6 h-6 text-blue-600"})}),(0,tk.jsx)("h3",{className:"font-extrabold text-gray-900 mb-1 text-sm tracking-tight",children:"Shop Local"}),(0,tk.jsx)("p",{className:"text-gray-400 text-[10px] leading-relaxed font-medium",children:"Discover amazing products from creators nearby"})]})]}),(0,tk.jsxs)("div",{className:"card",children:[(0,tk.jsx)("h3",{className:"font-semibold text-black mb-4 text-sm",children:"Share Zapin"}),(0,tk.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,tk.jsx)("button",{onClick:()=>r("whatsapp"),className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center hover:bg-green-200 transition-all",children:(0,tk.jsx)(wk,{className:"w-5 h-5 text-green-600"})}),(0,tk.jsx)("button",{onClick:()=>r("facebook"),className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center hover:bg-blue-200 transition-all",children:(0,tk.jsx)(kk,{className:"w-5 h-5 text-blue-600"})}),(0,tk.jsx)("button",{onClick:()=>r("instagram"),className:"w-12 h-12 bg-pink-100 rounded-xl flex items-center justify-center hover:bg-pink-200 transition-all",children:(0,tk.jsx)(Nk,{className:"w-5 h-5 text-pink-600"})})]})]}),(0,tk.jsxs)("div",{className:"mt-12 grid grid-cols-3 gap-4",children:[(0,tk.jsxs)("div",{className:"text-center",children:[(0,tk.jsx)("div",{className:"text-2xl font-bold text-gradient",children:"10K+"}),(0,tk.jsx)("div",{className:"text-xs text-gray-600",children:"Active Stores"})]}),(0,tk.jsxs)("div",{className:"text-center",children:[(0,tk.jsx)("div",{className:"text-2xl font-bold text-gradient",children:"50K+"}),(0,tk.jsx)("div",{className:"text-xs text-gray-600",children:"Products"})]}),(0,tk.jsxs)("div",{className:"text-center",children:[(0,tk.jsx)("div",{className:"text-2xl font-bold text-gradient",children:"25K+"}),(0,tk.jsx)("div",{className:"text-xs text-gray-600",children:"Happy Users"})]})]})]})})}const Ek=uk("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ik=uk("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_k=uk("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Tk=uk("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function Ck(){const[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)("seller"),[o,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)(""),[h,d]=(0,s.useState)(!1),{login:f}=rk(),p=ie();return(0,tk.jsxs)("div",{className:"min-h-screen bg-[#f8fafc] flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[(0,tk.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-100 rounded-full blur-[100px] opacity-50"}),(0,tk.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-100 rounded-full blur-[100px] opacity-50"}),(0,tk.jsxs)("div",{className:"w-full max-w-sm z-10",children:[(0,tk.jsxs)("div",{className:"text-center mb-10",children:[(0,tk.jsx)("div",{className:"w-20 h-20 bg-gradient-to-tr from-purple-700 to-indigo-600 rounded-[2rem] mx-auto mb-6 flex items-center justify-center shadow-xl shadow-purple-100 rotate-6 hover:rotate-0 transition-transform duration-500",children:(0,tk.jsx)(hk,{className:"w-10 h-10 text-white fill-current"})}),(0,tk.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 tracking-tight",style:{fontFamily:"Outfit"},children:"Welcome back!"}),(0,tk.jsx)("p",{className:"text-gray-400 text-sm font-medium mt-2",children:"Sign in to your Zapin account"})]}),(0,tk.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-[2.5rem] shadow-2xl shadow-gray-200/50 p-8 border border-white",children:[c&&(0,tk.jsxs)("div",{className:"bg-red-50 border border-red-100 text-red-600 px-4 py-3 rounded-2xl mb-6 text-xs font-bold flex items-center",children:[(0,tk.jsx)("div",{className:"w-1.5 h-1.5 bg-red-600 rounded-full mr-2 animate-pulse"}),c]}),(0,tk.jsxs)("form",{onSubmit:async function(t){t.preventDefault();try{u(""),d(!0),await f(e,n,i),p("seller"===i?"/seller-dashboard":"/buyer-dashboard")}catch(r){console.error(r),u(r.message||"Failed to sign in")}d(!1)},className:"space-y-6",children:[(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsx)("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-4",children:"Login as"}),(0,tk.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tk.jsxs)("button",{type:"button",onClick:()=>a("seller"),className:"py-4 px-4 rounded-2xl font-bold transition-all flex flex-col items-center group relative overflow-hidden ".concat("seller"===i?"bg-gray-900 text-white shadow-lg shadow-gray-200":"bg-white text-gray-400 border border-gray-100 hover:border-purple-200"),children:[(0,tk.jsx)(fk,{className:"w-5 h-5 mb-1.5 ".concat("seller"===i?"text-purple-400":"group-hover:text-purple-400")}),(0,tk.jsx)("span",{className:"text-[10px] uppercase tracking-tighter",children:"Seller"}),"seller"===i&&(0,tk.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-purple-500"})]}),(0,tk.jsxs)("button",{type:"button",onClick:()=>a("buyer"),className:"py-4 px-4 rounded-2xl font-bold transition-all flex flex-col items-center group relative overflow-hidden ".concat("buyer"===i?"bg-gray-900 text-white shadow-lg shadow-gray-200":"bg-white text-gray-400 border border-gray-100 hover:border-purple-200"),children:[(0,tk.jsx)(pk,{className:"w-5 h-5 mb-1.5 ".concat("buyer"===i?"text-blue-400":"group-hover:text-blue-400")}),(0,tk.jsx)("span",{className:"text-[10px] uppercase tracking-tighter",children:"Buyer"}),"buyer"===i&&(0,tk.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-500"})]})]})]}),(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsx)("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-4",children:"Email Address"}),(0,tk.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full bg-gray-50/50 border border-gray-100 rounded-[1.25rem] py-4 px-6 text-sm focus:ring-4 focus:ring-purple-500/10 focus:border-purple-500/50 transition-all outline-none",placeholder:"name@gmail.com"})]}),(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsx)("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-4",children:"Your Password"}),(0,tk.jsxs)("div",{className:"relative",children:[(0,tk.jsx)("input",{type:o?"text":"password",value:n,onChange:e=>r(e.target.value),required:!0,className:"w-full bg-gray-50/50 border border-gray-100 rounded-[1.25rem] py-4 px-6 text-sm focus:ring-4 focus:ring-purple-500/10 focus:border-purple-500/50 transition-all outline-none pr-14",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,tk.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute right-5 top-1/2 -translate-y-1/2 text-gray-300 hover:text-gray-500 transition-colors",children:o?(0,tk.jsx)(Ek,{className:"w-5 h-5"}):(0,tk.jsx)(Ik,{className:"w-5 h-5"})})]})]}),(0,tk.jsxs)("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-2xl font-bold text-sm tracking-tight hover:shadow-xl hover:shadow-purple-200 transition-all disabled:opacity-50 flex items-center justify-center space-x-2 active:scale-95",children:[(0,tk.jsx)("span",{children:h?"Authenticating...":"Sign In"}),!h&&(0,tk.jsx)(_k,{className:"w-4 h-4"})]})]}),(0,tk.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-50 flex flex-col items-center",children:[(0,tk.jsxs)("p",{className:"text-gray-400 text-xs font-medium",children:["New to Zapin?"," ",(0,tk.jsx)(Ae,{to:"/register",className:"text-primary font-bold hover:underline",children:"Create Account"})]}),(0,tk.jsxs)("div",{className:"mt-4 flex items-center space-x-1 opacity-20",children:[(0,tk.jsx)(Tk,{className:"w-3 h-3"}),(0,tk.jsx)("span",{className:"text-[8px] font-bold uppercase tracking-[0.2em]",children:"Secure Checkout"})]})]})]})]})]})}function jk(){const[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)("seller"),[c,u]=(0,s.useState)(!1),[h,d]=(0,s.useState)(""),[f,p]=(0,s.useState)(!1),{signup:m}=rk(),g=ie();return(0,tk.jsxs)("div",{className:"min-h-screen bg-[#f8fafc] flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[(0,tk.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-100 rounded-full blur-[100px] opacity-50"}),(0,tk.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-100 rounded-full blur-[100px] opacity-50"}),(0,tk.jsxs)("div",{className:"w-full max-w-sm z-10 py-8",children:[(0,tk.jsxs)("div",{className:"text-center mb-8",children:[(0,tk.jsx)("div",{className:"w-20 h-20 bg-gradient-to-tr from-purple-700 to-indigo-600 rounded-[2rem] mx-auto mb-6 flex items-center justify-center shadow-xl shadow-purple-100 -rotate-6 hover:rotate-0 transition-transform duration-500",children:(0,tk.jsx)(hk,{className:"w-10 h-10 text-white fill-current"})}),(0,tk.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 tracking-tight",style:{fontFamily:"Outfit"},children:"Get Started"}),(0,tk.jsx)("p",{className:"text-gray-400 text-sm font-medium mt-2",children:"Create your professional Zapin account"})]}),(0,tk.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-[2.5rem] shadow-2xl shadow-gray-200/50 p-8 border border-white",children:[h&&(0,tk.jsxs)("div",{className:"bg-red-50 border border-red-100 text-red-600 px-4 py-3 rounded-2xl mb-6 text-xs font-bold flex items-center",children:[(0,tk.jsx)("div",{className:"w-1.5 h-1.5 bg-red-600 rounded-full mr-2 animate-pulse"}),h]}),(0,tk.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),n!==i)return d("Passwords do not match");try{d(""),p(!0),await m(e,n,o),g("seller"===o?"/seller-dashboard":"/buyer-dashboard")}catch(r){console.error(r),d(r.message||"Failed to create an account")}p(!1)},className:"space-y-5",children:[(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsx)("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-4",children:"Join as"}),(0,tk.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tk.jsxs)("button",{type:"button",onClick:()=>l("seller"),className:"py-4 px-4 rounded-2xl font-bold transition-all flex flex-col items-center group relative overflow-hidden ".concat("seller"===o?"bg-gray-900 text-white shadow-lg shadow-gray-200":"bg-white text-gray-400 border border-gray-100 hover:border-purple-200"),children:[(0,tk.jsx)(fk,{className:"w-5 h-5 mb-1.5 ".concat("seller"===o?"text-purple-400":"group-hover:text-purple-400")}),(0,tk.jsx)("span",{className:"text-[10px] uppercase tracking-tighter",children:"Seller"}),"seller"===o&&(0,tk.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-purple-500"})]}),(0,tk.jsxs)("button",{type:"button",onClick:()=>l("buyer"),className:"py-4 px-4 rounded-2xl font-bold transition-all flex flex-col items-center group relative overflow-hidden ".concat("buyer"===o?"bg-gray-900 text-white shadow-lg shadow-gray-200":"bg-white text-gray-400 border border-gray-100 hover:border-purple-200"),children:[(0,tk.jsx)(pk,{className:"w-5 h-5 mb-1.5 ".concat("buyer"===o?"text-blue-400":"group-hover:text-blue-400")}),(0,tk.jsx)("span",{className:"text-[10px] uppercase tracking-tighter",children:"Buyer"}),"buyer"===o&&(0,tk.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-500"})]})]})]}),(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsx)("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-4",children:"Email Address"}),(0,tk.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full bg-gray-50/50 border border-gray-100 rounded-[1.25rem] py-4 px-6 text-sm focus:ring-4 focus:ring-purple-500/10 focus:border-purple-500/50 transition-all outline-none",placeholder:"name@gmail.com"})]}),(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsx)("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-4",children:"Set Password"}),(0,tk.jsxs)("div",{className:"relative",children:[(0,tk.jsx)("input",{type:c?"text":"password",value:n,onChange:e=>r(e.target.value),required:!0,className:"w-full bg-gray-50/50 border border-gray-100 rounded-[1.25rem] py-4 px-6 text-sm focus:ring-4 focus:ring-purple-500/10 focus:border-purple-500/50 transition-all outline-none pr-14",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,tk.jsx)("button",{type:"button",onClick:()=>u(!c),className:"absolute right-5 top-1/2 -translate-y-1/2 text-gray-300 hover:text-gray-500 transition-colors",children:c?(0,tk.jsx)(Ek,{className:"w-5 h-5"}):(0,tk.jsx)(Ik,{className:"w-5 h-5"})})]})]}),(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsx)("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-4",children:"Confirm Password"}),(0,tk.jsx)("input",{type:"password",value:i,onChange:e=>a(e.target.value),required:!0,className:"w-full bg-gray-50/50 border border-gray-100 rounded-[1.25rem] py-4 px-6 text-sm focus:ring-4 focus:ring-purple-500/10 focus:border-purple-500/50 transition-all outline-none",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,tk.jsxs)("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-2xl font-bold text-sm tracking-tight hover:shadow-xl hover:shadow-purple-200 transition-all disabled:opacity-50 flex items-center justify-center space-x-2 active:scale-95 mt-2",children:[(0,tk.jsx)("span",{children:f?"Creating account...":"Create Account"}),!f&&(0,tk.jsx)(_k,{className:"w-4 h-4"})]})]}),(0,tk.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-50 flex flex-col items-center",children:[(0,tk.jsxs)("p",{className:"text-gray-400 text-xs font-medium",children:["Already have an account?"," ",(0,tk.jsx)(Ae,{to:"/login",className:"text-primary font-bold hover:underline",children:"Sign In"})]}),(0,tk.jsxs)("div",{className:"mt-4 flex items-center space-x-1 opacity-20",children:[(0,tk.jsx)(Tk,{className:"w-3 h-3"}),(0,tk.jsx)("span",{className:"text-[8px] font-bold uppercase tracking-[0.2em]",children:"Secure Data"})]})]})]})]})]})}const Ak=uk("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Dk=uk("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Rk=uk("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Pk=uk("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]);function Ok(){const{currentUser:e,userType:t}=rk(),{stores:n,products:r,orders:i,deleteStore:a,formatPrice:o}=ak(),[l,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&"buyer"===t&&(window.location.href="/")},[e,t]);const d=n.filter(t=>t.ownerId===(null===e||void 0===e?void 0:e.uid)),f=r.filter(e=>e.storeId&&d.some(t=>t.id===e.storeId)),p=i.filter(e=>d.some(t=>t.id===e.storeId)),m=p.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.total,0),g=p.filter(e=>"pending"===e.status).length,y=e=>{if(!e)return"";const t=window.location.origin;return"".concat(t,"/store/").concat(e.id)},v=(e,t)=>{const n=y(e),r="Check out ".concat(e.name,"! ").concat(e.description);let s="";switch(t){case"whatsapp":s="https://wa.me/?text=".concat(encodeURIComponent(r+" "+n));break;case"facebook":s="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(n));break;case"instagram":return navigator.clipboard.writeText(r+" "+n),void alert("Store link copied! Share it on Instagram");default:return}window.open(s,"_blank")};return(0,tk.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4 pb-24",children:[(0,tk.jsxs)("div",{className:"mb-6",children:[(0,tk.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Seller Dashboard"}),(0,tk.jsx)("p",{className:"text-gray-600",children:"Manage your stores and track sales"})]}),(0,tk.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,tk.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,tk.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,tk.jsx)(fk,{className:"w-5 h-5 text-primary"}),(0,tk.jsx)("span",{className:"text-xs text-gray-500",children:"Total"})]}),(0,tk.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d.length}),(0,tk.jsx)("p",{className:"text-xs text-gray-600",children:"Stores"})]}),(0,tk.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,tk.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,tk.jsx)(bk,{className:"w-5 h-5 text-secondary"}),(0,tk.jsx)("span",{className:"text-xs text-gray-500",children:"Listed"})]}),(0,tk.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.length}),(0,tk.jsx)("p",{className:"text-xs text-gray-600",children:"Products"})]}),(0,tk.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,tk.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,tk.jsx)(pk,{className:"w-5 h-5 text-accent"}),(0,tk.jsx)("span",{className:"text-xs text-gray-500",children:"Pending"})]}),(0,tk.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g}),(0,tk.jsx)("p",{className:"text-xs text-gray-600",children:"Orders"})]}),(0,tk.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,tk.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,tk.jsx)(Ak,{className:"w-5 h-5 text-green-600"}),(0,tk.jsx)("span",{className:"text-xs text-gray-500",children:"Revenue"})]}),(0,tk.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:o(m)}),(0,tk.jsx)("p",{className:"text-xs text-gray-600",children:"Total Sales"})]})]}),(0,tk.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm mb-6",children:[(0,tk.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,tk.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tk.jsxs)(Ae,{to:"/create-store",className:"bg-primary text-white p-3 rounded-lg text-center hover:bg-blue-600 transition-colors",children:[(0,tk.jsx)(dk,{className:"w-5 h-5 mx-auto mb-1"}),(0,tk.jsx)("span",{className:"text-sm font-medium",children:"New Store"})]}),(0,tk.jsxs)(Ae,{to:"/manage-products",className:"bg-secondary text-white p-3 rounded-lg text-center hover:bg-green-600 transition-colors",children:[(0,tk.jsx)(bk,{className:"w-5 h-5 mx-auto mb-1"}),(0,tk.jsx)("span",{className:"text-sm font-medium",children:"Products"})]}),(0,tk.jsxs)(Ae,{to:"/orders",className:"bg-accent text-white p-3 rounded-lg text-center hover:bg-orange-600 transition-colors",children:[(0,tk.jsxs)("div",{className:"relative inline-block",children:[(0,tk.jsx)(pk,{className:"w-5 h-5 mx-auto mb-1"}),g>0&&(0,tk.jsx)("span",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white"})]}),(0,tk.jsx)("span",{className:"text-sm font-medium",children:"Orders"})]})]})]}),(0,tk.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm mb-6",children:[(0,tk.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,tk.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"My Stores"}),0===d.length&&(0,tk.jsx)(Ae,{to:"/create-store",className:"text-primary text-sm font-medium hover:underline",children:"Create First Store"})]}),0===d.length?(0,tk.jsxs)("div",{className:"text-center py-8",children:[(0,tk.jsx)(fk,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,tk.jsx)("p",{className:"text-gray-500 mb-4",children:"No stores yet"}),(0,tk.jsx)(Ae,{to:"/create-store",className:"bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors inline-block",children:"Create Store"})]}):(0,tk.jsx)("div",{className:"space-y-3",children:d.map(e=>(0,tk.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3",children:[(0,tk.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,tk.jsxs)("div",{children:[(0,tk.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,tk.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,tk.jsxs)("div",{className:"flex space-x-2",children:[(0,tk.jsx)("button",{onClick:()=>(e=>{const t=y(e);navigator.clipboard.writeText(t),alert("Store link copied to clipboard! Share this with your buyers.")})(e),className:"text-primary hover:bg-blue-50 p-2 rounded-lg transition-colors",title:"Copy link",children:(0,tk.jsx)(Dk,{className:"w-4 h-4"})}),(0,tk.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this store? All products in this store will also be deleted. This cannot be undone."))try{await a(e)}catch(t){console.error("Error deleting store:",t),alert("Failed to delete store")}})(e.id),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors",title:"Delete store",children:(0,tk.jsx)(Rk,{className:"w-4 h-4"})})]})]}),(0,tk.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-500 mb-3",children:[(0,tk.jsxs)("span",{children:[r.filter(t=>t.storeId===e.id).length," products"]}),(0,tk.jsx)(Ae,{to:"/store/".concat(e.id),className:"text-primary hover:underline font-medium",children:"View Store"})]}),(0,tk.jsxs)("div",{className:"border-t border-gray-100 pt-3",children:[(0,tk.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Share your store:"}),(0,tk.jsxs)("div",{className:"flex space-x-2",children:[(0,tk.jsx)("button",{onClick:()=>v(e,"whatsapp"),className:"bg-green-500 text-white p-2 rounded-lg hover:bg-green-600 transition-colors",title:"Share on WhatsApp",children:(0,tk.jsx)(wk,{className:"w-4 h-4"})}),(0,tk.jsx)("button",{onClick:()=>v(e,"facebook"),className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors",title:"Share on Facebook",children:(0,tk.jsx)(kk,{className:"w-4 h-4"})}),(0,tk.jsx)("button",{onClick:()=>v(e,"instagram"),className:"bg-pink-600 text-white p-2 rounded-lg hover:bg-pink-700 transition-colors",title:"Share on Instagram",children:(0,tk.jsx)(Nk,{className:"w-4 h-4"})})]})]})]},e.id))})]}),(0,tk.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,tk.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,tk.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),p.length>0&&(0,tk.jsx)(Ae,{to:"/orders",className:"text-primary text-sm font-medium hover:underline",children:"View All"})]}),0===p.length?(0,tk.jsxs)("div",{className:"text-center py-8",children:[(0,tk.jsx)(pk,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,tk.jsx)("p",{className:"text-gray-500",children:"No orders yet"})]}):(0,tk.jsx)("div",{className:"space-y-3",children:p.slice(0,5).map(e=>(0,tk.jsx)("div",{className:"border border-gray-200 rounded-lg p-3",children:(0,tk.jsxs)("div",{className:"flex justify-between items-start",children:[(0,tk.jsxs)("div",{children:[(0,tk.jsxs)("p",{className:"font-medium text-gray-900",children:["Order #",e.id.slice(-6)]}),(0,tk.jsx)("p",{className:"text-sm text-gray-600",children:e.customerName})]}),(0,tk.jsxs)("div",{className:"text-right",children:[(0,tk.jsx)("p",{className:"font-medium text-gray-900",children:o(e.total)}),(0,tk.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"processing"===e.status?"bg-blue-100 text-blue-800":"completed"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]})]})},e.id))})]}),(0,tk.jsx)("div",{className:"mt-8",children:(0,tk.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-[2rem] p-6 text-white overflow-hidden relative",children:[(0,tk.jsxs)("div",{className:"relative z-10",children:[(0,tk.jsx)("h3",{className:"text-sm font-bold mb-1",children:"Need help with your store?"}),(0,tk.jsx)("p",{className:"text-[10px] text-gray-400 mb-4 max-w-[200px]",children:"Our merchant support team is available 24/7 to help you grow your business."}),(0,tk.jsx)("a",{href:"https://wa.me/255749097220",target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-white/10 hover:bg-white/20 text-white text-[10px] font-bold py-2 px-4 rounded-xl border border-white/10 transition-colors",children:"Contact merchant support"})]}),(0,tk.jsx)("div",{className:"absolute top-1/2 -right-4 -translate-y-1/2 opacity-20",children:(0,tk.jsx)(Pk,{className:"w-32 h-32 text-white"})})]})})]})}const Lk=uk("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Mk=uk("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Fk=uk("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Uk=uk("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Vk=uk("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),zk=uk("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);function Bk(){const{currentUser:e,userType:t}=rk(),{orders:n,cart:r,stores:i,formatPrice:a}=ak(),o=ie(),[l,c]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&"seller"===t&&o("/seller-dashboard")},[e,t,o]);const u=n.filter(t=>t.customerId===(null===e||void 0===e?void 0:e.uid)),h=[...u].sort((e,t)=>{var n,r;const s=null!==(n=e.createdAt)&&void 0!==n&&n.seconds?e.createdAt.seconds:new Date(e.createdAt).getTime()/1e3;return(null!==(r=t.createdAt)&&void 0!==r&&r.seconds?t.createdAt.seconds:new Date(t.createdAt).getTime()/1e3)-s}),d={pending:u.filter(e=>"pending"===e.status||"processing"===e.status).length,shipped:u.filter(e=>"shipped"===e.status).length,completed:u.filter(e=>"completed"===e.status).length,totalSpent:u.reduce((e,t)=>e+t.total,0)},f=e=>{switch(e){case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-100";case"processing":return"bg-blue-50 text-blue-700 border-blue-100";case"shipped":return"bg-purple-50 text-purple-700 border-purple-100";case"completed":return"bg-green-50 text-green-700 border-green-100";case"cancelled":return"bg-red-50 text-red-700 border-red-100";default:return"bg-gray-50 text-gray-700 border-gray-100"}};return(0,tk.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-24",children:[(0,tk.jsxs)("div",{className:"bg-white px-4 pt-4 pb-6 rounded-b-[2.5rem] shadow-sm",children:[(0,tk.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tk.jsxs)("div",{children:[(0,tk.jsxs)("h1",{className:"text-xl font-bold text-gray-900",children:["Hello, ",(null===e||void 0===e?void 0:e.displayName)||"Shopper","!"]}),(0,tk.jsx)("p",{className:"text-xs text-gray-500",children:"Welcome to your shopping dashboard"})]}),(0,tk.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center border border-primary/20",children:(0,tk.jsx)(pk,{className:"w-5 h-5 text-primary"})})]}),(0,tk.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,tk.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-2 text-center border border-gray-100",children:[(0,tk.jsx)("p",{className:"text-sm font-bold text-gray-900",children:d.pending}),(0,tk.jsx)("p",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:"Active"})]}),(0,tk.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-2 text-center border border-gray-100",children:[(0,tk.jsx)("p",{className:"text-sm font-bold text-gray-900",children:d.shipped}),(0,tk.jsx)("p",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:"Shipped"})]}),(0,tk.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-2 text-center border border-gray-100",children:[(0,tk.jsx)("p",{className:"text-sm font-bold text-gray-900",children:d.completed}),(0,tk.jsx)("p",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:"Done"})]}),(0,tk.jsxs)("div",{className:"bg-primary rounded-2xl p-2 text-center shadow-md",children:[(0,tk.jsx)("p",{className:"text-sm font-bold text-white",children:a(d.totalSpent)}),(0,tk.jsx)("p",{className:"text-[9px] text-white/80 uppercase font-bold tracking-tighter",children:"Total"})]})]})]}),(0,tk.jsxs)("div",{className:"px-4 mt-6",children:[(0,tk.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,tk.jsx)("h2",{className:"text-base font-bold text-gray-900",children:"Quick Tools"})}),(0,tk.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tk.jsxs)("button",{onClick:()=>o("/explore"),className:"flex flex-col items-center justify-center bg-white p-4 rounded-3xl border border-gray-100 shadow-sm active:scale-95 transition-transform",children:[(0,tk.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-2xl flex items-center justify-center mb-2",children:(0,tk.jsx)(xk,{className:"w-5 h-5 text-blue-600"})}),(0,tk.jsx)("span",{className:"text-xs font-bold text-gray-900 tracking-tight",children:"Browse Stores"})]}),(0,tk.jsxs)("button",{onClick:()=>o("/checkout"),className:"flex flex-col items-center justify-center bg-white p-4 rounded-3xl border border-gray-100 shadow-sm active:scale-95 transition-transform relative",children:[(0,tk.jsx)("div",{className:"w-10 h-10 bg-purple-50 rounded-2xl flex items-center justify-center mb-2",children:(0,tk.jsx)(pk,{className:"w-5 h-5 text-purple-600"})}),(0,tk.jsx)("span",{className:"text-xs font-bold text-gray-900 tracking-tight",children:"Checkout"}),r.length>0&&(0,tk.jsx)("span",{className:"absolute top-3 right-5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center border-2 border-white",children:r.length})]})]})]}),(0,tk.jsxs)("div",{className:"px-4 mt-8",children:[(0,tk.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tk.jsx)("h2",{className:"text-base font-bold text-gray-900",children:"Suggested Stores"}),(0,tk.jsx)(Ae,{to:"/explore",className:"text-[10px] font-bold text-primary uppercase tracking-widest hover:underline",children:"See All"})]}),(0,tk.jsxs)("div",{className:"flex space-x-3 overflow-x-auto pb-4 scrollbar-hide",children:[i.slice(0,5).map(e=>(0,tk.jsxs)("div",{onClick:()=>o("/store/".concat(e.id)),className:"flex-shrink-0 w-28 bg-white rounded-3xl p-3 border border-gray-100 shadow-sm active:scale-95 transition-transform text-center",children:[(0,tk.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gray-50 flex items-center justify-center mx-auto mb-2 border border-blue-50/50 overflow-hidden",children:e.logo?(0,tk.jsx)("img",{src:e.logo,alt:e.name,className:"w-full h-full object-cover"}):(0,tk.jsx)(fk,{className:"w-7 h-7 text-gray-200"})}),(0,tk.jsx)("p",{className:"text-[10px] font-bold text-gray-900 truncate tracking-tight",children:e.name}),(0,tk.jsxs)("div",{className:"flex items-center justify-center mt-1",children:[(0,tk.jsx)(Lk,{className:"w-2 h-2 text-yellow-500 fill-yellow-500"}),(0,tk.jsx)("span",{className:"text-[8px] font-bold text-gray-400 ml-0.5",children:"4.9"})]})]},e.id)),0===i.length&&(0,tk.jsx)("div",{className:"w-full text-center py-4 bg-gray-50 rounded-3xl border border-dashed border-gray-200",children:(0,tk.jsx)("p",{className:"text-[10px] font-bold text-gray-400",children:"No stores available yet"})})]})]}),(0,tk.jsxs)("div",{className:"px-4 mt-8",children:[(0,tk.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tk.jsx)("h2",{className:"text-base font-bold text-gray-900",children:"My Orders"}),(0,tk.jsxs)("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:[u.length," Records"]})]}),0===u.length?(0,tk.jsxs)("div",{className:"bg-white rounded-[2rem] p-8 text-center border border-gray-100 shadow-sm",children:[(0,tk.jsx)("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,tk.jsx)(bk,{className:"w-8 h-8 text-gray-200"})}),(0,tk.jsx)("h3",{className:"text-gray-900 font-bold mb-1",children:"No Orders Yet"}),(0,tk.jsx)("p",{className:"text-gray-500 text-xs mb-6",children:"Seems like you haven't bought anything yet."}),(0,tk.jsx)("button",{onClick:()=>o("/"),className:"bg-primary text-white py-2 px-6 rounded-full text-xs font-bold shadow-lg shadow-primary/20",children:"Start Shopping"})]}):(0,tk.jsx)("div",{className:"space-y-4",children:h.map(e=>{var t,n,r,s;const o=i.find(t=>t.id===e.storeId),u=null!==(t=e.createdAt)&&void 0!==t&&t.seconds?new Date(1e3*e.createdAt.seconds).toLocaleDateString():new Date(e.createdAt).toLocaleDateString();return(0,tk.jsxs)("div",{className:"bg-white rounded-3xl border border-gray-100 overflow-hidden shadow-sm",children:[(0,tk.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,tk.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,tk.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gray-50 flex items-center justify-center border border-gray-100 overflow-hidden",children:null!==o&&void 0!==o&&o.logo?(0,tk.jsx)("img",{src:o.logo,alt:o.name,className:"w-full h-full object-cover"}):(0,tk.jsx)(fk,{className:"w-6 h-6 text-gray-200"})}),(0,tk.jsxs)("div",{className:"min-w-0",children:[(0,tk.jsx)("h4",{className:"text-sm font-bold text-gray-900 truncate tracking-tight",children:(null===o||void 0===o?void 0:o.name)||"Unknown Store"}),(0,tk.jsxs)("p",{className:"text-[10px] text-gray-400 font-medium",children:["#",e.id.slice(-6).toUpperCase()," \u2022 ",u]})]})]}),(0,tk.jsxs)("div",{className:"text-right",children:[(0,tk.jsx)("p",{className:"text-sm font-bold text-primary mb-1",children:a(e.total)}),(0,tk.jsx)("span",{className:"text-[9px] font-bold px-2 py-0.5 rounded-full border ".concat(f(e.status)," uppercase tracking-wider"),children:e.status})]})]}),(0,tk.jsxs)("div",{className:"bg-gray-50/50 px-4 py-2 border-t border-gray-100 flex items-center justify-between",children:[(0,tk.jsxs)("div",{className:"flex -space-x-2",children:[null===(n=e.items)||void 0===n?void 0:n.slice(0,3).map((e,t)=>(0,tk.jsx)("div",{className:"w-6 h-6 rounded-full bg-white border border-gray-100 flex items-center justify-center text-[8px] font-bold text-gray-400 shadow-sm",children:e.name.charAt(0)},t)),(null===(r=e.items)||void 0===r?void 0:r.length)>3&&(0,tk.jsxs)("div",{className:"w-6 h-6 rounded-full bg-white border border-gray-100 flex items-center justify-center text-[7px] font-bold text-gray-400 shadow-sm",children:["+",e.items.length-3]})]}),(0,tk.jsxs)("button",{onClick:()=>c(l===e.id?null:e.id),className:"text-gray-400 hover:text-primary transition-colors flex items-center text-[10px] font-bold uppercase tracking-widest",children:[l===e.id?"Close":"Details",l===e.id?(0,tk.jsx)(Mk,{className:"w-4 h-4 ml-1"}):(0,tk.jsx)(Fk,{className:"w-4 h-4 ml-1"})]})]}),l===e.id&&(0,tk.jsx)("div",{className:"p-4 bg-gray-50/30 border-t border-gray-100 animate-in slide-in-from-top-2 duration-200",children:(0,tk.jsxs)("div",{className:"space-y-4",children:[(0,tk.jsxs)("div",{children:[(0,tk.jsxs)("h5",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest mb-1 flex items-center",children:[(0,tk.jsx)(Uk,{className:"w-2.5 h-2.5 mr-1"})," Delivery Address"]}),(0,tk.jsx)("p",{className:"text-xs text-gray-600 leading-tight",children:e.customerAddress})]}),(0,tk.jsxs)("div",{className:"flex items-center justify-between py-2 border-y border-gray-100 border-dashed",children:[(0,tk.jsxs)("div",{children:[(0,tk.jsxs)("h5",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest mb-1 flex items-center",children:[(0,tk.jsx)(Vk,{className:"w-2.5 h-2.5 mr-1"})," Payment Method"]}),(0,tk.jsx)("p",{className:"text-xs text-gray-600",children:"Secure Payment Gateway"})]}),(0,tk.jsxs)("div",{className:"text-right",children:[(0,tk.jsxs)("h5",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest mb-1 flex items-center justify-end",children:[(0,tk.jsx)(zk,{className:"w-2.5 h-2.5 mr-1"})," Shipping"]}),(0,tk.jsx)("p",{className:"text-xs text-gray-600",children:"Standard Delivery (Free)"})]})]}),(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsx)("h5",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Purchased Items"}),null===(s=e.items)||void 0===s?void 0:s.map((e,t)=>(0,tk.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,tk.jsxs)("div",{className:"flex-1 min-w-0 pr-4",children:[(0,tk.jsx)("p",{className:"text-gray-900 font-bold truncate tracking-tight",children:e.name}),(0,tk.jsxs)("p",{className:"text-[10px] text-gray-400 font-medium",children:["Qty: ",e.quantity," \xd7 ",a(e.price)]})]}),(0,tk.jsx)("p",{className:"font-bold text-gray-900",children:a(e.price*e.quantity)})]},t))]}),(0,tk.jsxs)("div",{className:"pt-2 mt-2 border-t border-gray-100 flex justify-between items-center",children:[(0,tk.jsx)("span",{className:"text-xs font-bold text-gray-900",children:"Order Total"}),(0,tk.jsx)("span",{className:"text-sm font-bold text-primary",children:a(e.total)})]})]})})]},e.id)})})]}),(0,tk.jsx)("div",{className:"px-4 mt-8",children:(0,tk.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-[2rem] p-6 text-white overflow-hidden relative",children:[(0,tk.jsxs)("div",{className:"relative z-10",children:[(0,tk.jsx)("h3",{className:"text-sm font-bold mb-1",children:"Need help with an order?"}),(0,tk.jsx)("p",{className:"text-[10px] text-gray-400 mb-4 max-w-[180px]",children:"Our support team is always here for you. We protect every transaction."}),(0,tk.jsx)("a",{href:"https://wa.me/255749097220",target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-white/10 hover:bg-white/20 text-white text-[10px] font-bold py-2 px-4 rounded-xl border border-white/10 transition-colors",children:"Contact Support"})]}),(0,tk.jsx)("div",{className:"absolute top-1/2 -right-4 -translate-y-1/2 opacity-20",children:(0,tk.jsx)(Pk,{className:"w-32 h-32 text-white"})})]})})]})}const qk=uk("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Kk=uk("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Hk=uk("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Gk=uk("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Wk=uk("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),Qk=uk("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);function Xk(){const[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)("#3b82f6"),[c,u]=(0,s.useState)("#10b981"),[h,d]=(0,s.useState)("grid"),[f,p]=(0,s.useState)(null),[m,g]=(0,s.useState)(!1),{currentUser:y}=rk(),{addStore:v}=ak(),b=ie();return(0,tk.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4",children:[(0,tk.jsxs)("div",{className:"mb-6",children:[(0,tk.jsxs)("button",{onClick:()=>b("/seller-dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[(0,tk.jsx)(qk,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),(0,tk.jsxs)("div",{className:"text-center",children:[(0,tk.jsx)(fk,{className:"w-12 h-12 text-primary mx-auto mb-3"}),(0,tk.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create Your Store"}),(0,tk.jsx)("p",{className:"text-gray-600",children:"Set up your online store with custom branding"})]})]}),(0,tk.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,tk.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),!e||!n||!i)return alert("Please fill in all required fields");g(!0);try{const t={name:e,description:n,category:i,ownerId:y.uid,ownerEmail:y.email,logo:f,primaryColor:o,secondaryColor:c,layout:h,isActive:!0};v(t),b("/seller-dashboard")}catch(r){console.error("Error creating store:",r),alert("Failed to create store. Please try again.")}g(!1)},className:"space-y-6",children:[(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Name *"}),(0,tk.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter your store name"}),(0,tk.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This will be visible to customers"})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Description *"}),(0,tk.jsx)("textarea",{value:n,onChange:e=>r(e.target.value),required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Describe what your store offers..."})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,tk.jsxs)("select",{value:i,onChange:e=>a(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,tk.jsx)("option",{value:"",children:"Select a category"}),["Electronics","Clothing & Fashion","Food & Beverages","Home & Garden","Health & Beauty","Sports & Outdoors","Books & Media","Toys & Games","Automotive","Other"].map(e=>(0,tk.jsx)("option",{value:e,children:e},e))]})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Logo"}),(0,tk.jsx)("div",{className:"space-y-3",children:f?(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsxs)("div",{className:"relative inline-block",children:[(0,tk.jsx)("img",{src:f,alt:"Store logo",className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-200"}),(0,tk.jsx)("button",{type:"button",onClick:()=>{p(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:(0,tk.jsx)(Hk,{className:"w-3 h-3"})})]}),(0,tk.jsx)("p",{className:"text-xs text-gray-500",children:"Logo uploaded successfully"})]}):(0,tk.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,tk.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[(0,tk.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,tk.jsx)(Kk,{className:"w-8 h-8 mb-2 text-gray-400"}),(0,tk.jsx)("p",{className:"text-sm text-gray-500",children:"Click to upload logo"}),(0,tk.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 5MB"})]}),(0,tk.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{p(e.target.result)},e.readAsDataURL(t)}}})]})})})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,tk.jsx)(Gk,{className:"w-4 h-4 inline mr-1"}),"Color Theme"]}),(0,tk.jsx)("div",{className:"grid grid-cols-4 gap-3",children:[{primary:"#3b82f6",secondary:"#10b981",name:"Ocean"},{primary:"#8b5cf6",secondary:"#ec4899",name:"Purple"},{primary:"#ef4444",secondary:"#f59e0b",name:"Sunset"},{primary:"#10b981",secondary:"#3b82f6",name:"Forest"},{primary:"#f59e0b",secondary:"#ef4444",name:"Autumn"},{primary:"#6366f1",secondary:"#8b5cf6",name:"Galaxy"},{primary:"#14b8a6",secondary:"#06b6d4",name:"Teal"},{primary:"#f97316",secondary:"#ea580c",name:"Orange"}].map((e,t)=>(0,tk.jsxs)("button",{type:"button",onClick:()=>{l(e.primary),u(e.secondary)},className:"p-3 rounded-lg border-2 transition-all ".concat(o===e.primary&&c===e.secondary?"border-gray-900 shadow-lg":"border-gray-200 hover:border-gray-400"),children:[(0,tk.jsxs)("div",{className:"flex space-x-1 mb-2",children:[(0,tk.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.primary}}),(0,tk.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.secondary}})]}),(0,tk.jsx)("p",{className:"text-xs text-gray-700",children:e.name})]},t))})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Layout"}),(0,tk.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,tk.jsxs)("button",{type:"button",onClick:()=>d("grid"),className:"p-3 rounded-lg border-2 transition-all flex flex-col items-center ".concat("grid"===h?"border-gray-900 shadow-lg":"border-gray-200 hover:border-gray-400"),children:[(0,tk.jsx)(Wk,{className:"w-6 h-6 mb-1"}),(0,tk.jsx)("span",{className:"text-sm",children:"Grid"})]}),(0,tk.jsxs)("button",{type:"button",onClick:()=>d("list"),className:"p-3 rounded-lg border-2 transition-all flex flex-col items-center ".concat("list"===h?"border-gray-900 shadow-lg":"border-gray-200 hover:border-gray-400"),children:[(0,tk.jsx)(Qk,{className:"w-6 h-6 mb-1"}),(0,tk.jsx)("span",{className:"text-sm",children:"List"})]})]})]}),(0,tk.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,tk.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Store Preview"}),(0,tk.jsxs)("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:[(0,tk.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[f?(0,tk.jsx)("img",{src:f,alt:"Logo",className:"w-12 h-12 object-cover rounded-lg"}):(0,tk.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,tk.jsx)(fk,{className:"w-6 h-6 text-gray-400"})}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("h4",{className:"font-medium text-gray-900",children:e||"Store Name"}),(0,tk.jsx)("p",{className:"text-sm text-gray-600",children:n||"Store description"})]})]}),(0,tk.jsxs)("div",{className:"flex space-x-2",children:[(0,tk.jsx)("div",{className:"h-8 flex-1 rounded",style:{backgroundColor:o}}),(0,tk.jsx)("div",{className:"h-8 flex-1 rounded",style:{backgroundColor:c}})]})]})]}),(0,tk.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-primary text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Creating Store...":"Create Store"})]})})]})}const Yk=uk("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),$k=uk("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Jk=uk("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Zk=uk("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),eN=uk("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),tN=uk("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),nN=uk("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);function rN(){const{storeId:e}=function(){let{matches:e}=s.useContext(ee),t=e[e.length-1];return t?t.params:{}}(),t=re(),{stores:n,products:r,addToCart:i,cart:a,loading:o,formatPrice:l}=ak(),{currentUser:c,userType:u}=rk(),h=ie(),d=e=>{try{if(!e)return null;const t=decodeURIComponent(atob(e).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(t)}catch(vN){return console.error("Failed to decode store data",vN),null}},f=(0,s.useMemo)(()=>{const r=(n||[]).find(t=>t.id===e);if(r)return r;const s=new URLSearchParams(t.search),i=d(s.get("d"));return(null===i||void 0===i?void 0:i.store)||null},[e,n,t.search]),p=(0,s.useMemo)(()=>{if(null===f||void 0===f||!f.id)return[];const e=(r||[]).filter(e=>e.storeId===f.id);if(e.length>0)return e;const n=new URLSearchParams(t.search),s=d(n.get("d"));return(null===s||void 0===s?void 0:s.products)||[]},[f,r,t.search]),[m,g]=(0,s.useState)({}),[y,v]=(0,s.useState)({}),[b,x]=(0,s.useState)({}),w=(0,s.useMemo)(()=>!new URLSearchParams(t.search).has("d")&&f&&c&&f.ownerId===c.uid,[f,c,t.search]),k="seller"!==u&&!w;if(o&&!f)return(0,tk.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,tk.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});if(!f)return(0,tk.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,tk.jsxs)("div",{className:"text-center",children:[(0,tk.jsx)("div",{className:"w-14 h-14 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,tk.jsx)(fk,{className:"w-7 h-7 text-gray-300"})}),(0,tk.jsx)("h2",{className:"text-base font-semibold text-gray-900 mb-1",children:"Store Not Found"}),(0,tk.jsx)("p",{className:"text-gray-400 text-xs mb-4",children:"This store doesn't exist or the link is invalid."}),(0,tk.jsx)("button",{onClick:()=>h("/"),className:"bg-primary text-white px-5 py-2 rounded-xl text-sm font-semibold",children:"Go Home"})]})});const N=(e,t)=>{g(n=>kt(kt({},n),{},{[e]:Math.max(1,(n[e]||1)+t)}))},S=(a||[]).reduce((e,t)=>e+(t.quantity||0),0),E=(a||[]).reduce((e,t)=>e+(t.price||0)*(t.quantity||0),0),I=(null===f||void 0===f?void 0:f.primaryColor)||"#9333ea",_=(null===f||void 0===f?void 0:f.secondaryColor)||"#a855f7";return(0,tk.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,tk.jsx)("div",{style:{background:"linear-gradient(135deg, ".concat(I,", ").concat(_,")")},children:(0,tk.jsxs)("div",{className:"px-3 pt-3 pb-3",children:[(0,tk.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,tk.jsxs)("button",{onClick:()=>h(-1),className:"flex items-center text-white/80 hover:text-white text-xs",children:[(0,tk.jsx)(qk,{className:"w-3.5 h-3.5 mr-1"}),"Back"]}),k&&S>0&&(0,tk.jsxs)("button",{onClick:()=>h("/checkout"),className:"flex items-center space-x-1 bg-white/20 text-white text-xs px-2.5 py-1 rounded-full font-medium",children:[(0,tk.jsx)(pk,{className:"w-3 h-3"}),(0,tk.jsxs)("span",{children:["Cart (",S,")"]}),(0,tk.jsx)("span",{className:"font-bold",children:l(E)})]})]}),(0,tk.jsxs)("div",{className:"flex items-center space-x-2",children:[null!==f&&void 0!==f&&f.logo?(0,tk.jsx)("img",{src:f.logo,alt:f.name,className:"w-10 h-10 object-cover rounded-xl border border-white/30 flex-shrink-0"}):(0,tk.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center border border-white/30 flex-shrink-0",children:(0,tk.jsx)(fk,{className:"w-5 h-5 text-white"})}),(0,tk.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tk.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap",children:[(0,tk.jsx)("h1",{className:"text-sm font-bold text-white truncate",children:f.name}),w&&(0,tk.jsx)("span",{className:"bg-yellow-400 text-yellow-900 text-xs px-1.5 py-0.5 rounded-full font-semibold",style:{fontSize:"9px"},children:"Your Store"})]}),(0,tk.jsx)("p",{className:"text-white/75 truncate",style:{fontSize:"11px"},children:f.description}),(0,tk.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(0,tk.jsx)("span",{className:"bg-white/20 text-white px-1.5 py-0.5 rounded-full",style:{fontSize:"9px"},children:f.category}),(0,tk.jsxs)("span",{className:"text-white/70",style:{fontSize:"9px"},children:[p.length," products"]}),(0,tk.jsxs)("div",{className:"flex items-center",children:[[...Array(5)].map((e,t)=>(0,tk.jsx)(Lk,{className:"w-2 h-2 text-yellow-300 fill-yellow-300"},t)),(0,tk.jsx)("span",{className:"text-white/70 ml-0.5",style:{fontSize:"9px"},children:"4.8"})]})]})]})]})]})}),w&&(0,tk.jsxs)("div",{className:"bg-amber-50 border-b border-amber-200 px-3 py-2 flex items-center justify-between",children:[(0,tk.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,tk.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"}),(0,tk.jsx)("p",{className:"text-xs font-medium text-amber-800",children:"Owner View"})]}),(0,tk.jsxs)("div",{className:"flex space-x-1.5",children:[(0,tk.jsxs)("button",{onClick:()=>{const t=(()=>{if(!f)return"";const t=window.location.origin;return"".concat(t,"/store/").concat(e)})();t&&(navigator.clipboard.writeText(t),alert("Store link copied!"))},className:"flex items-center space-x-1 bg-white border border-amber-300 text-amber-700 px-2 py-1 rounded-lg",style:{fontSize:"10px"},children:[(0,tk.jsx)(Yk,{className:"w-2.5 h-2.5"}),(0,tk.jsx)("span",{children:"Copy Link"})]}),(0,tk.jsxs)("button",{onClick:()=>h("/manage-products"),className:"flex items-center space-x-1 bg-amber-600 text-white px-2 py-1 rounded-lg",style:{fontSize:"10px"},children:[(0,tk.jsx)($k,{className:"w-2.5 h-2.5"}),(0,tk.jsx)("span",{children:"Edit Store"})]})]})]}),!w&&(0,tk.jsx)("div",{className:"bg-white border-b border-gray-100 px-3 py-1.5",children:(0,tk.jsxs)("div",{className:"flex items-center justify-around",children:[(0,tk.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,tk.jsx)(Jk,{className:"w-3 h-3 text-green-600"}),(0,tk.jsx)("span",{className:"text-green-700 font-medium",style:{fontSize:"10px"},children:"Buyer Protected"})]}),(0,tk.jsx)("div",{className:"w-px h-3 bg-gray-200"}),(0,tk.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,tk.jsx)(zk,{className:"w-3 h-3 text-blue-600"}),(0,tk.jsx)("span",{className:"text-blue-700 font-medium",style:{fontSize:"10px"},children:"Fast Delivery"})]}),(0,tk.jsx)("div",{className:"w-px h-3 bg-gray-200"}),(0,tk.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,tk.jsx)(hk,{className:"w-3 h-3 text-purple-600"}),(0,tk.jsx)("span",{className:"text-purple-700 font-medium",style:{fontSize:"10px"},children:"Secure Pay"})]})]})}),k&&S>0&&(0,tk.jsx)("div",{className:"sticky top-0 z-30 bg-white shadow px-3 py-2 border-b border-gray-100",children:(0,tk.jsxs)("button",{onClick:()=>h("/checkout"),className:"w-full text-white py-2 px-3 rounded-xl font-bold text-xs flex items-center justify-between",style:{background:"linear-gradient(135deg, ".concat(I,", ").concat(_,")")},children:[(0,tk.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,tk.jsx)(pk,{className:"w-4 h-4"}),(0,tk.jsx)("span",{children:"View Cart"}),(0,tk.jsx)("span",{className:"bg-white/25 px-1.5 py-0.5 rounded-full text-xs",children:S})]}),(0,tk.jsxs)("div",{className:"flex items-center space-x-0.5",children:[(0,tk.jsx)("span",{className:"font-bold",children:l(E)}),(0,tk.jsx)(Zk,{className:"w-3.5 h-3.5"})]})]})}),(0,tk.jsx)("div",{className:"px-2 pt-3 pb-20",children:0===p.length?(0,tk.jsxs)("div",{className:"text-center py-10",children:[(0,tk.jsx)(bk,{className:"w-10 h-10 text-gray-200 mx-auto mb-2"}),(0,tk.jsx)("p",{className:"text-gray-400 text-sm",children:"No products yet"}),w&&(0,tk.jsx)("button",{onClick:()=>h("/manage-products"),className:"mt-3 bg-primary text-white px-4 py-2 rounded-xl text-xs font-semibold",children:"Add Products"})]}):(0,tk.jsxs)(tk.Fragment,{children:[(0,tk.jsxs)("p",{className:"text-xs font-semibold text-gray-500 mb-2 px-1",children:[p.length," Products"]}),(0,tk.jsx)("div",{className:"grid grid-cols-2 gap-2",children:p.map(e=>{const t=void 0===e.stock||e.stock>0,n=void 0!==e.stock&&e.stock>0&&e.stock<5,r=m[e.id]||1,s=y[e.id],a=b[e.id];return(0,tk.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden flex flex-col border border-gray-100",style:{boxShadow:"0 1px 6px rgba(0,0,0,0.07)"},children:[(0,tk.jsxs)("div",{className:"relative bg-gray-50",style:{aspectRatio:"1/1"},children:[e.images&&e.images.length>0?(0,tk.jsx)("img",{src:e.images[0],alt:e.name,className:"w-full h-full object-cover"}):(0,tk.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,tk.jsx)(bk,{className:"w-8 h-8 text-gray-200"})}),(0,tk.jsx)("button",{onClick:()=>x(t=>kt(kt({},t),{},{[e.id]:!t[e.id]})),className:"absolute top-1.5 right-1.5 w-6 h-6 bg-white rounded-full shadow-sm flex items-center justify-center",children:(0,tk.jsx)(eN,{className:"w-3 h-3 ".concat(a?"text-red-500 fill-red-500":"text-gray-300")})}),!t&&(0,tk.jsx)("span",{className:"absolute top-1.5 left-1.5 bg-red-500 text-white rounded px-1",style:{fontSize:"8px"},children:"Out of Stock"}),n&&(0,tk.jsxs)("span",{className:"absolute top-1.5 left-1.5 bg-orange-500 text-white rounded px-1",style:{fontSize:"8px"},children:["Only ",e.stock," left"]})]}),(0,tk.jsxs)("div",{className:"p-2 flex flex-col flex-1",children:[(0,tk.jsx)("p",{className:"text-gray-900 font-semibold leading-tight line-clamp-2 mb-1",style:{fontSize:"11px"},children:e.name}),(0,tk.jsxs)("div",{className:"flex items-center space-x-0.5 mb-1",children:[[...Array(5)].map((e,t)=>(0,tk.jsx)(Lk,{className:"w-2.5 h-2.5 text-yellow-400 fill-yellow-400"},t)),(0,tk.jsx)("span",{className:"text-gray-400 ml-0.5",style:{fontSize:"9px"},children:"(42)"})]}),(0,tk.jsx)("p",{className:"font-bold mb-1",style:{color:I,fontSize:"14px"},children:l(e.price)}),(0,tk.jsxs)("div",{className:"flex items-center space-x-0.5 mb-2",children:[(0,tk.jsx)(tN,{className:"w-2.5 h-2.5 text-green-600"}),(0,tk.jsx)("span",{className:"text-green-600 font-medium",style:{fontSize:"9px"},children:"Free Shipping"})]}),(0,tk.jsx)("div",{className:"mt-auto",children:k&&t?(0,tk.jsxs)(tk.Fragment,{children:[(0,tk.jsxs)("div",{className:"flex items-center border border-gray-200 rounded-lg mb-1.5 overflow-hidden",children:[(0,tk.jsx)("button",{onClick:()=>N(e.id,-1),className:"w-7 h-6 flex items-center justify-center hover:bg-gray-50 text-gray-500",children:(0,tk.jsx)(nN,{className:"w-2.5 h-2.5"})}),(0,tk.jsx)("span",{className:"flex-1 text-center text-gray-900 font-semibold",style:{fontSize:"11px"},children:r}),(0,tk.jsx)("button",{onClick:()=>N(e.id,1),className:"w-7 h-6 flex items-center justify-center hover:bg-gray-50 text-gray-500",children:(0,tk.jsx)(dk,{className:"w-2.5 h-2.5"})})]}),(0,tk.jsx)("button",{onClick:()=>(e=>{if(!e)return;const t=m[e.id]||1;for(let n=0;n<t;n++)i(e);v(t=>kt(kt({},t),{},{[e.id]:!0})),setTimeout(()=>v(t=>kt(kt({},t),{},{[e.id]:!1})),1500)})(e),className:"w-full py-1.5 rounded-lg text-white font-bold flex items-center justify-center space-x-1 active:scale-95 transition-transform",style:{fontSize:"10px",background:s?"linear-gradient(135deg,#10b981,#059669)":"linear-gradient(135deg,".concat(I,",").concat(_,")")},children:s?(0,tk.jsxs)(tk.Fragment,{children:[(0,tk.jsx)(Pk,{className:"w-3 h-3"}),(0,tk.jsx)("span",{children:"Added!"})]}):(0,tk.jsxs)(tk.Fragment,{children:[(0,tk.jsx)(pk,{className:"w-3 h-3"}),(0,tk.jsx)("span",{children:"Add to Cart"})]})})]}):w?(0,tk.jsx)("div",{className:"w-full py-1.5 rounded-lg bg-gray-100 text-gray-400 text-center",style:{fontSize:"10px"},children:"Your Product"}):(0,tk.jsx)("div",{className:"w-full py-1.5 rounded-lg bg-gray-100 text-gray-400 text-center",style:{fontSize:"10px"},children:"Out of Stock"})})]})]},e.id)})})]})})]})}const sN=uk("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),iN=uk("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),aN=uk("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);function oN(){const[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(null),[i,a]=(0,s.useState)({name:"",description:"",price:"",category:"",stock:"",storeId:"",images:[],video:null}),{currentUser:o,userType:l}=rk(),{stores:c,products:u,addProduct:h,updateProduct:d,deleteProduct:f,formatPrice:p}=ak(),m=ie();(0,s.useEffect)(()=>{o&&"buyer"===l&&(window.location.href="/")},[o,l]);const g=c.filter(e=>e.ownerId===(null===o||void 0===o?void 0:o.uid)),y=u.filter(e=>e.storeId&&g.some(t=>t.id===e.storeId)),v=()=>{a({name:"",description:"",price:"",category:"",stock:"",storeId:"",images:[],video:null}),t(!1),r(null)};return 0===g.length?(0,tk.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,tk.jsxs)("div",{className:"text-center py-12",children:[(0,tk.jsx)(bk,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,tk.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Stores Yet"}),(0,tk.jsx)("p",{className:"text-gray-600 mb-6",children:"Create a store first to start adding products"}),(0,tk.jsx)("button",{onClick:()=>m("/create-store"),className:"bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Create Store"})]})}):(0,tk.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4",children:[(0,tk.jsxs)("div",{className:"mb-6",children:[(0,tk.jsxs)("button",{onClick:()=>m("/seller-dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[(0,tk.jsx)(qk,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),(0,tk.jsxs)("div",{className:"flex justify-between items-center",children:[(0,tk.jsxs)("div",{children:[(0,tk.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),(0,tk.jsx)("p",{className:"text-gray-600",children:"Manage your store products"})]}),(0,tk.jsx)("button",{onClick:()=>t(!0),className:"bg-primary text-white p-2 rounded-lg hover:bg-blue-600 transition-colors",children:(0,tk.jsx)(dk,{className:"w-5 h-5"})})]})]}),e&&(0,tk.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,tk.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:n?"Edit Product":"Add New Product"}),(0,tk.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!i.name||!i.price||!i.storeId)return alert("Please fill in all required fields");const t=kt(kt({},i),{},{price:parseFloat(i.price),stock:parseInt(i.stock)||0,createdAt:(new Date).toISOString()});n?(d(n.id,t),r(null)):h(t),v()},className:"space-y-4",children:[(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store *"}),(0,tk.jsxs)("select",{value:i.storeId,onChange:e=>a(kt(kt({},i),{},{storeId:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,tk.jsx)("option",{value:"",children:"Select a store"}),g.map(e=>(0,tk.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),(0,tk.jsx)("input",{type:"text",value:i.name,onChange:e=>a(kt(kt({},i),{},{name:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Product name"})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,tk.jsx)("textarea",{value:i.description,onChange:e=>a(kt(kt({},i),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Product description"})]}),(0,tk.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (TZS) *"}),(0,tk.jsx)("input",{type:"number",step:"0.01",value:i.price,onChange:e=>a(kt(kt({},i),{},{price:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"0.00"})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock"}),(0,tk.jsx)("input",{type:"number",value:i.stock,onChange:e=>a(kt(kt({},i),{},{stock:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"0"})]})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,tk.jsxs)("select",{value:i.category,onChange:e=>a(kt(kt({},i),{},{category:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,tk.jsx)("option",{value:"",children:"Select category"}),["Electronics","Clothing","Food","Books","Home","Sports","Beauty","Toys","Other"].map(e=>(0,tk.jsx)("option",{value:e,children:e},e))]})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Images"}),(0,tk.jsxs)("div",{className:"space-y-3",children:[(0,tk.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,tk.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[(0,tk.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,tk.jsx)(sN,{className:"w-8 h-8 mb-2 text-gray-400"}),(0,tk.jsx)("p",{className:"text-sm text-gray-500",children:"Click to upload images"}),(0,tk.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 10MB"})]}),(0,tk.jsx)("input",{type:"file",className:"hidden",multiple:!0,accept:"image/*",onChange:e=>{const t=Array.from(e.target.files).map(e=>new Promise(t=>{const n=new FileReader;n.onload=e=>t(e.target.result),n.readAsDataURL(e)}));Promise.all(t).then(e=>{a(t=>kt(kt({},t),{},{images:[...t.images,...e]}))})}})]})}),i.images.length>0&&(0,tk.jsx)("div",{className:"grid grid-cols-3 gap-2",children:i.images.map((e,t)=>(0,tk.jsxs)("div",{className:"relative",children:[(0,tk.jsx)("img",{src:e,alt:"Product ".concat(t+1),className:"w-full h-24 object-cover rounded-lg"}),(0,tk.jsx)("button",{type:"button",onClick:()=>(e=>{a(t=>kt(kt({},t),{},{images:t.images.filter((t,n)=>n!==e)}))})(t),className:"absolute -top-2 -right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:(0,tk.jsx)(Hk,{className:"w-3 h-3"})})]},t))})]})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Video (Optional)"}),(0,tk.jsx)("div",{className:"space-y-3",children:i.video?(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsxs)("div",{className:"relative",children:[(0,tk.jsx)("video",{src:i.video,controls:!0,className:"w-full h-48 object-cover rounded-lg"}),(0,tk.jsx)("button",{type:"button",onClick:()=>{a(e=>kt(kt({},e),{},{video:null}))},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:(0,tk.jsx)(Hk,{className:"w-3 h-3"})})]}),(0,tk.jsx)("p",{className:"text-xs text-gray-500",children:"Video uploaded successfully"})]}):(0,tk.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,tk.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[(0,tk.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,tk.jsx)(iN,{className:"w-8 h-8 mb-2 text-gray-400"}),(0,tk.jsx)("p",{className:"text-sm text-gray-500",children:"Click to upload video"}),(0,tk.jsx)("p",{className:"text-xs text-gray-500",children:"MP4, WebM up to 50MB"})]}),(0,tk.jsx)("input",{type:"file",className:"hidden",accept:"video/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{a(t=>kt(kt({},t),{},{video:e.target.result}))},e.readAsDataURL(t)}}})]})})})]}),(0,tk.jsxs)("div",{className:"flex space-x-3",children:[(0,tk.jsx)("button",{type:"submit",className:"flex-1 bg-primary text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-600 transition-colors",children:n?"Update Product":"Add Product"}),(0,tk.jsx)("button",{type:"button",onClick:v,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})]}),(0,tk.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,tk.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Your Products (",y.length,")"]}),0===y.length?(0,tk.jsxs)("div",{className:"text-center py-8",children:[(0,tk.jsx)(bk,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,tk.jsx)("p",{className:"text-gray-500 mb-4",children:"No products yet"}),(0,tk.jsx)("button",{onClick:()=>t(!0),className:"bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors inline-block",children:"Add First Product"})]}):(0,tk.jsx)("div",{className:"space-y-3",children:y.map(e=>{const n=g.find(t=>t.id===e.storeId);return(0,tk.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,tk.jsxs)("div",{className:"flex justify-between items-start",children:[(0,tk.jsx)("div",{className:"flex-1",children:(0,tk.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,tk.jsx)("div",{className:"flex-shrink-0",children:e.images&&e.images.length>0?(0,tk.jsx)("img",{src:e.images[0],alt:e.name,className:"w-16 h-16 object-cover rounded-lg"}):(0,tk.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,tk.jsx)(bk,{className:"w-6 h-6 text-gray-400"})})}),(0,tk.jsxs)("div",{className:"flex-1",children:[(0,tk.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,tk.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,tk.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,tk.jsx)("span",{className:"font-medium text-primary",children:p(e.price)}),(0,tk.jsxs)("span",{className:"text-gray-500",children:["Stock: ",e.stock||"Unlimited"]}),(0,tk.jsx)("span",{className:"text-gray-500",children:null===n||void 0===n?void 0:n.name})]}),(0,tk.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[e.images&&e.images.length>0&&(0,tk.jsxs)("span",{className:"text-xs text-gray-500 flex items-center",children:[(0,tk.jsx)(sN,{className:"w-3 h-3 mr-1"}),e.images.length," images"]}),e.video&&(0,tk.jsxs)("span",{className:"text-xs text-gray-500 flex items-center",children:[(0,tk.jsx)(iN,{className:"w-3 h-3 mr-1"}),"Video"]})]})]})]})}),(0,tk.jsxs)("div",{className:"flex space-x-2 ml-4",children:[(0,tk.jsx)("button",{onClick:()=>(e=>{r(e),a({name:e.name,description:e.description,price:e.price.toString(),category:e.category,stock:e.stock.toString(),storeId:e.storeId,images:e.images||[],video:e.video||null}),t(!0)})(e),className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition-colors",children:(0,tk.jsx)(aN,{className:"w-4 h-4"})}),(0,tk.jsx)("button",{onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this product?")&&f(t));var t},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors",children:(0,tk.jsx)(Rk,{className:"w-4 h-4"})})]})]})},e.id)})})]})]})}function lN(){const{currentUser:e,userType:t}=rk(),{cart:n,removeFromCart:r,placeOrder:i,stores:a,formatPrice:o}=ak(),l=ie();(0,s.useEffect)(()=>{e&&"seller"===t&&l("/seller-dashboard")},[e,t,l]);const[c,u]=(0,s.useState)({}),[h,d]=(0,s.useState)({name:"",email:"",phone:"",address:""}),[f,p]=(0,s.useState)(!1),m=n.reduce((e,t)=>(e[t.storeId]||(e[t.storeId]={store:a.find(e=>e.id===t.storeId),items:[]}),e[t.storeId].items.push(t),e),{}),g=(e,t)=>{u(n=>kt(kt({},n),{},{[e]:Math.max(1,(n[e]||1)+t)}))},y=e=>{const t=c[e.id]||e.quantity||1;return e.price*t},v=e=>e.reduce((e,t)=>e+y(t),0),b=()=>Object.values(m).reduce((e,t)=>{let{items:n}=t;return e+v(n)},0);return 0===n.length?(0,tk.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,tk.jsxs)("div",{className:"text-center py-12",children:[(0,tk.jsx)(pk,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,tk.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your Cart is Empty"}),(0,tk.jsx)("p",{className:"text-gray-600 mb-6",children:"Add some products to your cart to checkout"}),(0,tk.jsx)("button",{onClick:()=>l("/explore"),className:"bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Browse Stores"})]})}):(0,tk.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4 pb-24",children:[(0,tk.jsxs)("div",{className:"mb-6",children:[(0,tk.jsxs)("button",{onClick:()=>l(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[(0,tk.jsx)(qk,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,tk.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Checkout"}),(0,tk.jsx)("p",{className:"text-gray-600",children:"Review your order and provide delivery information"})]}),(0,tk.jsx)("div",{className:"space-y-6 mb-6",children:Object.entries(m).map(e=>{let[t,{store:n,items:s}]=e;return(0,tk.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,tk.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:(null===n||void 0===n?void 0:n.name)||"Unknown Store"}),(0,tk.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,tk.jsxs)("div",{className:"flex items-center space-x-3 pb-3 border-b border-gray-100 last:border-0",children:[(0,tk.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,tk.jsx)(pk,{className:"w-6 h-6 text-gray-400"})}),(0,tk.jsxs)("div",{className:"flex-1",children:[(0,tk.jsx)("h4",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,tk.jsxs)("p",{className:"text-gray-600 text-sm",children:[o(e.price)," each"]})]}),(0,tk.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,tk.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[(0,tk.jsx)("button",{onClick:()=>g(e.id,-1),className:"p-1 hover:bg-gray-100 transition-colors",children:(0,tk.jsx)(nN,{className:"w-3 h-3"})}),(0,tk.jsx)("span",{className:"px-2 py-1 text-sm font-medium",children:c[e.id]||e.quantity||1}),(0,tk.jsx)("button",{onClick:()=>g(e.id,1),className:"p-1 hover:bg-gray-100 transition-colors",children:(0,tk.jsx)(dk,{className:"w-3 h-3"})})]}),(0,tk.jsx)("button",{onClick:()=>r(e.id),className:"text-red-600 hover:bg-red-50 p-1 rounded transition-colors",children:(0,tk.jsx)(Rk,{className:"w-4 h-4"})})]}),(0,tk.jsx)("div",{className:"text-right",children:(0,tk.jsx)("p",{className:"font-medium text-gray-900",children:o(y(e))})})]},e.id))}),(0,tk.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,tk.jsxs)("div",{className:"flex justify-between items-center",children:[(0,tk.jsx)("span",{className:"font-medium text-gray-900",children:"Store Total:"}),(0,tk.jsx)("span",{className:"font-bold text-lg text-primary",children:o(v(s))})]})})]},t)})}),(0,tk.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[(0,tk.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Customer Information"}),(0,tk.jsxs)("div",{className:"space-y-4",children:[(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,tk.jsx)("input",{type:"text",value:h.name,onChange:e=>d(kt(kt({},h),{},{name:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter your full name"})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,tk.jsx)("input",{type:"email",value:h.email,onChange:e=>d(kt(kt({},h),{},{email:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter your email"})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,tk.jsx)("input",{type:"tel",value:h.phone,onChange:e=>d(kt(kt({},h),{},{phone:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter your phone number"})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Address *"}),(0,tk.jsx)("textarea",{value:h.address,onChange:e=>d(kt(kt({},h),{},{address:e.target.value})),required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter your delivery address"})]})]})]}),(0,tk.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[(0,tk.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Order Summary"}),(0,tk.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,tk.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,tk.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,tk.jsx)("span",{className:"font-medium",children:o(b())})]}),(0,tk.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,tk.jsx)("span",{className:"text-gray-600",children:"Delivery:"}),(0,tk.jsx)("span",{className:"font-medium",children:"Free"})]}),(0,tk.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,tk.jsx)("span",{className:"text-gray-600",children:"Tax:"}),(0,tk.jsx)("span",{className:"font-medium",children:o(0)})]})]}),(0,tk.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,tk.jsxs)("div",{className:"flex justify-between items-center",children:[(0,tk.jsx)("span",{className:"font-medium text-gray-900",children:"Total:"}),(0,tk.jsx)("span",{className:"font-bold text-xl text-primary",children:o(b())})]})})]}),(0,tk.jsx)("button",{onClick:async()=>{if(!h.name||!h.phone||!h.address)return alert("Please fill in all customer information");p(!0);try{const t=Object.entries(m).map(t=>{let[n,{store:r,items:s}]=t;const a={storeId:n,storeName:(null===r||void 0===r?void 0:r.name)||"Unknown Store",customerId:null===e||void 0===e?void 0:e.uid,customerName:h.name,customerEmail:h.email,customerPhone:h.phone,customerAddress:h.address,items:s.map(e=>({id:e.id,name:e.name,price:e.price,quantity:c[e.id]||e.quantity||1})),total:v(s)};return i(a)});await Promise.all(t),l("/buyer-dashboard")}catch(t){console.error("Error placing orders:",t),alert("Failed to place orders. Please try again.")}p(!1)},disabled:f,className:"w-full bg-secondary text-white py-3 px-4 rounded-lg font-medium hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Placing Order...":"Place Order"})]})}uk("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),uk("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const cN=uk("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),uN=uk("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),hN=uk("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);function dN(){const{currentUser:e}=rk(),{stores:t,orders:n,updateOrder:r,deleteOrder:i,formatPrice:a}=ak(),o=ie(),[l,c]=(0,s.useState)(null),u=t.filter(t=>t.ownerId===(null===e||void 0===e?void 0:e.uid)),h=n.filter(e=>u.some(t=>t.id===e.storeId)),d=async(e,t)=>{try{await r(e,{status:t})}catch(n){console.error("Error updating order status:",n),alert("Failed to update order status")}},f=e=>{switch(e){case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"processing":return"bg-blue-50 text-blue-700 border-blue-200";case"shipped":return"bg-purple-50 text-purple-700 border-purple-200";case"completed":return"bg-green-50 text-green-700 border-green-200";case"cancelled":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return(0,tk.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4 pb-24",children:[(0,tk.jsxs)("div",{className:"mb-6 flex items-center",children:[(0,tk.jsx)("button",{onClick:()=>o("/seller-dashboard"),className:"p-2 mr-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,tk.jsx)(qk,{className:"w-5 h-5 text-gray-600"})}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Order Management"}),(0,tk.jsx)("p",{className:"text-xs text-gray-500",children:"Manage customer orders and shipments"})]})]}),(0,tk.jsx)("div",{className:"space-y-4",children:0===h.length?(0,tk.jsxs)("div",{className:"text-center py-20 bg-white rounded-2xl border border-gray-100",children:[(0,tk.jsx)(bk,{className:"w-16 h-16 text-gray-200 mx-auto mb-4"}),(0,tk.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"No Orders Yet"}),(0,tk.jsx)("p",{className:"text-gray-500 text-sm",children:"When customers buy from your store, orders will appear here."})]}):h.sort((e,t)=>{var n,r;return(null===(n=t.createdAt)||void 0===n?void 0:n.seconds)-(null===(r=e.createdAt)||void 0===r?void 0:r.seconds)}).map(e=>{var t,n;return(0,tk.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 overflow-hidden shadow-sm",children:[(0,tk.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,tk.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tk.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,tk.jsxs)("span",{className:"font-bold text-gray-900 truncate",children:["#",e.id.slice(-6).toUpperCase()]}),(0,tk.jsx)("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded-full border ".concat(f(e.status)," uppercase tracking-wider"),children:e.status})]}),(0,tk.jsxs)("div",{className:"flex items-center text-xs text-gray-500 space-x-2",children:[(0,tk.jsx)("span",{className:"truncate",children:e.customerName}),(0,tk.jsx)("span",{children:"\u2022"}),(0,tk.jsxs)("span",{children:[(null===(t=e.items)||void 0===t?void 0:t.length)||0," items"]})]})]}),(0,tk.jsxs)("div",{className:"text-right flex items-center space-x-2",children:[(0,tk.jsx)("p",{className:"text-base font-bold text-gray-900",children:a(e.total)}),(0,tk.jsxs)("div",{className:"flex flex-col",children:[(0,tk.jsx)("button",{onClick:()=>c(l===e.id?null:e.id),className:"text-primary hover:bg-blue-50 p-1 rounded-lg transition-colors",children:l===e.id?(0,tk.jsx)(Mk,{className:"w-5 h-5"}):(0,tk.jsx)(Fk,{className:"w-5 h-5"})}),(0,tk.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this order? This cannot be undone."))try{await i(e)}catch(t){console.error("Error deleting order:",t),alert("Failed to delete order")}})(e.id),className:"text-red-500 hover:bg-red-50 p-1 rounded-lg transition-colors mt-1",children:(0,tk.jsx)(Rk,{className:"w-4 h-4"})})]})]})]}),l===e.id&&(0,tk.jsxs)("div",{className:"bg-gray-50/50 border-t border-gray-100 p-4 animate-in slide-in-from-top-2 duration-200",children:[(0,tk.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsx)("h4",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Delivery Info"}),(0,tk.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,tk.jsx)(cN,{className:"w-3.5 h-3.5 text-gray-400 mt-0.5"}),(0,tk.jsx)("span",{className:"text-sm text-gray-700",children:e.customerName})]}),(0,tk.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,tk.jsx)(Uk,{className:"w-3.5 h-3.5 text-gray-400 mt-0.5"}),(0,tk.jsx)("span",{className:"text-sm text-gray-700",children:e.customerAddress})]})]}),(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsx)("h4",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Contact"}),(0,tk.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,tk.jsx)(uN,{className:"w-3.5 h-3.5 text-gray-400"}),(0,tk.jsx)("span",{className:"text-sm text-gray-700",children:e.customerPhone})]}),(0,tk.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,tk.jsx)(hN,{className:"w-3.5 h-3.5 text-gray-400"}),(0,tk.jsx)("span",{className:"text-sm text-gray-700",children:e.customerEmail})]})]})]}),(0,tk.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-3 mb-4",children:[(0,tk.jsx)("h4",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Order Items"}),(0,tk.jsx)("div",{className:"space-y-2",children:null===(n=e.items)||void 0===n?void 0:n.map((e,t)=>(0,tk.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,tk.jsxs)("div",{className:"flex-1 min-w-0 pr-4",children:[(0,tk.jsx)("p",{className:"text-gray-900 font-medium truncate",children:e.name}),(0,tk.jsxs)("p",{className:"text-xs text-gray-500",children:["Qty: ",e.quantity]})]}),(0,tk.jsx)("p",{className:"font-semibold text-gray-900",children:a(e.price*e.quantity)})]},t))}),(0,tk.jsxs)("div",{className:"mt-3 pt-3 border-t border-dashed border-gray-100 flex justify-between items-center",children:[(0,tk.jsx)("span",{className:"text-sm font-bold text-gray-900",children:"Total Amount"}),(0,tk.jsx)("span",{className:"text-base font-bold text-primary",children:a(e.total)})]})]}),(0,tk.jsxs)("div",{children:[(0,tk.jsx)("h4",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Update Status"}),(0,tk.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,tk.jsx)("button",{onClick:()=>d(e.id,"processing"),className:"text-xs font-bold py-2 rounded-xl border transition-all ".concat("processing"===e.status?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-200 hover:border-blue-300"),children:"Processing"}),(0,tk.jsx)("button",{onClick:()=>d(e.id,"shipped"),className:"text-xs font-bold py-2 rounded-xl border transition-all ".concat("shipped"===e.status?"bg-purple-600 text-white border-purple-600":"bg-white text-gray-600 border-gray-200 hover:border-purple-300"),children:"Shipped"}),(0,tk.jsx)("button",{onClick:()=>d(e.id,"completed"),className:"text-xs font-bold py-2 rounded-xl border transition-all ".concat("completed"===e.status?"bg-green-600 text-white border-green-600":"bg-white text-gray-600 border-gray-200 hover:border-green-300"),children:"Completed"}),(0,tk.jsx)("button",{onClick:()=>d(e.id,"cancelled"),className:"text-xs font-bold py-2 rounded-xl border transition-all ".concat("cancelled"===e.status?"bg-red-600 text-white border-red-600":"bg-white text-gray-600 border-gray-200 hover:border-red-300"),children:"Cancelled"})]})]})]})]},e.id)})})]})}const fN=uk("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);function pN(){const{currentUser:e,userType:t}=rk(),{stores:n}=ak(),r=ie(),[i,a]=(0,s.useState)("");(0,s.useEffect)(()=>{e&&"seller"===t&&r("/seller-dashboard")},[e,t,r]),console.log("Explore Page - Stores from Context:",n);const o=n.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.description.toLowerCase().includes(i.toLowerCase()));return console.log("Explore Page - Filtered Stores:",o),(0,tk.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-24",children:[(0,tk.jsxs)("div",{className:"bg-white px-4 pt-4 pb-6 rounded-b-[2.5rem] shadow-sm sticky top-0 z-10",children:[(0,tk.jsxs)("div",{className:"flex items-center mb-6",children:[(0,tk.jsx)("button",{onClick:()=>r(-1),className:"p-2 mr-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,tk.jsx)(qk,{className:"w-5 h-5 text-gray-600"})}),(0,tk.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Explore Stores"})]}),(0,tk.jsxs)("div",{className:"relative",children:[(0,tk.jsx)(xk,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,tk.jsx)("input",{type:"text",placeholder:"Search shops or categories...",value:i,onChange:e=>a(e.target.value),className:"w-full bg-gray-100 border-none rounded-2xl py-3 pl-12 pr-4 text-sm focus:ring-2 focus:ring-primary/20 transition-all outline-none"})]})]}),(0,tk.jsxs)("div",{className:"px-4 mt-6",children:[(0,tk.jsx)("div",{className:"flex items-center justify-between mb-4 px-2",children:(0,tk.jsxs)("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:[o.length," Stores Found"]})}),0===o.length?(0,tk.jsxs)("div",{className:"text-center py-20 bg-white rounded-[2.5rem] border border-gray-100",children:[(0,tk.jsx)(fk,{className:"w-16 h-16 text-gray-200 mx-auto mb-4"}),(0,tk.jsx)("h3",{className:"text-gray-900 font-bold",children:"No stores found"}),(0,tk.jsx)("p",{className:"text-gray-500 text-xs",children:"Try searching for something else"})]}):(0,tk.jsx)("div",{className:"grid grid-cols-1 gap-4",children:o.map(e=>(0,tk.jsxs)("div",{onClick:()=>r("/store/".concat(e.id)),className:"bg-white rounded-[2rem] p-4 flex items-center space-x-4 border border-gray-100 shadow-sm active:scale-[0.98] transition-all cursor-pointer hover:border-primary/30",children:[(0,tk.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gray-50 flex-shrink-0 border border-gray-100 overflow-hidden flex items-center justify-center",children:e.logo?(0,tk.jsx)("img",{src:e.logo,alt:e.name,className:"w-full h-full object-cover"}):(0,tk.jsx)(fk,{className:"w-8 h-8 text-gray-200"})}),(0,tk.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,tk.jsxs)("div",{className:"flex items-center space-x-1 mb-0.5",children:[(0,tk.jsx)("h3",{className:"font-bold text-gray-900 truncate tracking-tight",children:e.name}),(0,tk.jsxs)("div",{className:"flex items-center bg-yellow-50 px-1.5 py-0.5 rounded-full",children:[(0,tk.jsx)(Lk,{className:"w-2.5 h-2.5 text-yellow-500 fill-yellow-500"}),(0,tk.jsx)("span",{className:"text-[10px] font-bold text-yellow-700 ml-0.5",children:"4.9"})]})]}),(0,tk.jsx)("p",{className:"text-xs text-gray-500 line-clamp-1 mb-2",children:e.description}),(0,tk.jsxs)("div",{className:"flex items-center space-x-3 text-[10px] font-bold text-gray-400 uppercase tracking-tighter",children:[(0,tk.jsxs)("div",{className:"flex items-center",children:[(0,tk.jsx)(fN,{className:"w-3 h-3 mr-1"}),"Open Shop"]}),(0,tk.jsxs)("div",{className:"flex items-center",children:[(0,tk.jsx)(Uk,{className:"w-3 h-3 mr-1"}),"Global"]})]})]}),(0,tk.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-50 flex items-center justify-center text-gray-400",children:(0,tk.jsx)(Zk,{className:"w-5 h-5"})})]},e.id))})]}),(0,tk.jsx)("div",{className:"px-4 mt-8",children:(0,tk.jsxs)("div",{className:"bg-primary rounded-[2.5rem] p-6 text-white relative overflow-hidden shadow-lg shadow-primary/20",children:[(0,tk.jsxs)("div",{className:"relative z-10",children:[(0,tk.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest bg-white/20 px-2 py-0.5 rounded-full",children:"New Arrivals"}),(0,tk.jsx)("h3",{className:"text-xl font-bold mt-2 mb-1",children:"Flash Sales Today!"}),(0,tk.jsx)("p",{className:"text-xs text-white/80 mb-4 max-w-[170px]",children:"Get up to 40% off on selected stores this weekend."}),(0,tk.jsx)("button",{className:"bg-white text-primary text-[10px] font-bold py-2 px-6 rounded-full uppercase tracking-wider shadow-sm",children:"Discover Now"})]}),(0,tk.jsx)("div",{className:"absolute top-1/2 -right-4 -translate-y-1/2 opacity-20 rotate-12",children:(0,tk.jsx)(fN,{className:"w-32 h-32"})})]})})]})}const mN=function(){const[e,t]=(0,s.useState)(!0);return s.useEffect(()=>{const e=setTimeout(()=>{t(!1)},4e3);return()=>clearTimeout(e)},[]),(0,tk.jsx)(sk,{children:(0,tk.jsxs)(ok,{children:[e&&(0,tk.jsx)(yk,{onComplete:()=>t(!1)}),(0,tk.jsx)(Te,{children:(0,tk.jsxs)("div",{className:"mobile-container ".concat(e?"hidden":""),children:[(0,tk.jsxs)(ke,{children:[(0,tk.jsx)(xe,{path:"/",element:(0,tk.jsx)(Sk,{})}),(0,tk.jsx)(xe,{path:"/login",element:(0,tk.jsx)(Ck,{})}),(0,tk.jsx)(xe,{path:"/register",element:(0,tk.jsx)(jk,{})}),(0,tk.jsx)(xe,{path:"/seller-dashboard",element:(0,tk.jsx)(Ok,{})}),(0,tk.jsx)(xe,{path:"/buyer-dashboard",element:(0,tk.jsx)(Bk,{})}),(0,tk.jsx)(xe,{path:"/create-store",element:(0,tk.jsx)(Xk,{})}),(0,tk.jsx)(xe,{path:"/store/:storeId",element:(0,tk.jsx)(rN,{})}),(0,tk.jsx)(xe,{path:"/manage-products",element:(0,tk.jsx)(oN,{})}),(0,tk.jsx)(xe,{path:"/checkout",element:(0,tk.jsx)(lN,{})}),(0,tk.jsx)(xe,{path:"/orders",element:(0,tk.jsx)(dN,{})}),(0,tk.jsx)(xe,{path:"/explore",element:(0,tk.jsx)(pN,{})})]}),(0,tk.jsx)(gk,{})]})})]})})};class gN extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("App Crash Error:",e,t)}render(){return this.state.hasError?(0,tk.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-6 text-center",children:[(0,tk.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mb-6",children:(0,tk.jsx)("svg",{className:"w-10 h-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tk.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,tk.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),(0,tk.jsx)("p",{className:"text-gray-600 mb-6",children:"We're sorry for the interruption. Please try refreshing the app."}),(0,tk.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-primary text-white px-8 py-3 rounded-2xl font-bold transition-all active:scale-95 shadow-lg shadow-primary/20",children:"Reload Website"})]}):this.props.children}}const yN=gN;a.createRoot(document.getElementById("root")).render((0,tk.jsx)(s.StrictMode,{children:(0,tk.jsx)(yN,{children:(0,tk.jsx)(mN,{})})})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/serviceWorkerRegistration.js").catch(e=>{console.log("Service worker registration failed: ",e)})})})();
//# sourceMappingURL=main.1eddff72.js.map